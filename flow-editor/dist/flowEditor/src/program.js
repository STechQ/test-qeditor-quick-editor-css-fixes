/*! For license information please see program.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.flow=t():e.flow=t()}(self,(()=>(()=>{var e={967:(e,t,n)=>{"use strict";var i=n(784),r=n(616);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!u.call(p,e)||!u.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),R=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function L(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=F&&e[F]||e["@@iterator"])?e:null}var I,z=Object.assign;function N(e){if(void 0===I)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var D=!1;function B(e,t){if(!e||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var i=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){i=e}e.call(t.prototype)}else{try{throw Error()}catch(e){i=e}e()}}catch(t){if(t&&i&&"string"==typeof t.stack){for(var r=t.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{D=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function V(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return B(e.type,!1);case 11:return B(e.type.render,!1);case 1:return B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case E:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case O:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return H(e(t))}catch(e){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=$(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function G(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){G(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he,ue=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var _e=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Se=null;function Ee(e){if(e=vr(e)){if("function"!=typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=xr(t),we(e.stateNode,e.type,t))}}function Me(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Re(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ce(){}var Oe=!1;function Pe(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Te(e,t,n)}finally{Oe=!1,(null!==ke||null!==Se)&&(Ce(),Re())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var je=!1;if(h)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){je=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(he){je=!1}function Le(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Ie=!1,ze=null,Ne=!1,De=null,Be={onError:function(e){Ie=!0,ze=e}};function Ve(e,t,n,i,r,s,o,a,l){Ie=!1,ze=null,Le.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(s(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return We(r),e;if(o===i)return We(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,qe=r.unstable_cancelCallback,Ke=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Ge=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2,ct=64,ht=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ut(a):0!=(s&=o)&&(i=ut(s))}else 0!=(o=n&~r)?i=ut(o):0!==s&&(i=ut(s));if(0===i)return 0;if(0!==t&&t!==i&&0==(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!=(4194240&s)))return t;if(0!=(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _t(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var xt,wt,kt,St,Et,Mt=!1,Rt=[],Tt=null,Ct=null,Ot=null,Pt=new Map,At=new Map,jt=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function It(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&null!==(t=vr(t))&&wt(t),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function zt(e){var t=yr(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Dt(e,t,n){Nt(e)&&n.delete(t)}function Bt(){Mt=!1,null!==Tt&&Nt(Tt)&&(Tt=null),null!==Ct&&Nt(Ct)&&(Ct=null),null!==Ot&&Nt(Ot)&&(Ot=null),Pt.forEach(Dt),At.forEach(Dt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Mt||(Mt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return Vt(t,e)}if(0<Rt.length){Vt(Rt[0],e);for(var n=1;n<Rt.length;n++){var i=Rt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==Ct&&Vt(Ct,e),null!==Ot&&Vt(Ot,e),Pt.forEach(t),At.forEach(t),n=0;n<jt.length;n++)(i=jt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<jt.length&&null===(n=jt[0]).blockedOn;)zt(n),null===n.blockedOn&&jt.shift()}var Ut=b.ReactCurrentBatchConfig,Wt=!0;function $t(e,t,n,i){var r=vt,s=Ut.transition;Ut.transition=null;try{vt=1,Xt(e,t,n,i)}finally{vt=r,Ut.transition=s}}function Yt(e,t,n,i){var r=vt,s=Ut.transition;Ut.transition=null;try{vt=4,Xt(e,t,n,i)}finally{vt=r,Ut.transition=s}}function Xt(e,t,n,i){if(Wt){var r=Kt(e,t,n,i);if(null===r)Wi(e,t,i,qt,n),Lt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Tt=It(Tt,e,t,n,i,r),!0;case"dragenter":return Ct=It(Ct,e,t,n,i,r),!0;case"mouseover":return Ot=It(Ot,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Pt.set(s,It(Pt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,At.set(s,It(At.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Lt(e,i),4&t&&-1<Ft.indexOf(e)){for(;null!==r;){var s=vr(r);if(null!==s&&xt(s),null===(s=Kt(e,t,n,i))&&Wi(e,t,i,qt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var qt=null;function Kt(e,t,n,i){if(qt=null,null!==(e=yr(e=xe(i))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Gt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in Gt?Gt.value:Gt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(cn),un=z({},cn,{view:0,detail:0}),fn=sn(un),dn=z({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(dn),gn=sn(z({},dn,{dataTransfer:0})),mn=sn(z({},un,{relatedTarget:0})),_n=sn(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=sn(yn),bn=sn(z({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var Mn=z({},un,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=sn(Mn),Tn=sn(z({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(z({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),On=sn(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=z({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Pn),jn=[9,13,27,32],Fn=h&&"CompositionEvent"in window,Ln=null;h&&"documentMode"in document&&(Ln=document.documentMode);var In=h&&"TextEvent"in window&&!Ln,zn=h&&(!Fn||Ln&&8<Ln&&11>=Ln),Nn=String.fromCharCode(32),Dn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1,Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function $n(e,t,n,i){Me(i),0<(t=Yi(t,"onChange")).length&&(n=new hn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function qn(e){Ni(e,0)}function Kn(e){if(X(br(e)))return e}function Qn(e,t){if("change"===e)return t}var Gn=!1;if(h){var Jn;if(h){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"==typeof ei.oninput}Jn=Zn}else Jn=!1;Gn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Yn&&(Yn.detachEvent("onpropertychange",ni),Xn=Yn=null)}function ni(e){if("value"===e.propertyName&&Kn(Xn)){var t=[];$n(t,Xn,e,xe(e)),Pe(qn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Xn=n,(Yn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Xn)}function si(e,t){if("click"===e)return Kn(t)}function oi(e,t){if("input"===e||"change"===e)return Kn(t)}var ai="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function li(e,t){if(ai(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!u.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hi(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fi(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=fi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&di(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=hi(n,s);var o=hi(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=h&&"documentMode"in document&&11>=document.documentMode,mi=null,_i=null,yi=null,vi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==mi||mi!==q(i)||(i="selectionStart"in(i=mi)&&di(i)?{start:i.selectionStart,end:i.selectionEnd}:{anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Yi(_i,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},ki={},Si={};function Ei(e){if(ki[e])return ki[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return ki[e]=n[t];return e}h&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Mi=Ei("animationend"),Ri=Ei("animationiteration"),Ti=Ei("animationstart"),Ci=Ei("transitionend"),Oi=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){Oi.set(e,t),l(t,[e])}for(var ji=0;ji<Pi.length;ji++){var Fi=Pi[ji];Ai(Fi.toLowerCase(),"on"+(Fi[0].toUpperCase()+Fi.slice(1)))}Ai(Mi,"onAnimationEnd"),Ai(Ri,"onAnimationIteration"),Ai(Ti,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(Ci,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function zi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(Ve.apply(this,arguments),Ie){if(!Ie)throw Error(s(198));var h=ze;Ie=!1,ze=null,Ne||(Ne=!0,De=h)}}(i,t,void 0,e),e.currentTarget=null}function Ni(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;zi(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;zi(r,a,c),s=l}}}if(Ne)throw e=De,Ne=!1,De=null,e}function Di(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(Ui(t,e,2,!1),n.add(i))}function Bi(e,t,n){var i=0;t&&(i|=4),Ui(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[Vi]){e[Vi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ii.has(t)||Bi(t,!1,e),Bi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Bi("selectionchange",!1,t))}}function Ui(e,t,n,i){switch(Qt(t)){case 1:var r=$t;break;case 4:r=Yt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var s=i;if(0==(1&t)&&0==(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=yr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Pe((function(){var i=s,r=xe(n),o=[];e:{var a=Oi.get(e);if(void 0!==a){var l=hn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Rn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Mi:case Ri:case Ti:l=_n;break;case Ci:l=On;break;case"scroll":l=fn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var h=0!=(4&t),u=!h&&"scroll"===e,f=h?null!==a?a+"Capture":null:a;h=[];for(var d,p=i;null!==p;){var g=(d=p).stateNode;if(5===d.tag&&null!==g&&(d=g,null!==f&&null!=(g=Ae(p,f))&&h.push($i(p,g,d))),u)break;p=p.return}0<h.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:h}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(h=pn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(h=Tn,g="onPointerLeave",f="onPointerEnter",p="pointer"),u=null==l?a:br(l),d=null==c?a:br(c),(a=new h(g,p+"leave",l,n,r)).target=u,a.relatedTarget=d,g=null,yr(r)===i&&((h=new h(f,p+"enter",c,n,r)).target=d,h.relatedTarget=u,g=h),u=g,l&&c)e:{for(f=c,p=0,d=h=l;d;d=Xi(d))p++;for(d=0,g=f;g;g=Xi(g))d++;for(;0<p-d;)h=Xi(h),p--;for(;0<d-p;)f=Xi(f),d--;for(;p--;){if(h===f||null!==f&&h===f.alternate)break e;h=Xi(h),f=Xi(f)}h=null}else h=null;null!==l&&qi(o,a,l,h,!1),null!==c&&null!==u&&qi(o,u,c,h,!0)}if("select"===(l=(a=i?br(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(Wn(a))if(Gn)m=oi;else{m=ri;var _=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?$n(o,m,n,r):(_&&_(e,a,i),"focusout"===e&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&ee(a,"number",a.value)),_=i?br(i):window,e){case"focusin":(Wn(_)||"true"===_.contentEditable)&&(mi=_,_i=i,yi=null);break;case"focusout":yi=_i=mi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,bi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":bi(o,n,r)}var y;if(Fn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?Bn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(zn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(y=en()):(Jt="value"in(Gt=r)?Gt.value:Gt.textContent,Hn=!0)),0<(_=Yi(i,v)).length&&(v=new bn(v,e,null,n,r),o.push({event:v,listeners:_}),(y||null!==(y=Vn(n)))&&(v.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Dn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Fn&&Bn(e,t)?(e=en(),Zt=Jt=Gt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(i=Yi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y)}Ni(o,t)}))}function $i(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ae(e,n))&&i.unshift($i(e,s,r)),null!=(s=Ae(e,t))&&i.push($i(e,s,r))),e=e.return}return i}function Xi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ae(n,s))&&o.unshift($i(n,l,a)):r||null!=(l=Ae(n,s))&&o.push($i(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Ki=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Gi(e){return("string"==typeof e?e:""+e).replace(Ki,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=Gi(t),Gi(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"==typeof setTimeout?setTimeout:void 0,rr="function"==typeof clearTimeout?clearTimeout:void 0,sr="function"==typeof Promise?Promise:void 0,or="function"==typeof queueMicrotask?queueMicrotask:void 0!==sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ht(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),fr="__reactFiber$"+ur,dr="__reactProps$"+ur,pr="__reactContainer$"+ur,gr="__reactEvents$"+ur,mr="__reactListeners$"+ur,_r="__reactHandles$"+ur;function yr(e){var t=e[fr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[fr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hr(e);null!==e;){if(n=e[fr])return n;e=hr(e)}return t}n=(e=n).parentNode}return null}function vr(e){return!(e=e[fr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xr(e){return e[dr]||null}var wr=[],kr=-1;function Sr(e){return{current:e}}function Er(e){0>kr||(e.current=wr[kr],wr[kr]=null,kr--)}function Mr(e,t){kr++,wr[kr]=e.current,e.current=t}var Rr={},Tr=Sr(Rr),Cr=Sr(!1),Or=Rr;function Pr(e,t){var n=e.type.contextTypes;if(!n)return Rr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ar(e){return null!=e.childContextTypes}function jr(){Er(Cr),Er(Tr)}function Fr(e,t,n){if(Tr.current!==Rr)throw Error(s(168));Mr(Tr,t),Mr(Cr,n)}function Lr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,U(e)||"Unknown",r));return z({},n,i)}function Ir(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rr,Or=Tr.current,Mr(Tr,e),Mr(Cr,Cr.current),!0}function zr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Lr(e,t,Or),i.__reactInternalMemoizedMergedChildContext=e,Er(Cr),Er(Tr),Mr(Tr,e)):Er(Cr),Mr(Cr,n)}var Nr=null,Dr=!1,Br=!1;function Vr(e){null===Nr?Nr=[e]:Nr.push(e)}function Hr(){if(!Br&&null!==Nr){Br=!0;var e=0,t=vt;try{var n=Nr;for(vt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Nr=null,Dr=!1}catch(t){throw null!==Nr&&(Nr=Nr.slice(e+1)),Xe(Ze,Hr),t}finally{vt=t,Br=!1}}return null}var Ur=[],Wr=0,$r=null,Yr=0,Xr=[],qr=0,Kr=null,Qr=1,Gr="";function Jr(e,t){Ur[Wr++]=Yr,Ur[Wr++]=$r,$r=e,Yr=t}function Zr(e,t,n){Xr[qr++]=Qr,Xr[qr++]=Gr,Xr[qr++]=Kr,Kr=e;var i=Qr;e=Gr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Qr=1<<32-ot(t)+r|n<<r|i,Gr=s+e}else Qr=1<<s|n<<r|i,Gr=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===$r;)$r=Ur[--Wr],Ur[Wr]=null,Yr=Ur[--Wr],Ur[Wr]=null;for(;e===Kr;)Kr=Xr[--qr],Xr[qr]=null,Gr=Xr[--qr],Xr[qr]=null,Qr=Xr[--qr],Xr[qr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Kr?{id:Qr,overflow:Gr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!rs)return hs(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw fs(),Error(s(418));for(;t;)os(e,t),t=cr(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=cr(e.nextSibling)}function ds(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var _s=Sr(null),ys=null,vs=null,bs=null;function xs(){bs=vs=ys=null}function ws(e){var t=_s.current;Er(_s),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){ys=e,bs=vs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Es(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===vs){if(null===ys)throw Error(s(308));vs=e,ys.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return t}var Ms=null;function Rs(e){null===Ms?Ms=[e]:Ms.push(e)}function Ts(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Rs(t)):(n.next=r.next,r.next=n),t.interleaved=n,Cs(e,i)}function Cs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function As(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!=(2&Tl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Cs(e,n)}return null===(r=i.interleaved)?(t.next=t,Rs(i)):(t.next=r.next,r.next=t),i.interleaved=t,Cs(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Is(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,i){var r=e.updateQueue;Os=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var h=e.alternate;null!==h&&(a=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===a?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l)}if(null!==s){var u=r.baseState;for(o=0,h=c=l=null,a=s;;){var f=a.lane,d=a.eventTime;if((i&f)===f){null!==h&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(f=t,d=n,g.tag){case 1:if("function"==typeof(p=g.payload)){u=p.call(d,u,f);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=g.payload)?p.call(d,u,f):p))break e;u=z({},u,f);break e;case 2:Os=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(f=r.effects)?r.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=d,l=u):h=h.next=d,o|=f;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(f=a).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}if(null===h&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Il|=o,e.lanes=o,e.memoizedState=u}}function Ns(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!=typeof r)throw Error(s(191,r));r.call(i)}}}var Ds=(new i.Component).refs;function Bs(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vs={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=js(i,r);s.payload=t,null!=n&&(s.callback=n),null!==(t=Fs(e,s,r))&&(nc(t,e,r,i),Ls(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=js(i,r);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Fs(e,s,r))&&(nc(t,e,r,i),Ls(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=js(n,i);r.tag=2,null!=t&&(r.callback=t),null!==(t=Fs(e,r,i))&&(nc(t,e,i,n),Ls(t,e,i))}};function Hs(e,t,n,i,r,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&li(n,i)&&li(r,s))}function Us(e,t,n){var i=!1,r=Rr,s=t.contextType;return"object"==typeof s&&null!==s?s=Es(s):(r=Ar(t)?Or:Tr.current,s=(i=null!=(i=t.contextTypes))?Pr(e,r):Rr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function $s(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Ds,Ps(e);var s=t.contextType;"object"==typeof s&&null!==s?r.context=Es(s):(s=Ar(t)?Or:Tr.current,r.context=Pr(e,s)),r.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Bs(e,t,s,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Vs.enqueueReplaceState(r,r.state,null),zs(e,n,r,i),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4194308)}function Ys(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Ds&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qs(e){return(0,e._init)(e._payload)}function Ks(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=zc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===A&&qs(s)===t.type)?((i=r(t,n.props)).ref=Ys(e,t,n),i.return=e,i):((i=Fc(n.type,n.key,n.props,null,e.mode,i)).ref=Ys(e,t,n),i.return=e,i)}function h(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=Ys(e,null,t),n.return=e,n;case w:return(t=Nc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Xs(e,t)}return null}function d(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==r?null:l(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?h(e,t,n,i):null;case A:return d(e,t,(r=n._init)(n._payload),i)}if(te(n)||L(n))return null!==r?null:u(e,t,n,i,null);Xs(e,n)}return null}function p(e,t,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case x:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case A:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||L(i))return u(t,e=e.get(n)||null,i,r,null);Xs(t,i)}return null}function g(r,s,a,l){for(var c=null,h=null,u=s,g=s=0,m=null;null!==u&&g<a.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var _=d(r,u,a[g],l);if(null===_){null===u&&(u=m);break}e&&u&&null===_.alternate&&t(r,u),s=o(_,s,g),null===h?c=_:h.sibling=_,h=_,u=m}if(g===a.length)return n(r,u),rs&&Jr(r,g),c;if(null===u){for(;g<a.length;g++)null!==(u=f(r,a[g],l))&&(s=o(u,s,g),null===h?c=u:h.sibling=u,h=u);return rs&&Jr(r,g),c}for(u=i(r,u);g<a.length;g++)null!==(m=p(u,r,g,a[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),s=o(m,s,g),null===h?c=m:h.sibling=m,h=m);return e&&u.forEach((function(e){return t(r,e)})),rs&&Jr(r,g),c}function m(r,a,l,c){var h=L(l);if("function"!=typeof h)throw Error(s(150));if(null==(l=h.call(l)))throw Error(s(151));for(var u=h=null,g=a,m=a=0,_=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(_=g,g=null):_=g.sibling;var v=d(r,g,y.value,c);if(null===v){null===g&&(g=_);break}e&&g&&null===v.alternate&&t(r,g),a=o(v,a,m),null===u?h=v:u.sibling=v,u=v,g=_}if(y.done)return n(r,g),rs&&Jr(r,m),h;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=f(r,y.value,c))&&(a=o(y,a,m),null===u?h=y:u.sibling=y,u=y);return rs&&Jr(r,m),h}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===u?h=y:u.sibling=y,u=y);return e&&g.forEach((function(e){return t(r,e)})),rs&&Jr(r,m),h}return function e(i,s,o,l){if("object"==typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,h=s;null!==h;){if(h.key===c){if((c=o.type)===k){if(7===h.tag){n(i,h.sibling),(s=r(h,o.props.children)).return=i,i=s;break e}}else if(h.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===A&&qs(c)===h.type){n(i,h.sibling),(s=r(h,o.props)).ref=Ys(i,h,o),s.return=i,i=s;break e}n(i,h);break}t(i,h),h=h.sibling}o.type===k?((s=Lc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Fc(o.type,o.key,o.props,null,i.mode,l)).ref=Ys(i,s,o),l.return=i,i=l)}return a(i);case w:e:{for(h=o.key;null!==s;){if(s.key===h){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Nc(o,i.mode,l)).return=i,i=s}return a(i);case A:return e(i,s,(h=o._init)(o._payload),l)}if(te(o))return g(i,s,o,l);if(L(o))return m(i,s,o,l);Xs(i,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=zc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var Qs=Ks(!0),Gs=Ks(!1),Js={},Zs=Sr(Js),eo=Sr(Js),to=Sr(Js);function no(e){if(e===Js)throw Error(s(174));return e}function io(e,t){switch(Mr(to,t),Mr(eo,e),Mr(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(Zs),Mr(Zs,t)}function ro(){Er(Zs),Er(eo),Er(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Mr(eo,e),Mr(Zs,n))}function oo(e){eo.current===e&&(Er(Zs),Er(eo))}var ao=Sr(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function ho(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var uo=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,go=null,mo=null,_o=null,yo=!1,vo=!1,bo=0,xo=0;function wo(){throw Error(s(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function So(e,t,n,i,r,o){if(po=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?aa:la,e=n(i,r),vo){o=0;do{if(vo=!1,bo=0,25<=o)throw Error(s(301));o+=1,_o=mo=null,t.updateQueue=null,uo.current=ca,e=n(i,r)}while(vo)}if(uo.current=oa,t=null!==mo&&null!==mo.next,po=0,_o=mo=go=null,yo=!1,t)throw Error(s(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Mo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_o?go.memoizedState=_o=e:_o=_o.next=e,_o}function Ro(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===_o?go.memoizedState:_o.next;if(null!==t)_o=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===_o?go.memoizedState=_o=e:_o=_o.next=e}return _o}function To(e,t){return"function"==typeof t?t(e):t}function Co(e){var t=Ro(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=mo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,h=o;do{var u=h.lane;if((po&u)===u)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var f={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(l=c=f,a=i):c=c.next=f,go.lanes|=u,Il|=u}h=h.next}while(null!==h&&h!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(ba=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,go.lanes|=o,Il|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oo(e){var t=Ro(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Po(){}function Ao(e,t){var n=go,i=Ro(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,ba=!0),i=i.queue,Wo(Lo.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==_o&&1&_o.memoizedState.tag){if(n.flags|=2048,Do(9,Fo.bind(null,n,i,r,t),void 0,null),null===Cl)throw Error(s(349));0!=(30&po)||jo(n,t,r)}return r}function jo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Fo(e,t,n,i){t.value=n,t.getSnapshot=i,Io(t)&&zo(e)}function Lo(e,t,n){return n((function(){Io(t)&&zo(e)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(e){return!0}}function zo(e){var t=Cs(e,1);null!==t&&nc(t,e,1,-1)}function No(e){var t=Mo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,go,e),[t.memoizedState,e]}function Do(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Bo(){return Ro().memoizedState}function Vo(e,t,n,i){var r=Mo();go.flags|=e,r.memoizedState=Do(1|t,n,void 0,void 0===i?null:i)}function Ho(e,t,n,i){var r=Ro();i=void 0===i?null:i;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==i&&ko(i,o.deps))return void(r.memoizedState=Do(t,n,s,i))}go.flags|=e,r.memoizedState=Do(1|t,n,s,i)}function Uo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return Ho(2048,8,e,t)}function $o(e,t){return Ho(4,2,e,t)}function Yo(e,t){return Ho(4,4,e,t)}function Xo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!=n?n.concat([e]):null,Ho(4,4,Xo.bind(null,t,e),n)}function Ko(){}function Qo(e,t){var n=Ro();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=Ro();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0==(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),go.lanes|=n,Il|=n,e.baseState=!0),t)}function Zo(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var i=fo.transition;fo.transition={};try{e(!1),t()}finally{vt=n,fo.transition=i}}function ea(){return Ro().memoizedState}function ta(e,t,n){var i=tc(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e)?ra(t,n):null!==(n=Ts(e,t,n,i))&&(nc(n,e,i,ec()),sa(n,t,i))}function na(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))ra(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,Rs(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(e){}null!==(n=Ts(e,t,r,i))&&(nc(n,e,i,r=ec()),sa(n,t,i))}}function ia(e){var t=e.alternate;return e===go||null!==t&&t===go}function ra(e,t){vo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!=(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Es,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},aa={readContext:Es,useCallback:function(e,t){return Mo().memoizedState=[e,void 0===t?null:t],e},useContext:Es,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Vo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Mo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Mo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ta.bind(null,go,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Mo().memoizedState=e},useState:No,useDebugValue:Ko,useDeferredValue:function(e){return Mo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Zo.bind(null,e[1]),Mo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=go,r=Mo();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Cl)throw Error(s(349));0!=(30&po)||jo(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Uo(Lo.bind(null,i,o,e),[e]),i.flags|=2048,Do(9,Fo.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Mo(),t=Cl.identifierPrefix;if(rs){var n=Gr;t=":"+t+"R"+(n=(Qr&~(1<<32-ot(Qr)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Es,useCallback:Qo,useContext:Es,useEffect:Wo,useImperativeHandle:qo,useInsertionEffect:$o,useLayoutEffect:Yo,useMemo:Go,useReducer:Co,useRef:Bo,useState:function(){return Co(To)},useDebugValue:Ko,useDeferredValue:function(e){return Jo(Ro(),mo.memoizedState,e)},useTransition:function(){return[Co(To)[0],Ro().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Es,useCallback:Qo,useContext:Es,useEffect:Wo,useImperativeHandle:qo,useInsertionEffect:$o,useLayoutEffect:Yo,useMemo:Go,useReducer:Oo,useRef:Bo,useState:function(){return Oo(To)},useDebugValue:Ko,useDeferredValue:function(e){var t=Ro();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Oo(To)[0],Ro().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:ea,unstable_isNewReconciler:!1};function ha(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(e){r="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:r,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fa(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var da="function"==typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,$l=i),fa(0,t)},n}function ga(e,t,n){(n=js(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){fa(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){fa(0,t),"function"!=typeof i&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new da;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function _a(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,i,r){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var va=b.ReactCurrentOwner,ba=!1;function xa(e,t,n,i){t.child=null===e?Gs(t,null,n,i):Qs(t,e.child,n,i)}function wa(e,t,n,i,r){n=n.render;var s=t.ref;return Ss(t,r),i=So(e,t,n,i,s,r),n=Eo(),null===e||ba?(rs&&n&&es(t),t.flags|=1,xa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wa(e,t,r))}function ka(e,t,n,i,r){if(null===e){var s=n.type;return"function"!=typeof s||Ac(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,i,r))}if(s=e.child,0==(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Wa(e,t,r)}return t.flags|=1,(e=jc(s,i)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(ba=!1,t.pendingProps=i=s,0==(e.lanes&r))return t.lanes=e.lanes,Wa(e,t,r);0!=(131072&e.flags)&&(ba=!0)}}return Ra(e,t,n,i,r)}function Ea(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(jl,Al),Al|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mr(jl,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Mr(jl,Al),Al|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Mr(jl,Al),Al|=i;return xa(e,t,r,n),t.child}function Ma(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,i,r){var s=Ar(n)?Or:Tr.current;return s=Pr(t,s),Ss(t,r),n=So(e,t,n,i,s,r),i=Eo(),null===e||ba?(rs&&i&&es(t),t.flags|=1,xa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wa(e,t,r))}function Ta(e,t,n,i,r){if(Ar(n)){var s=!0;Ir(t)}else s=!1;if(Ss(t,r),null===t.stateNode)Ua(e,t),Us(t,n,i),$s(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?Es(c):Pr(t,c=Ar(n)?Or:Tr.current);var h=n.getDerivedStateFromProps,u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate;u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==i||l!==c)&&Ws(t,o,i,c),Os=!1;var f=t.memoizedState;o.state=f,zs(t,i,o,r),l=t.memoizedState,a!==i||f!==l||Cr.current||Os?("function"==typeof h&&(Bs(t,n,h,i),l=t.memoizedState),(a=Os||Hs(t,n,a,i,f,l,c))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,As(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ms(t.type,a),o.props=c,u=t.pendingProps,f=o.context,l="object"==typeof(l=n.contextType)&&null!==l?Es(l):Pr(t,l=Ar(n)?Or:Tr.current);var d=n.getDerivedStateFromProps;(h="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==u||f!==l)&&Ws(t,o,i,l),Os=!1,f=t.memoizedState,o.state=f,zs(t,i,o,r);var p=t.memoizedState;a!==u||f!==p||Cr.current||Os?("function"==typeof d&&(Bs(t,n,d,i),p=t.memoizedState),(c=Os||Hs(t,n,c,i,f,p,l)||!1)?(h||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return Ca(e,t,n,i,s,r)}function Ca(e,t,n,i,r,s){Ma(e,t);var o=0!=(128&t.flags);if(!i&&!o)return r&&zr(t,n,!1),Wa(e,t,s);i=t.stateNode,va.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Qs(t,e.child,null,s),t.child=Qs(t,null,a,s)):xa(e,t,a,s),t.memoizedState=i.state,r&&zr(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Fr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fr(0,t.context,!1),io(e,t.containerInfo)}function Pa(e,t,n,i,r){return ds(),ps(r),t.flags|=256,xa(e,t,n,i),t.child}var Aa,ja,Fa,La={dehydrated:null,treeContext:null,retryLane:0};function Ia(e){return{baseLanes:e,cachePool:null,transitions:null}}function za(e,t,n){var i,r=t.pendingProps,o=ao.current,a=!1,l=0!=(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!=(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Mr(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0==(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Ic(l,r,0,null),e=Lc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ia(n),t.memoizedState=La,e):Na(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Da(e,t,a,i=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Ic({mode:"visible",children:i.children},r,0,null),(o=Lc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!=(1&t.mode)&&Qs(t,e.child,null,a),t.child.memoizedState=Ia(a),t.memoizedState=La,o);if(0==(1&t.mode))return Da(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Da(e,t,a,i=ua(o=Error(s(419)),i,void 0))}if(l=0!=(a&e.childLanes),ba||l){if(null!==(i=Cl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!=(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Cs(e,r),nc(i,e,r,-1))}return gc(),Da(e,t,a,i=ua(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Xr[qr++]=Qr,Xr[qr++]=Gr,Xr[qr++]=Kr,Qr=e.id,Gr=e.overflow,Kr=t),(t=Na(t,i.children)).flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0==(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=jc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=jc(i,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Ia(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,r}return e=(a=e.child).sibling,r=jc(a,{mode:"visible",children:r.children}),0==(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Na(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Da(e,t,n,i){return null!==i&&ps(i),Qs(t,e.child,null,n),(e=Na(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ks(e.return,t,n)}function Va(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ha(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(xa(e,t,i.children,n),0!=(2&(i=ao.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Mr(ao,i),0==(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Va(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===lo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ua(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xa(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Ar(t.type)&&jr(),Ya(t),null;case 3:return i=t.stateNode,ro(),Er(Cr),Er(Tr),ho(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ya(t),null;case 5:oo(t);var r=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)ja(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Ya(t),null}if(e=no(Zs.current),us(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[fr]=t,i[dr]=o,e=0!=(1&t.mode),n){case"dialog":Di("cancel",i),Di("close",i);break;case"iframe":case"object":case"embed":Di("load",i);break;case"video":case"audio":for(r=0;r<Li.length;r++)Di(Li[r],i);break;case"source":Di("error",i);break;case"img":case"image":case"link":Di("error",i),Di("load",i);break;case"details":Di("toggle",i);break;case"input":Q(i,o),Di("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Di("invalid",i);break;case"textarea":re(i,o),Di("invalid",i)}for(var l in ye(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Di("scroll",i)}switch(n){case"input":Y(i),Z(i,o,!0);break;case"textarea":Y(i),oe(i);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[fr]=t,e[dr]=i,Aa(e,t),t.stateNode=e;e:{switch(l=ve(n,i),n){case"dialog":Di("cancel",e),Di("close",e),r=i;break;case"iframe":case"object":case"embed":Di("load",e),r=i;break;case"video":case"audio":for(r=0;r<Li.length;r++)Di(Li[r],e);r=i;break;case"source":Di("error",e),r=i;break;case"img":case"image":case"link":Di("error",e),Di("load",e),r=i;break;case"details":Di("toggle",e),r=i;break;case"input":Q(e,i),r=K(e,i),Di("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=z({},i,{value:void 0}),Di("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Di("invalid",e)}for(o in ye(n,r),c=r)if(c.hasOwnProperty(o)){var h=c[o];"style"===o?me(e,h):"dangerouslySetInnerHTML"===o?null!=(h=h?h.__html:void 0)&&ue(e,h):"children"===o?"string"==typeof h?("textarea"!==n||""!==h)&&fe(e,h):"number"==typeof h&&fe(e,""+h):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=h&&"onScroll"===o&&Di("scroll",e):null!=h&&v(e,o,h,l))}switch(n){case"input":Y(e),Z(e,i,!1);break;case"textarea":Y(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Fa(0,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),us(t)){if(i=t.stateNode,n=t.memoizedProps,i[fr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[fr]=t,t.stateNode=i}return Ya(t),null;case 13:if(Er(ao),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!=(1&t.mode)&&0==(128&t.flags))fs(),ds(),t.flags|=98560,o=!1;else if(o=us(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[fr]=t}else ds(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((i=null!==i)!=(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ao.current)?0===Fl&&(Fl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return ro(),null===e&&Hi(t.stateNode.containerInfo),Ya(t),null;case 10:return ws(t.type._context),Ya(t),null;case 19:if(Er(ao),null===(o=t.memoizedState))return Ya(t),null;if(i=0!=(128&t.flags),null===(l=o.rendering))if(i)$a(o,!1);else{if(0!==Fl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,$a(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mr(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Ge()>Hl&&(t.flags|=128,i=!0,$a(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=lo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$a(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Ya(t),null}else 2*Ge()-o.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,i=!0,$a(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ge(),t.sibling=null,n=ao.current,Mr(ao,i?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return uc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!=(1&t.mode)?0!=(1073741824&Al)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function qa(e,t){switch(ts(t),t.tag){case 1:return Ar(t.type)&&jr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ro(),Er(Cr),Er(Tr),ho(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Er(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ds()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er(ao),null;case 4:return ro(),null;case 10:return ws(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ja=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":r=K(e,r),i=K(e,i),o=[];break;case"select":r=z({},r,{value:void 0}),i=z({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!=typeof r.onClick&&"function"==typeof i.onClick&&(e.onclick=Zi)}for(h in ye(n,i),n=null,r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&null!=r[h])if("style"===h){var l=r[h];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(a.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var c=i[h];if(l=null!=r?r[h]:void 0,i.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(a.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Di("scroll",e),o||l===c||(o=[])):(o=o||[]).push(h,c))}n&&(o=o||[]).push("style",n);var h=o;(t.updateQueue=h)&&(t.flags|=4)}},Fa=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ka=!1,Qa=!1,Ga="function"==typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Sc(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){Sc(e,t,n)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[fr],delete t[dr],delete t[gr],delete t[mr],delete t[_r]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,ul=!1;function fl(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(e){}switch(n.tag){case 5:Qa||Za(n,t);case 6:var i=hl,r=ul;hl=null,fl(e,t,n),ul=r,null!==(hl=i)&&(ul?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(ul?(e=hl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ht(e)):lr(hl,n.stateNode));break;case 4:i=hl,r=ul,hl=n.stateNode.containerInfo,ul=!0,fl(e,t,n),hl=i,ul=r;break;case 0:case 11:case 14:case 15:if(!Qa&&null!==(i=n.updateQueue)&&null!==(i=i.lastEffect)){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!=(2&s)||0!=(4&s))&&el(n,t,o),r=r.next}while(r!==i)}fl(e,t,n);break;case 1:if(!Qa&&(Za(n,t),"function"==typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(e){Sc(n,t,e)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Qa=(i=Qa)||null!==n.memoizedState,fl(e,t,n),Qa=i):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ga),t.forEach((function(t){var i=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,ul=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===hl)throw Error(s(160));dl(o,a,r),hl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(e){Sc(r,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),_l(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(t){Sc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){Sc(e,e.return,t)}}break;case 1:gl(t,e),_l(e),512&i&&null!==n&&Za(n,n.return);break;case 5:if(gl(t,e),_l(e),512&i&&null!==n&&Za(n,n.return),32&e.flags){var r=e.stateNode;try{fe(r,"")}catch(t){Sc(e,e.return,t)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&G(r,o),ve(l,a);var h=ve(l,o);for(a=0;a<c.length;a+=2){var u=c[a],f=c[a+1];"style"===u?me(r,f):"dangerouslySetInnerHTML"===u?ue(r,f):"children"===u?fe(r,f):v(r,u,f,h)}switch(l){case"input":J(r,o);break;case"textarea":se(r,o);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[dr]=o}catch(t){Sc(e,e.return,t)}}break;case 6:if(gl(t,e),_l(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(t){Sc(e,e.return,t)}}break;case 3:if(gl(t,e),_l(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(t){Sc(e,e.return,t)}break;case 4:default:gl(t,e),_l(e);break;case 13:gl(t,e),_l(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Vl=Ge())),4&i&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(h=Qa)||u,gl(t,e),Qa=h):gl(t,e),_l(e),8192&i){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!u&&0!=(1&e.mode))for(Ja=e,u=e.child;null!==u;){for(f=Ja=u;null!==Ja;){switch(p=(d=Ja).child,d.tag){case 0:case 11:case 14:case 15:nl(4,d,d.return);break;case 1:Za(d,d.return);var g=d.stateNode;if("function"==typeof g.componentWillUnmount){i=d,n=d.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){Sc(i,n,e)}}break;case 5:Za(d,d.return);break;case 22:if(null!==d.memoizedState){xl(f);continue}}null!==p?(p.return=d,Ja=p):xl(f)}u=u.sibling}e:for(u=null,f=e;;){if(5===f.tag){if(null===u){u=f;try{r=f.stateNode,h?"function"==typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,a=null!=(c=f.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(t){Sc(e,e.return,t)}}}else if(6===f.tag){if(null===u)try{f.stateNode.nodeValue=h?"":f.memoizedProps}catch(t){Sc(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gl(t,e),_l(e),4&i&&pl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(fe(r,""),i.flags&=-33),cl(e,al(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(t){Sc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ja=e,vl(e,t,n)}function vl(e,t,n){for(var i=0!=(1&e.mode);null!==Ja;){var r=Ja,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ka;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ka;var c=Qa;if(Ka=o,(Qa=l)&&!c)for(Ja=r;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?wl(r):null!==l?(l.return=o,Ja=l):wl(r);for(;null!==s;)Ja=s,vl(s,t,n),s=s.sibling;Ja=r,Ka=a,Qa=c}bl(e)}else 0!=(8772&r.subtreeFlags)&&null!==s?(s.return=r,Ja=s):bl(e)}}function bl(e){for(;null!==Ja;){var t=Ja;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ns(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ns(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var u=h.memoizedState;if(null!==u){var f=u.dehydrated;null!==f&&Ht(f)}}}break;default:throw Error(s(163))}Qa||512&t.flags&&rl(t)}catch(e){Sc(t,t.return,e)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(e){Sc(t,n,e)}break;case 1:var i=t.stateNode;if("function"==typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(e){Sc(t,r,e)}}var s=t.return;try{rl(t)}catch(e){Sc(t,s,e)}break;case 5:var o=t.return;try{rl(t)}catch(e){Sc(t,o,e)}}}catch(e){Sc(t,t.return,e)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var kl,Sl=Math.ceil,El=b.ReactCurrentDispatcher,Ml=b.ReactCurrentOwner,Rl=b.ReactCurrentBatchConfig,Tl=0,Cl=null,Ol=null,Pl=0,Al=0,jl=Sr(0),Fl=0,Ll=null,Il=0,zl=0,Nl=0,Dl=null,Bl=null,Vl=0,Hl=1/0,Ul=null,Wl=!1,$l=null,Yl=null,Xl=!1,ql=null,Kl=0,Ql=0,Gl=null,Jl=-1,Zl=0;function ec(){return 0!=(6&Tl)?Ge():-1!==Jl?Jl:Jl=Ge()}function tc(e){return 0==(1&e.mode)?1:0!=(2&Tl)&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,i){if(50<Ql)throw Ql=0,Gl=null,Error(s(185));_t(e,n,i),0!=(2&Tl)&&e===Cl||(e===Cl&&(0==(2&Tl)&&(zl|=n),4===Fl&&ac(e,Pl)),ic(e,i),1===n&&0===Tl&&0==(1&t.mode)&&(Hl=Ge()+500,Dr&&Hr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!=(a&n)&&0==(a&i)||(r[o]=dt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=ft(e,e===Cl?Pl:0);if(0===i)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Dr=!0,Vr(e)}(lc.bind(null,e)):Vr(lc.bind(null,e)),or((function(){0==(6&Tl)&&Hr()})),n=null;else{switch(bt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,Zl=0,0!=(6&Tl))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=ft(e,e===Cl?Pl:0);if(0===i)return null;if(0!=(30&i)||0!=(i&e.expiredLanes)||t)t=mc(e,i);else{t=i;var r=Tl;Tl|=2;var o=pc();for(Cl===e&&Pl===t||(Ul=null,Hl=Ge()+500,fc(e,t));;)try{yc();break}catch(t){dc(e,t)}xs(),El.current=o,Tl=r,null!==Ol?t=0:(Cl=null,Pl=0,t=Fl)}if(0!==t){if(2===t&&0!==(r=pt(e))&&(i=r,t=sc(e,r)),1===t)throw n=Ll,fc(e,0),ac(e,i),ic(e,Ge()),n;if(6===t)ac(e,i);else{if(r=e.current.alternate,0==(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,i))&&0!==(o=pt(e))&&(i=o,t=sc(e,o)),1===t))throw n=Ll,fc(e,0),ac(e,i),ic(e,Ge()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Bl,Ul);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=Vl+500-Ge())){if(0!==ft(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(xc.bind(null,e,Bl,Ul),t);break}xc(e,Bl,Ul);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Ge()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sl(i/1960))-i)){e.timeoutHandle=ir(xc.bind(null,e,Bl,Ul),i);break}xc(e,Bl,Ul);break;default:throw Error(s(329))}}}return ic(e,Ge()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=Dl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function ac(e,t){for(t&=~Nl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!=(6&Tl))throw Error(s(327));wc();var t=ft(e,0);if(0==(1&t))return ic(e,Ge()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=Ll,fc(e,0),ac(e,t),ic(e,Ge()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,Ul),ic(e,Ge()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Hl=Ge()+500,Dr&&Hr())}}function hc(e){null!==ql&&0===ql.tag&&0==(6&Tl)&&wc();var t=Tl;Tl|=1;var n=Rl.transition,i=vt;try{if(Rl.transition=null,vt=1,e)return e()}finally{vt=i,Rl.transition=n,0==(6&(Tl=t))&&Hr()}}function uc(){Al=jl.current,Er(jl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ol)for(n=Ol.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&jr();break;case 3:ro(),Er(Cr),Er(Tr),ho();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:Er(ao);break;case 10:ws(i.type._context);break;case 22:case 23:uc()}n=n.return}if(Cl=e,Ol=e=jc(e.current,null),Pl=Al=t,Fl=0,Ll=null,Nl=zl=Il=0,Bl=Dl=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(i=(n=Ms[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ms=null}return e}function dc(e,t){for(;;){var n=Ol;try{if(xs(),uo.current=oa,yo){for(var i=go.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}yo=!1}if(po=0,_o=mo=go=null,vo=!1,bo=0,Ml.current=null,null===n||null===n.return){Fl=1,Ll=t,Ol=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var h=c,u=l,f=u.tag;if(0==(1&u.mode)&&(0===f||11===f||15===f)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=_a(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,h,t),c=h;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0==(1&t)){ma(o,h,t),gc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var _=_a(a);if(null!==_){0==(65536&_.flags)&&(_.flags|=256),ya(_,a,l,0,t),ps(ha(c,l));break e}}o=c=ha(c,l),4!==Fl&&(Fl=2),null===Dl?Dl=[o]:Dl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Is(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,v=o.stateNode;if(0==(128&o.flags)&&("function"==typeof y.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===Yl||!Yl.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,Is(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(e){t=e,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=oa,null===e?oa:e}function gc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Cl||0==(268435455&Il)&&0==(268435455&zl)||ac(Cl,Pl)}function mc(e,t){var n=Tl;Tl|=2;var i=pc();for(Cl===e&&Pl===t||(Ul=null,fc(e,t));;)try{_c();break}catch(t){dc(e,t)}if(xs(),Tl=n,El.current=i,null!==Ol)throw Error(s(261));return Cl=null,Pl=0,Fl}function _c(){for(;null!==Ol;)vc(Ol)}function yc(){for(;null!==Ol&&!Ke();)vc(Ol)}function vc(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?bc(e):Ol=t,Ml.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Xa(n,t,Al)))return void(Ol=n)}else{if(null!==(n=qa(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Fl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Fl&&(Fl=5)}function xc(e,t,n){var i=vt,r=Rl.transition;try{Rl.transition=null,vt=1,function(e,t,n,i){do{wc()}while(null!==ql);if(0!=(6&Tl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Cl&&(Ol=Cl=null,Pl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Xl||(Xl=!0,Cc(tt,(function(){return wc(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Rl.transition,Rl.transition=null;var a=vt;vt=1;var l=Tl;Tl|=4,Ml.current=null,function(e,t){if(er=Wt,di(e=fi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,l=-1,c=-1,h=0,u=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==r&&3!==f.nodeType||(l=a+r),f!==o||0!==i&&3!==f.nodeType||(c=a+i),3===f.nodeType&&(a+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++h===r&&(l=a),d===o&&++u===i&&(c=a),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var g=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,_=g.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),_);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(e){Sc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}g=tl,tl=!1}(e,n),ml(n,e),pi(tr),Wt=!!er,tr=er=null,e.current=n,yl(n,e,r),Qe(),Tl=l,vt=a,Rl.transition=o}else e.current=n;if(Xl&&(Xl=!1,ql=e,Kl=r),0===(o=e.pendingLanes)&&(Yl=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),ic(e,Ge()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i((r=t[n]).value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=$l,$l=null,e;0!=(1&Kl)&&0!==e.tag&&wc(),0!=(1&(o=e.pendingLanes))?e===Gl?Ql++:(Ql=0,Gl=e):Ql=0,Hr()}(e,t,n,i)}finally{Rl.transition=r,vt=i}return null}function wc(){if(null!==ql){var e=bt(Kl),t=Rl.transition,n=vt;try{if(Rl.transition=null,vt=16>e?16:e,null===ql)var i=!1;else{if(e=ql,ql=null,Kl=0,0!=(6&Tl))throw Error(s(331));var r=Tl;for(Tl|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!=(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var h=l[c];for(Ja=h;null!==Ja;){var u=Ja;switch(u.tag){case 0:case 11:case 15:nl(8,u,o)}var f=u.child;if(null!==f)f.return=u,Ja=f;else for(;null!==Ja;){var d=(u=Ja).sibling,p=u.return;if(sl(u),u===h){Ja=null;break}if(null!==d){d.return=p,Ja=d;break}Ja=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(null!==m)}}Ja=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!=(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ja=y;break e}Ja=o.return}}var v=e.current;for(Ja=v;null!==Ja;){var b=(a=Ja).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=v;null!==Ja;){if(0!=(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(e){Sc(l,l.return,e)}if(l===a){Ja=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break e}Ja=l.return}}if(Tl=r,Hr(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(e){}i=!0}return i}finally{vt=n,Rl.transition=t}}return!1}function kc(e,t,n){e=Fs(e,t=pa(0,t=ha(n,t),1),1),t=ec(),null!==e&&(_t(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Yl||!Yl.has(i))){t=Fs(t,e=ga(t,e=ha(n,e),1),1),e=ec(),null!==t&&(_t(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(Pl&n)===n&&(4===Fl||3===Fl&&(130023424&Pl)===Pl&&500>Ge()-Vl?fc(e,0):Nl|=n),ic(e,t)}function Mc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ht,0==(130023424&(ht<<=1))&&(ht=4194304)));var n=ec();null!==(e=Cs(e,t))&&(_t(e,t,n),ic(e,n))}function Rc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Mc(e,n)}function Cc(e,t){return Xe(e,t)}function Oc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,i){return new Oc(e,t,n,i)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,i,r,o){var a=2;if(i=e,"function"==typeof e)Ac(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case k:return Lc(n.children,r,o,t);case S:a=8,r|=8;break;case E:return(e=Pc(12,n,t,2|r)).elementType=E,e.lanes=o,e;case C:return(e=Pc(13,n,t,r)).elementType=C,e.lanes=o,e;case O:return(e=Pc(19,n,t,r)).elementType=O,e.lanes=o,e;case j:return Ic(n,r,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case M:a=10;break e;case R:a=9;break e;case T:a=11;break e;case P:a=14;break e;case A:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Lc(e,t,n,i){return(e=Pc(7,e,i,t)).lanes=n,e}function Ic(e,t,n,i){return(e=Pc(22,e,i,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Nc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,i,r,s,o,a,l){return e=new Dc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function Vc(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Hc(e){if(!e)return Rr;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ar(n))return Lr(e,n,t)}return t}function Uc(e,t,n,i,r,s,o,a,l){return(e=Bc(n,i,!0,e,0,s,0,a,l)).context=Hc(null),n=e.current,(s=js(i=ec(),r=tc(n))).callback=null!=t?t:null,Fs(n,s,r),e.current.lanes=r,_t(e,r,i),ic(e,i),e}function Wc(e,t,n,i){var r=t.current,s=ec(),o=tc(r);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Fs(r,t,o))&&(nc(e,r,o,s),Ls(e,r,o)),o}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Cr.current)ba=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),ds();break;case 5:so(t);break;case 1:Ar(t.type)&&Ir(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Mr(_s,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Mr(ao,1&ao.current),t.flags|=128,null):0!=(n&t.child.childLanes)?za(e,t,n):(Mr(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);Mr(ao,1&ao.current);break;case 19:if(i=0!=(n&t.childLanes),0!=(128&e.flags)){if(i)return Ha(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Mr(ao,ao.current),i)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!=(131072&e.flags)}else ba=!1,rs&&0!=(1048576&t.flags)&&Zr(t,Yr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ua(e,t),e=t.pendingProps;var r=Pr(t,Tr.current);Ss(t,n),r=So(null,t,i,e,r,n);var o=Eo();return t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ar(i)?(o=!0,Ir(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ps(t),r.updater=Vs,t.stateNode=r,r._reactInternals=t,$s(t,i,e,n),t=Ca(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),xa(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ua(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"==typeof e)return Ac(e)?1:0;if(null!=e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(i),e=ms(i,e),r){case 0:t=Ra(null,t,i,e,n);break e;case 1:t=Ta(null,t,i,e,n);break e;case 11:t=wa(null,t,i,e,n);break e;case 14:t=ka(null,t,i,ms(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ra(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ta(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 3:e:{if(Oa(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,As(e,t),zs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,i,n,r=ha(Error(s(423)),t));break e}if(i!==r){t=Pa(e,t,i,n,r=ha(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=Gs(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ds(),i===r){t=Wa(e,t,n);break e}xa(e,t,i,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Ma(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return za(e,t,n);case 4:return io(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Qs(t,null,i,n):xa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wa(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Mr(_s,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Cr.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=js(-1,n&-n)).tag=2;var h=o.updateQueue;if(null!==h){var u=(h=h.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),h.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}xa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ss(t,n),i=i(r=Es(r)),t.flags|=1,xa(e,t,i,n),t.child;case 14:return r=ms(i=t.type,t.pendingProps),ka(e,t,i,r=ms(i.type,r),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ms(i,r),Ua(e,t),t.tag=1,Ar(i)?(e=!0,Ir(t)):e=!1,Ss(t,n),Us(t,i,r),$s(t,i,r,n),Ca(null,t,i,!0,e,n);case 19:return Ha(e,t,n);case 22:return Ea(e,t,n)}throw Error(s(156,t.tag))};var qc="function"==typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eh(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof r){var a=r;r=function(){var e=$c(o);a.call(e)}}Wc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"==typeof i){var s=i;i=function(){var e=$c(o);s.call(e)}}var o=Uc(t,i,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pr]=o.current,Hi(8===e.nodeType?e.parentNode:e),hc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"==typeof i){var a=i;i=function(){var e=$c(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pr]=l.current,Hi(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,i)})),l}(n,t,e,r,i);return $c(o)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pr]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&0!==t&&t<jt[n].priority;n++);jt.splice(n,0,e),0===n&&zt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Ge()),0==(6&Tl)&&(Hl=Ge()+500,Hr()))}break;case 13:hc((function(){var t=Cs(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Xc(e,1)}},wt=function(e){if(13===e.tag){var t=Cs(e,134217728);null!==t&&nc(t,e,134217728,ec()),Xc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Cs(e,t);null!==n&&nc(n,e,t,ec()),Xc(e,t)}},St=function(){return vt},Et=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=xr(i);if(!r)throw Error(s(90));X(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ce=hc;var th={usingClientEntryPoint:!1,Events:[vr,br,xr,Me,Re,cc]},nh={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ih={bundleType:nh.bundleType,version:nh.version,rendererPackageName:nh.rendererPackageName,rendererConfig:nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:nh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{rt=rh.inject(ih),st=rh}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(s(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(s(299));var n=!1,i="",r=qc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eh(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=qc;if(null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,r,0,o,a),e[pr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eh(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eh(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eh(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},29:(e,t,n)=>{"use strict";var i=n(316);t.s=i.createRoot,i.hydrateRoot},316:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(967)},837:(e,t,n)=>{"use strict";var i=n(784),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,h=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(h=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:h,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},426:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=_.prototype;var b=v.prototype=new y;b.constructor=v,g(b,_.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var R=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,x(o)?(r="",null!=e&&(r=e.replace(R,"$&/")+"/"),C(o,t,r,"",(function(e){return e}))):null!=o&&(M(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(R,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var h=s+T(a=e[c],c);l+=C(a,t,r,h,o)}else if(h=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof h)for(e=h.call(e),c=0;!(a=e.next()).done;)l+=C(a=a.value,t,r,h=s+T(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var i=[],r=0;return C(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},j={transition:null},F={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:j,ReactCurrentOwner:k};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=_,t.Fragment=r,t.Profiler=o,t.PureComponent=v,t.StrictMode=s,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,i){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},784:(e,t,n)=>{"use strict";e.exports=n(426)},322:(e,t,n)=>{"use strict";e.exports=n(837)},738:(e,t,n)=>{var i;!function(e){!function(t){var i="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=s(e);function s(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===i.Reflect?i.Reflect=e:r=s(i.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,o={__proto__:[]}instanceof Array,a=!s&&!o,l={create:s?function(){return L(Object.create(null))}:o?function(){return L({__proto__:null})}:function(){return L({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),h="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,u=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,s)},t.prototype.entries=function(){return new n(this._keys,this._values,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function s(e,t){return t}function o(e,t){return[e,t]}}():Map,f=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new u}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()},e}():Set,d=new(h||"function"!=typeof WeakMap?function(){var e=l.create(),n=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=r(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=r(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return r(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=r(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var t;do{t="@@WeakMap@@"+o()}while(l.has(e,t));return e[t]=!0,t}function r(e,i){if(!t.call(e,n)){if(!i)return;Object.defineProperty(e,n,{value:l.create()})}return e[n]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function o(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",i=0;i<16;++i){var r=t[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}():WeakMap);function p(e,t,n){var i=d.get(e);if(k(i)){if(!n)return;i=new u,d.set(e,i)}var r=i.get(t);if(k(r)){if(!n)return;r=new u,i.set(t,r)}return r}function g(e,t,n){if(m(e,t,n))return!0;var i=F(t);return!S(i)&&g(e,i,n)}function m(e,t,n){var i=p(t,n,!1);return!k(i)&&!!i.has(e)}function _(e,t,n){if(m(e,t,n))return y(e,t,n);var i=F(t);return S(i)?void 0:_(e,i,n)}function y(e,t,n){var i=p(t,n,!1);if(!k(i))return i.get(e)}function v(e,t,n,i){p(n,i,!0).set(e,t)}function b(e,t){var n=x(e,t),i=F(e);if(null===i)return n;var r=b(i,t);if(r.length<=0)return n;if(n.length<=0)return r;for(var s=new f,o=[],a=0,l=n;a<l.length;a++){var c=l[a];s.has(c)||(s.add(c),o.push(c))}for(var h=0,u=r;h<u.length;h++)c=u[h],s.has(c)||(s.add(c),o.push(c));return o}function x(e,t){var n=[],i=p(e,t,!1);if(k(i))return n;for(var s=function(e){var t=P(e,r);if(!C(t))throw new TypeError;var n=t.call(e);if(!E(n))throw new TypeError;return n}(i.keys()),o=0;;){var a=A(s);if(!a)return n.length=o,n;var l=a.value;try{n[o]=l}catch(e){try{j(s)}finally{throw e}}o++}}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function k(e){return void 0===e}function S(e){return null===e}function E(e){return"object"==typeof e?null!==e:"function"==typeof e}function M(e,t){switch(w(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",r=P(e,i);if(void 0!==r){var s=r.call(e,n);if(E(s))throw new TypeError;return s}return function(e,t){if("string"===t){var n=e.toString;if(C(n)&&!E(r=n.call(e)))return r;if(C(i=e.valueOf)&&!E(r=i.call(e)))return r}else{var i;if(C(i=e.valueOf)&&!E(r=i.call(e)))return r;var r,s=e.toString;if(C(s)&&!E(r=s.call(e)))return r}throw new TypeError}(e,"default"===n?"number":n)}function R(e){var t=M(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function T(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function C(e){return"function"==typeof e}function O(e){return"function"==typeof e}function P(e,t){var n=e[t];if(null!=n){if(!C(n))throw new TypeError;return n}}function A(e){var t=e.next();return!t.done&&t}function j(e){var t=e.return;t&&t.call(e)}function F(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var r=i.constructor;return"function"!=typeof r||r===e?t:r}function L(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,i){if(k(n)){if(!T(e))throw new TypeError;if(!O(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!k(i)&&!S(i)){if(!O(i))throw new TypeError;t=i}}return t}(e,t)}if(!T(e))throw new TypeError;if(!E(t))throw new TypeError;if(!E(i)&&!k(i)&&!S(i))throw new TypeError;return S(i)&&(i=void 0),function(e,t,n,i){for(var r=e.length-1;r>=0;--r){var s=(0,e[r])(t,n,i);if(!k(s)&&!S(s)){if(!E(s))throw new TypeError;i=s}}return i}(e,t,n=R(n),i)})),e("metadata",(function(e,t){return function(n,i){if(!E(n))throw new TypeError;if(!k(i)&&!function(e){switch(w(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;v(e,t,n,i)}})),e("defineMetadata",(function(e,t,n,i){if(!E(n))throw new TypeError;return k(i)||(i=R(i)),v(e,t,n,i)})),e("hasMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return k(n)||(n=R(n)),g(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return k(n)||(n=R(n)),m(e,t,n)})),e("getMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return k(n)||(n=R(n)),_(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return k(n)||(n=R(n)),y(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!E(e))throw new TypeError;return k(t)||(t=R(t)),b(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!E(e))throw new TypeError;return k(t)||(t=R(t)),x(e,t)})),e("deleteMetadata",(function(e,t,n){if(!E(t))throw new TypeError;k(n)||(n=R(n));var i=p(t,n,!1);if(k(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var r=d.get(t);return r.delete(n),r.size>0||d.delete(t),!0}))}(r)}()}(i||(i={}))},475:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,h=e[c];if(0>s(l,n))c<r&&0>s(h,l)?(e[i]=h,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(h,n)))break e;e[i]=h,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],u=1,f=null,d=3,p=!1,g=!1,m=!1,_="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var t=i(h);null!==t;){if(null===t.callback)r(h);else{if(!(t.startTime<=e))break;r(h),t.sortIndex=t.expirationTime,n(c,t)}t=i(h)}}function x(e){if(m=!1,b(e),!g)if(null!==i(c))g=!0,j(w);else{var t=i(h);null!==t&&F(x,t.startTime-e)}}function w(e,n){g=!1,m&&(m=!1,y(M),M=-1),p=!0;var s=d;try{for(b(n),f=i(c);null!==f&&(!(f.expirationTime>n)||e&&!C());){var o=f.callback;if("function"==typeof o){f.callback=null,d=f.priorityLevel;var a=o(f.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?f.callback=a:f===i(c)&&r(c),b(n)}else r(c);f=i(c)}if(null!==f)var l=!0;else{var u=i(h);null!==u&&F(x,u.startTime-n),l=!1}return l}finally{f=null,d=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,M=-1,R=5,T=-1;function C(){return!(t.unstable_now()-T<R)}function O(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"==typeof v)k=function(){v(O)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=O,k=function(){A.postMessage(null)}}else k=function(){_(O,0)};function j(e){E=e,S||(S=!0,k())}function F(e,n){M=_((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,j(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(h,e),null===i(c)&&e===i(h)&&(m?(y(M),M=-1):m=!0,F(x,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,j(w))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},616:(e,t,n)=>{"use strict";e.exports=n(475)},452:(e,t,n)=>{"use strict";var i=n(784),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useState,o=i.useEffect,a=i.useLayoutEffect,l=i.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var h="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=s({inst:{value:n,getSnapshot:t}}),r=i[0].inst,h=i[1];return a((function(){r.value=n,r.getSnapshot=t,c(r)&&h({inst:r})}),[e,n,t]),o((function(){return c(r)&&h({inst:r}),e((function(){c(r)&&h({inst:r})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:h},100:(e,t,n)=>{"use strict";e.exports=n(452)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";n.r(i),n.d(i,{Program:()=>ql});var e,t={};n.r(t),n.d(t,{createStitches:()=>Pe,createTheme:()=>je,css:()=>Ie,defaultThemeMap:()=>B,globalCss:()=>Fe,keyframes:()=>Le,styled:()=>ze}),n(738),function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"}(e||(e={}));const r=e;var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s(e,t)};function o(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}function h(e){return!!e.useClass}function u(e){return!!e.useFactory}var f=function(){function e(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(e){var t,n=this,i=!1;return new Proxy({},this.createHandler((function(){return i||(t=e(n.wrap()),i=!0),t})))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach((function(n){t[n]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];t[0]=e();var r=Reflect[n];return r.apply(void 0,c(t))}})),t},e}();function d(e){return"string"==typeof e||"symbol"==typeof e}function p(e){return"object"==typeof e&&"token"in e&&"transform"in e}function g(e){return!!e.useToken}function m(e){return null!=e.useValue}const _=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(_),v=function(){this.scopedResolutions=new Map};var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(_),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(_);const w=function(){this.preResolution=new b,this.postResolution=new x};var k=new Map,S=function(){function e(e){this.parent=e,this._registry=new y,this.interceptors=new w,this.disposed=!1,this.disposables=new Set}return e.prototype.register=function(e,t,n){var i;if(void 0===n&&(n={lifecycle:r.Transient}),this.ensureNotDisposed(),i=function(e){return h(e)||m(e)||g(e)||u(e)}(t)?t:{useClass:t},g(i))for(var s=[e],o=i;null!=o;){var a=o.useToken;if(s.includes(a))throw new Error("Token registration cycle detected! "+c(s,[a]).join(" -> "));s.push(a);var l=this._registry.get(a);o=l&&g(l.provider)?l.provider:null}if((n.lifecycle===r.Singleton||n.lifecycle==r.ContainerScoped||n.lifecycle==r.ResolutionScoped)&&(m(i)||u(i)))throw new Error('Cannot use lifecycle "'+r[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:i,options:n}),this},e.prototype.registerType=function(e,t){return this.ensureNotDisposed(),d(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),d(e)){if(d(t))return this.register(e,{useToken:t},{lifecycle:r.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:r.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!d(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:r.Singleton})},e.prototype.resolve=function(e,t){void 0===t&&(t=new v),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&d(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var i=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(function(e){return"function"==typeof e||e instanceof f}(e))return i=this.construct(e,t),this.executePostResolutionInterceptor(e,i,"Single"),i;throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var n,i;if(this.interceptors.preResolution.has(e)){var r=[];try{for(var s=a(this.interceptors.preResolution.getAll(e)),o=s.next();!o.done;o=s.next()){var l=o.value;"Once"!=l.options.frequency&&r.push(l),l.callback(e,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,r)}},e.prototype.executePostResolutionInterceptor=function(e,t,n){var i,r;if(this.interceptors.postResolution.has(e)){var s=[];try{for(var o=a(this.interceptors.postResolution.getAll(e)),l=o.next();!l.done;l=o.next()){var c=l.value;"Once"!=c.options.frequency&&s.push(c),c.callback(e,t,n)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(e,s)}},e.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===r.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n,i=e.options.lifecycle===r.Singleton,s=e.options.lifecycle===r.ContainerScoped,o=i||s;return n=m(e.provider)?e.provider.useValue:g(e.provider)?o?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):h(e.provider)?o?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):u(e.provider)?e.provider.useFactory(this):this.construct(e.provider,t),e.options.lifecycle===r.ResolutionScoped&&t.scopedResolutions.set(e,n),n},e.prototype.resolveAll=function(e,t){var n=this;void 0===t&&(t=new v),this.ensureNotDisposed();var i=this.getAllRegistrations(e);if(!i&&d(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),i){var r=i.map((function(e){return n.resolveRegistration(e,t)}));return this.executePostResolutionInterceptor(e,r,"All"),r}var s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s},e.prototype.isRegistered=function(e,t){return void 0===t&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=a(this._registry.entries()),i=n.next();!i.done;i=n.next()){var r=l(i.value,2),s=r[0],o=r[1];this._registry.setAll(s,o.filter((function(e){return!m(e.provider)})).map((function(e){return e.instance=void 0,e})))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var t,n;this.ensureNotDisposed();var i=new e(this);try{for(var s=a(this._registry.entries()),o=s.next();!o.done;o=s.next()){var c=l(o.value,2),h=c[0],u=c[1];u.some((function(e){return e.options.lifecycle===r.ContainerScoped}))&&i._registry.setAll(h,u.map((function(e){return e.options.lifecycle===r.ContainerScoped?{provider:e.provider,options:e.options}:e})))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},e.prototype.beforeResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},e.prototype.afterResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},e.prototype.dispose=function(){return function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var e;return function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach((function(t){var n=t.dispose();n&&e.push(n)})),[4,Promise.all(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var n=this;if(e instanceof f)return e.createProxy((function(e){return n.resolve(e,t)}));var i,r=function(){var i=k.get(e);if(!i||0===i.length){if(0===e.length)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var r=i.map(n.resolveParams(t,e));return new(e.bind.apply(e,c([void 0],r)))}();return"function"!=typeof(i=r).dispose||i.dispose.length>0||this.disposables.add(r),r},e.prototype.resolveParams=function(e,t){var n=this;return function(i,r){var s,o,a,h;try{return"object"==typeof(h=i)&&"token"in h&&"multiple"in h?p(i)?i.multiple?(s=n.resolve(i.transform)).transform.apply(s,c([n.resolveAll(i.token)],i.transformArgs)):(o=n.resolve(i.transform)).transform.apply(o,c([n.resolve(i.token,e)],i.transformArgs)):i.multiple?n.resolveAll(i.token):n.resolve(i.token,e):p(i)?(a=n.resolve(i.transform,e)).transform.apply(a,c([n.resolve(i.token,e)],i.transformArgs)):n.resolve(i,e)}catch(e){throw new Error(function(e,t,n){var i,r,s=l(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1];return function(e,t,n){return void 0===n&&(n="    "),c([e],t.message.split("\n").map((function(e){return n+e}))).join("\n")}("Cannot inject the dependency "+(r=t,(null===(i=void 0===s?null:s)?"at position #"+r:'"'+i.split(",")[r].trim()+'" at position #'+r)+' of "')+e.name+'" constructor. Reason:',n)}(t,r,e))}}},e.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},e}(),E=new S;if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");let M=!1;new Promise((e=>e())).then((()=>M=!0)),"undefined"!=typeof doNothing&&doNothing();const R=!0===M;function T(e){const t=function(e,t={}){let n,i,r;const s=e=>{r&&clearTimeout(r),r=setTimeout((()=>{i(new Error(`The operation has timed out. timeoutValue  : ${e}`))}),e)};return e&&s(e),{startTimer:s,promise:new Promise(((e,r)=>{var s;s=e,n=R&&t.fixSyncResolve?e=>setTimeout((()=>s(e))):s,i=r})),resolver:n,reject:i}}();return setTimeout((()=>{t.resolver()}),e),t.promise}async function C(e,t,n){let i=!1;for(;!i;)try{t.forEach((t=>e.resolve(t))),i=!0}catch(e){await T(100)}await(null==n?void 0:n())}function O(e){return{useFactory:t=>new e(t)}}const P=Symbol.for("IStepRepo"),A=Symbol.for("ISelection"),j=Symbol.for("IViewModel");var F,L=n(784),I=n(316),z="colors",N="sizes",D="space",B={gap:D,gridGap:D,columnGap:D,gridColumnGap:D,rowGap:D,gridRowGap:D,inset:D,insetBlock:D,insetBlockEnd:D,insetBlockStart:D,insetInline:D,insetInlineEnd:D,insetInlineStart:D,margin:D,marginTop:D,marginRight:D,marginBottom:D,marginLeft:D,marginBlock:D,marginBlockEnd:D,marginBlockStart:D,marginInline:D,marginInlineEnd:D,marginInlineStart:D,padding:D,paddingTop:D,paddingRight:D,paddingBottom:D,paddingLeft:D,paddingBlock:D,paddingBlockEnd:D,paddingBlockStart:D,paddingInline:D,paddingInlineEnd:D,paddingInlineStart:D,top:D,right:D,bottom:D,left:D,scrollMargin:D,scrollMarginTop:D,scrollMarginRight:D,scrollMarginBottom:D,scrollMarginLeft:D,scrollMarginX:D,scrollMarginY:D,scrollMarginBlock:D,scrollMarginBlockEnd:D,scrollMarginBlockStart:D,scrollMarginInline:D,scrollMarginInlineEnd:D,scrollMarginInlineStart:D,scrollPadding:D,scrollPaddingTop:D,scrollPaddingRight:D,scrollPaddingBottom:D,scrollPaddingLeft:D,scrollPaddingX:D,scrollPaddingY:D,scrollPaddingBlock:D,scrollPaddingBlockEnd:D,scrollPaddingBlockStart:D,scrollPaddingInline:D,scrollPaddingInlineEnd:D,scrollPaddingInlineStart:D,fontSize:"fontSizes",background:z,backgroundColor:z,backgroundImage:z,borderImage:z,border:z,borderBlock:z,borderBlockEnd:z,borderBlockStart:z,borderBottom:z,borderBottomColor:z,borderColor:z,borderInline:z,borderInlineEnd:z,borderInlineStart:z,borderLeft:z,borderLeftColor:z,borderRight:z,borderRightColor:z,borderTop:z,borderTopColor:z,caretColor:z,color:z,columnRuleColor:z,fill:z,outline:z,outlineColor:z,stroke:z,textDecorationColor:z,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:N,minBlockSize:N,maxBlockSize:N,inlineSize:N,minInlineSize:N,maxInlineSize:N,width:N,minWidth:N,maxWidth:N,height:N,minHeight:N,maxHeight:N,flexBasis:N,gridTemplateColumns:N,gridTemplateRows:N,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},V=(e,t)=>"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t,H=()=>{const e=Object.create(null);return(t,n,...i)=>{const r=(e=>JSON.stringify(e,V))(t);return r in e?e[r]:e[r]=n(t,...i)}},U=Symbol.for("sxs.internal"),W=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),$=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:Y}=Object.prototype,X=e=>e.includes("-")?e:e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),q=/\s+(?![^()]*\))/,K=e=>t=>e(..."string"==typeof t?String(t).split(q):[t]),Q={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:K(((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e}))),marginInline:K(((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e}))),maxSize:K(((e,t)=>({maxBlockSize:e,maxInlineSize:t||e}))),minSize:K(((e,t)=>({minBlockSize:e,minInlineSize:t||e}))),paddingBlock:K(((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e}))),paddingInline:K(((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e})))},G=/([\d.]+)([^]*)/,J=(e,t)=>e.length?e.reduce(((e,n)=>(e.push(...t.map((e=>e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?`:is(${n})`:n):n+" "+e))),e)),[]):t,Z=(e,t)=>e in ee&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,n,i,r)=>n+("stretch"===i?`-moz-available${r};${X(e)}:${n}-webkit-fill-available`:`-moz-fit-content${r};${X(e)}:${n}fit-content`)+r)):String(t),ee={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},te=e=>e?e+"-":"",ne=(e,t,n)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((e,i,r,s,o)=>"$"==s==!!r?e:(i||"--"==s?"calc(":"")+"var(--"+("$"===s?te(t)+(o.includes("$")?"":te(n))+o.replace(/\$/g,"-"):o)+")"+(i||"--"==s?"*"+(i||"")+(r||"1")+")":""))),ie=/\s*,\s*(?![^()]*\))/,re=Object.prototype.toString,se=(e,t,n,i,r)=>{let s,o,a;const l=(e,t,n)=>{let c,h;const u=e=>{for(c in e){const p=64===c.charCodeAt(0),g=p&&Array.isArray(e[c])?e[c]:[e[c]];for(h of g){const e=/[A-Z]/.test(d=c)?d:d.replace(/-[^]/g,(e=>e[1].toUpperCase())),g="object"==typeof h&&h&&h.toString===re&&(!i.utils[e]||!t.length);if(e in i.utils&&!g){const t=i.utils[e];if(t!==o){o=t,u(t(h)),o=null;continue}}else if(e in Q){const t=Q[e];if(t!==a){a=t,u(t(h)),a=null;continue}}if(p&&(f=c.slice(1)in i.media?"@media "+i.media[c.slice(1)]:c,c=f.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((e,t,n,i,r,s)=>{const o=G.test(t),a=.0625*(o?-1:1),[l,c]=o?[i,t]:[t,i];return"("+("="===n[0]?"":">"===n[0]===o?"max-":"min-")+l+":"+("="!==n[0]&&1===n.length?c.replace(G,((e,t,i)=>Number(t)+a*(">"===n?1:-1)+i)):c)+(r?") and ("+(">"===r[0]?"min-":"max-")+l+":"+(1===r.length?s.replace(G,((e,t,n)=>Number(t)+a*(">"===r?-1:1)+n)):s):"")+")"}))),g){const e=p?n.concat(c):[...n],i=p?[...t]:J(t,c.split(ie));void 0!==s&&r(oe(...s)),s=void 0,l(h,i,e)}else void 0===s&&(s=[[],t,n]),c=p||36!==c.charCodeAt(0)?c:`--${te(i.prefix)}${c.slice(1).replace(/\$/g,"-")}`,h=g?h:"number"==typeof h?h&&e in ae?String(h)+"px":String(h):ne(Z(e,null==h?"":h),i.prefix,i.themeMap[e]),s[0].push(`${p?`${c} `:`${X(c)}:`}${h}`)}}var f,d};u(e),void 0!==s&&r(oe(...s)),s=void 0};l(e,t,n)},oe=(e,t,n)=>`${n.map((e=>`${e}{`)).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,ae={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},le=e=>String.fromCharCode(e+(e>25?39:97)),ce=e=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=le(t%52)+n;return le(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(e))>>>0),he=["themed","global","styled","onevar","resonevar","allvar","inline"],ue=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},fe=e=>{let t;const n=()=>{const{cssRules:e}=t.sheet;return[].map.call(e,((n,i)=>{const{cssText:r}=n;let s="";if(r.startsWith("--sxs"))return"";if(e[i-1]&&(s=e[i-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(const e in t.rules)if(t.rules[e].group===n)return`--sxs{--sxs:${[...t.rules[e].cache].join(" ")}}${r}`;return n.cssRules.length?`${s}${r}`:""}return r})).join("")},i=()=>{if(t){const{rules:e,sheet:n}=t;if(!n.deleteRule){for(;3===Object(Object(n.cssRules)[0]).type;)n.cssRules.splice(0,1);n.cssRules=[]}for(const t in e)delete e[t]}const r=Object(e).styleSheets||[];for(const e of r)if(ue(e)){for(let r=0,s=e.cssRules;s[r];++r){const o=Object(s[r]);if(1!==o.type)continue;const a=Object(s[r+1]);if(4!==a.type)continue;++r;const{cssText:l}=o;if(!l.startsWith("--sxs"))continue;const c=l.slice(14,-3).trim().split(/\s+/),h=he[c[0]];h&&(t||(t={sheet:e,reset:i,rules:{},toString:n}),t.rules[h]={group:a,index:r,cache:new Set(c)})}if(t)break}if(!t){const r=(e,t)=>({type:t,cssRules:[],insertRule(e,t){this.cssRules.splice(t,0,r(e,{import:3,undefined:1}[(e.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===e?`@media{${[].map.call(this.cssRules,(e=>e.cssText)).join("")}}`:e}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:r("","text/css"),rules:{},reset:i,toString:n}}const{sheet:s,rules:o}=t;for(let e=he.length-1;e>=0;--e){const t=he[e];if(!o[t]){const n=he[e+1],i=o[n]?o[n].index:s.cssRules.length;s.insertRule("@media{}",i),s.insertRule(`--sxs{--sxs:${e}}`,i),o[t]={group:s.cssRules[i+1],index:i,cache:new Set([e])}}de(o[t])}};return i(),t},de=e=>{const t=e.group;let n=t.cssRules.length;e.apply=e=>{try{t.insertRule(e,n),++n}catch(e){}}},pe=Symbol(),ge=H(),me=(e,t)=>ge(e,(()=>(...n)=>{let i={type:null,composers:new Set};for(const t of n)if(null!=t)if(t[U]){null==i.type&&(i.type=t[U].type);for(const e of t[U].composers)i.composers.add(e)}else t.constructor!==Object||t.$$typeof?null==i.type&&(i.type=t):i.composers.add(_e(t,e));return null==i.type&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),ye(e,i,t)})),_e=({variants:e,compoundVariants:t,defaultVariants:n,...i},r)=>{const s=`${te(r.prefix)}c-${ce(i)}`,o=[],a=[],l=Object.create(null),c=[];for(const e in n)l[e]=String(n[e]);if("object"==typeof e&&e)for(const t in e){h=l,u=t,Y.call(h,u)||(l[t]="undefined");const n=e[t];for(const e in n){const i={[t]:String(e)};"undefined"===String(e)&&c.push(t);const r=n[e],s=[i,r,!$(r)];o.push(s)}}var h,u;if("object"==typeof t&&t)for(const e of t){let{css:t,...n}=e;t="object"==typeof t&&t||{};for(const e in n)n[e]=String(n[e]);const i=[n,t,!$(t)];a.push(i)}return[s,i,o,a,l,c]},ye=(e,t,n)=>{const[i,r,s,o]=ve(t.composers),a="function"==typeof t.type||t.type.$$typeof?(e=>{function t(){for(let n=0;n<t[pe].length;n++){const[i,r]=t[pe][n];e.rules[i].apply(r)}return t[pe]=[],null}return t[pe]=[],t.rules={},he.forEach((e=>t.rules[e]={apply:n=>t[pe].push([e,n])})),t})(n):null,l=(a||n).rules,c=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,h=h=>{h="object"==typeof h&&h||xe;const{css:u,...f}=h,d={};for(const e in s)if(delete f[e],e in h){let t=h[e];"object"==typeof t&&t?d[e]={"@initial":s[e],...t}:(t=String(t),d[e]="undefined"!==t||o.has(e)?t:s[e])}else d[e]=s[e];const p=new Set([...r]);for(const[i,r,s,o]of t.composers){n.rules.styled.cache.has(i)||(n.rules.styled.cache.add(i),se(r,[`.${i}`],[],e,(e=>{l.styled.apply(e)})));const t=be(s,d,e.media),a=be(o,d,e.media,!0);for(const r of t)if(void 0!==r)for(const[t,s,o]of r){const r=`${i}-${ce(s)}-${t}`;p.add(r);const a=(o?n.rules.resonevar:n.rules.onevar).cache,c=o?l.resonevar:l.onevar;a.has(r)||(a.add(r),se(s,[`.${r}`],[],e,(e=>{c.apply(e)})))}for(const t of a)if(void 0!==t)for(const[r,s]of t){const t=`${i}-${ce(s)}-${r}`;p.add(t),n.rules.allvar.cache.has(t)||(n.rules.allvar.cache.add(t),se(s,[`.${t}`],[],e,(e=>{l.allvar.apply(e)})))}}if("object"==typeof u&&u){const t=`${i}-i${ce(u)}-css`;p.add(t),n.rules.inline.cache.has(t)||(n.rules.inline.cache.add(t),se(u,[`.${t}`],[],e,(e=>{l.inline.apply(e)})))}for(const e of String(h.className||"").trim().split(/\s+/))e&&p.add(e);const g=f.className=[...p].join(" ");return{type:t.type,className:g,selector:c,props:f,toString:()=>g,deferredInjector:a}};return W(h,{className:i,selector:c,[U]:t,toString:()=>(n.rules.styled.cache.has(i)||h(),i)})},ve=e=>{let t="";const n=[],i={},r=[];for(const[s,,,,o,a]of e){""===t&&(t=s),n.push(s),r.push(...a);for(const e in o){const t=o[e];(void 0===i[e]||"undefined"!==t||a.includes(t))&&(i[e]=t)}}return[t,n,i,new Set(r)]},be=(e,t,n,i)=>{const r=[];e:for(let[s,o,a]of e){if(a)continue;let e,l=0,c=!1;for(e in s){const i=s[e];let r=t[e];if(r!==i){if("object"!=typeof r||!r)continue e;{let e,t,s=0;for(const o in r){if(i===String(r[o])){if("@initial"!==o){const e=o.slice(1);(t=t||[]).push(e in n?n[e]:o.replace(/^@media ?/,"")),c=!0}l+=s,e=!0}++s}if(t&&t.length&&(o={["@media "+t.join(", ")]:o}),!e)continue e}}}(r[l]=r[l]||[]).push([i?"cv":`${e}-${s[e]}`,o,c])}return r},xe={},we=H(),ke=(e,t)=>we(e,(()=>(...n)=>{const i=()=>{for(let i of n){i="object"==typeof i&&i||{};let n=ce(i);if(!t.rules.global.cache.has(n)){if(t.rules.global.cache.add(n),"@import"in i){let e=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let n of[].concat(i["@import"]))n=n.includes('"')||n.includes("'")?n:`"${n}"`,t.sheet.insertRule(`@import ${n};`,e++);delete i["@import"]}se(i,[],[],e,(e=>{t.rules.global.apply(e)}))}}return""};return W(i,{toString:i})})),Se=H(),Ee=(e,t)=>Se(e,(()=>n=>{const i=`${te(e.prefix)}k-${ce(n)}`,r=()=>{if(!t.rules.global.cache.has(i)){t.rules.global.cache.add(i);const r=[];se(n,[],[],e,(e=>r.push(e)));const s=`@keyframes ${i}{${r.join("")}}`;t.rules.global.apply(s)}return i};return W(r,{get name(){return r()},toString:r})})),Me=class{constructor(e,t,n,i){this.token=null==e?"":String(e),this.value=null==t?"":String(t),this.scale=null==n?"":String(n),this.prefix=null==i?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+te(this.prefix)+te(this.scale)+this.token}toString(){return this.computedValue}},Re=H(),Te=(e,t)=>Re(e,(()=>(n,i)=>{i="object"==typeof n&&n||Object(i);const r=`.${n=(n="string"==typeof n?n:"")||`${te(e.prefix)}t-${ce(i)}`}`,s={},o=[];for(const t in i){s[t]={};for(const n in i[t]){const r=`--${te(e.prefix)}${t}-${n}`,a=ne(String(i[t][n]),e.prefix,t);s[t][n]=new Me(n,a,t,e.prefix),o.push(`${r}:${a}`)}}const a=()=>{if(o.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);const r=`${i===e.theme?":root,":""}.${n}{${o.join(";")}}`;t.rules.themed.apply(r)}return n};return{...s,get className(){return a()},selector:r,toString:a}})),Ce=H(),Oe=H(),Pe=e=>{const t=(e=>{let t=!1;const n=Ce(e,(e=>{t=!0;const n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",i="object"==typeof e.media&&e.media||{},r="object"==typeof e.root?e.root||null:globalThis.document||null,s="object"==typeof e.theme&&e.theme||{},o={prefix:n,media:i,theme:s,themeMap:"object"==typeof e.themeMap&&e.themeMap||{...B},utils:"object"==typeof e.utils&&e.utils||{}},a=fe(r),l={css:me(o,a),globalCss:ke(o,a),keyframes:Ee(o,a),createTheme:Te(o,a),reset(){a.reset(),l.theme.toString()},theme:{},sheet:a,config:o,prefix:n,getCssText:a.toString,toString:a.toString};return String(l.theme=l.createTheme(s)),l}));return t||n.reset(),n})(e);return t.styled=(({config:e,sheet:t})=>Oe(e,(()=>{const n=me(e,t);return(...e)=>{const t=n(...e),i=t[U].type,r=L.forwardRef(((e,n)=>{const r=e&&e.as||i,{props:s,deferredInjector:o}=t(e);return delete s.as,s.ref=n,o?L.createElement(L.Fragment,null,L.createElement(r,s),L.createElement(o,null)):L.createElement(r,s)}));return r.className=t.className,r.displayName=`Styled.${i.displayName||i.name||i}`,r.selector=t.selector,r.toString=()=>t.selector,r[U]=t[U],r}})))(t),t},Ae=()=>F||(F=Pe()),je=(...e)=>Ae().createTheme(...e),Fe=(...e)=>Ae().globalCss(...e),Le=(...e)=>Ae().keyframes(...e),Ie=(...e)=>Ae().css(...e),ze=(...e)=>Ae().styled(...e);const Ne=function(e){switch(e){case"react":return L;case"react-dom":return I;case"@stitches/react":return t;default:return void console.error("required-> ",e)}};class De{constructor(e,t=e.resolve(j)){this.viewModel=t}registerStep(e,t){e="string"==typeof e?function(e,t,n="default"){const i={};return new Function("module","exports","require",e)(i,{},t),i.exports[n]}(e,Ne):e;const n=this.viewModel.stepRepo[e.name]||(this.viewModel.stepRepo[e.name]={})&&this.viewModel.stepRepo[e.name];if(n[e.version])throw new Error(`Step ${e.name}@${e.version} is allready registered`);return n[e.version]=e,t&&(n.default=e),e}getStep(e,t){return this.viewModel.stepRepo[e][t]}resolveStepInput(e){return e.inputs instanceof Function?e.inputs():e.inputs}resolveStepOutput(e,t){return e.outputs instanceof Function?e.outputs(t):e.outputs}getDefaultSteps(){const e=this.viewModel.stepRepo;return Object.keys(e).map((t=>e[t].default)).filter((e=>null!=e))}isAutoStart(e,t){var n;return(null===(n=this.getStep(e,t))||void 0===n?void 0:n.autoStarts)||!1}async gatherMissingSteps(e){const t=e.filter((e=>{var t;return void 0===(null===(t=this.viewModel.stepRepo[e.stepName])||void 0===t?void 0:t[e.version])}));t.length&&(await this.viewModel.initOptions.onStepRequire(t)).forEach((e=>this.registerStep(e,!1)))}}const Be=Symbol.for("IState");class Ve{constructor(e,t=e.resolve(j),n=e.resolve(Be)){this.viewModel=t,this.state=n}stepsSelected(e){var t,n;this.viewModel.selecteds=e,null===(n=(t=this.viewModel.initOptions).onCopyPasteStatus)||void 0===n||n.call(t,{copy:e.length>0}),this.state.updateModified({state:!0})}stepsUnselected(e){const t=e.reduce(((e,t)=>(e.add(t),e)),new Set);this.viewModel.selecteds=this.viewModel.selecteds.filter((e=>!t.has(e)))}getSelecteds(){return this.viewModel.selecteds}}const He=Symbol.for("IFlow"),Ue=Symbol.for("IDrawArea"),We=Symbol.for("IHistory");class $e{constructor(e,t=e.resolve(j),n=e.resolve(Ue),i=e.resolve(A),r=e.resolve(P),s=e.resolve(We)){this.viewModel=t,this.drawArea=n,this.selection=i,this.stepRepo=r,this.history=s}addStep(e,t,n){var i;const r=this.stepRepo.getStep(e,n),s=this.stepRepo.resolveStepOutput(r,void 0),o=this.stepRepo.resolveStepInput(r),a=this.drawArea.addFlowStep(r.name,t,{inputs:o,outputs:s,style:r.style}),l=null===(i=r.defaultProps)||void 0===i?void 0:i.call(r);this.stepAdded(a,r,l),this.history.addHistory()}stepAdded(e,t,n={}){this.viewModel.steps[e]={propValues:n,options:t}}stepDeleted(e){const t=e.filter((e=>null!=this.viewModel.steps[e]));return t.forEach((e=>delete this.viewModel.steps[e])),this.selection.stepsUnselected(e),t}connectionAdded(e,t,n){this.viewModel.connections[e]={from:t,to:n}}connectionDeleted(e){const t=e.filter((e=>null!=this.viewModel.connections[e]));return t.forEach((e=>delete this.viewModel.connections[e])),t}}const Ye=Symbol.for("IProxifier"),Xe=Symbol.for("IDrawEventsHandler");function qe(e){return Object.keys(e)}class Ke{constructor(e,t=e.resolve(He),n=e.resolve(A),i=e.resolve(Ue),r=e.resolve(We),s=e.resolve(Be)){this.flow=t,this.selection=n,this.drawArea=i,this.history=r,this.state=s}handleEvents(){const e={onSelect:e=>{const t=e.filter((e=>"step"==e.type)).map((e=>e.ID));this.selection.stepsSelected(t)},onDelete:e=>{const t=e.filter((e=>"step"==e.type)).map((e=>e.ID)),n=e.filter((e=>"connection"==e.type)).map((e=>e.ID)),i=this.flow.stepDeleted(t),r=this.flow.connectionDeleted(n);i.length+r.length>0&&this.history.addHistory()},onConnect:e=>{this.flow.connectionAdded(e.ID,e.from,e.to),this.history.addHistory()},onMoveSteps:e=>{this.history.addHistory()},onZoom:()=>{this.state.updateModified({state:!0})},onPan:()=>{this.state.updateModified({state:!0})}};qe(e).forEach((t=>this.drawArea.subscribe(t,e[t]))),this.unhandler=()=>{qe(e).forEach((t=>this.drawArea.unsubscribe(t,e[t])))}}unhandleEvents(){var e;null===(e=this.unhandler)||void 0===e||e.call(this)}}const Qe=Symbol.for("IExport");class Ge{constructor(e,t=e.resolve(j),n=e.resolve(P),i=e.resolve(Ue),r=e.resolve(He),s=(()=>e.resolve(We)),o=(()=>e.resolve(A))){this.viewModel=t,this.stepRepo=n,this.drawArea=i,this.flow=r,this.history=s,this.selection=o}async importModel(e,t={}){await this._import("import",e),t.resetPanAndZoom&&this.drawArea.resetPanAndZoom()}async paste(e){await this._import("paste",e)}async _import(e,t){const n=(t=this.deproxify(t)).steps.map((e=>({stepName:e.name,version:e.version})));await this.stepRepo.gatherMissingSteps(n);const i=t.steps.map((e=>{const t=this.stepRepo.getStep(e.name,e.version),n=this.stepRepo.resolveStepOutput(t,e.props),i=this.stepRepo.resolveStepInput(t);return{ID:e.ID,surfacePoint:e.sp,name:e.name,options:{inputs:i,outputs:n,style:t.style}}})),r=t.connections.map((e=>({ID:e.ID,from:{step:e.f,output:e.f_o},to:{step:e.t,input:e.t_i}})));this.history().preventHistory((()=>{switch(e){case"paste":const e=this.drawArea.pasteObjects({steps:i,connections:r});t.steps.forEach((t=>t.ID=e[t.ID])),t.connections.forEach((t=>t.ID=e[t.ID]));break;case"import":this.drawArea.importObjects({steps:i,connections:r,maxID:t.maxID})}t.steps.forEach((e=>{const t=this.stepRepo.getStep(e.name,e.version);this.flow.stepAdded(e.ID,t,e.props)})),t.connections.forEach((e=>{this.flow.connectionAdded(e.ID,{step:e.f,output:e.f_o},{step:e.t,input:e.t_i})}))}))}exportModel(e){switch(e){default:case"both":return this.exportEditorModel();case"design":return this.exportDesignModel();case"runtime":return this.exportRuntimeModel()}}copy(){const e=this.selection().getSelecteds(),t=this.drawArea.copyObjects(e);return this.getCopyModel(t)}getCopyModel(e){return{steps:e.steps.map((e=>({ID:e.ID,sp:e.surfacePoint,name:e.name,version:this.viewModel.steps[e.ID].options.version,props:this.deproxify(this.viewModel.steps[e.ID].propValues)}))),connections:e.connections.map((e=>({f:e.from.step,f_o:e.from.output,t:e.to.step,t_i:e.to.input,ID:e.ID})))}}exportEditorModel(){return{runtime:this.exportRuntimeModel(),design:this.exportDesignModel()}}exportDesignModel(){const e=this.drawArea.exportObjects(),{connections:t,steps:n}=this.getCopyModel(e);return{steps:n,connections:t,maxID:e.maxID}}exportRuntimeModel(){const e=Object.keys(this.viewModel.steps).reduce(((e,t)=>{const n=this.viewModel.steps[t];return e[t]={N:n.options.name,V:n.options.version,P:{...this.deproxify(n.propValues)},I:{},O:{}},e}),{});Object.keys(this.viewModel.connections).forEach((t=>{const n=this.viewModel.connections[t],i=e[n.from.step],r=e[n.to.step],s=i.O[n.from.output]=i.O[n.from.output]||[],o=r.I[n.to.input]=r.I[n.to.input]||[],a=o.length;s.push({ID:n.to.step,inputName:n.to.input,connectionIndex:a}),o.push({ID:n.from.step,outputName:n.from.output})}));const t=Object.keys(e).filter((t=>this.stepRepo.isAutoStart(e[t].N,e[t].V))).map((e=>({ID:e,inputName:"autoStart",connectionIndex:0})));return{steps:e,startSteps:t}}deproxify(e){return JSON.parse(JSON.stringify(e))}}const Je=Symbol.for("IStepProp");class Ze{constructor(e,t=e.resolve(j),n=e.resolve(Ue),i=e.resolve(We)){this.viewModel=t,this.drawArea=n,this.history=i}setStepProp(e,t,n){e.forEach((e=>{const i=this.viewModel.steps[e];i.propValues=i.propValues||{},void 0!==n?i.propValues[t]=n:delete i.propValues[t]}));const i=e[0];i&&this.history.addHistory({consecutivePreventKey:`setProp_${i}_${t}`})}setStepOutputs(e,t){this.drawArea.setStepOutputs(e,t),this.history.addHistory()}}const et=Symbol.for("IExpression");function tt(e,t){switch(e){case"'":case'"':return[e,t+1];default:return[void 0,t]}}const nt=new Set(["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0"]),it=new Set(["1","2","3","4","5","6","7","8","9","0"]);class rt{validate(e){const t=e.length;let n,i="",r=!1;for(var s=0;s<t;s++){let t=e[s];if(r)if(n==t||"]"==t&&!n){if(!i)return!1;i="",r=!1,n&&s++}else{if(!n&&!it.has(t))return!1;i+=t}else switch(t){case".":if(!i&&0!=s&&"]"!=e[s-1])return!1;i="";break;case"[":if(!i&&0!=s&&"]"!=e[s-1])return!1;i="",[n,s]=tt(e[s+1],s),r=!0;break;default:if(!nt.has(t))return!1;if(0!=s&&"]"==e[s-1])return!1;i+=t}}if(r)return!1;const o=e[e.length-1];return!(!nt.has(o)&&"]"!=o)}}const st=Symbol.for("IComponentProvider");class ot{constructor(e,t=e.resolve(j)){this.viewModel=t}getComponentFor(e,t){const n=this.viewModel.componentMap;let i=n.get(e);return i||(i=t,n.set(e,i)),i}}class at{constructor(e,t=e.resolve(j),n=(()=>e.resolve(Qe)),i=(()=>e.resolve(Be))){this.viewModel=t,this.importExport=n,this.state=i,this.hm=new lt(t)}addHistory(e={}){const t=this.viewModel.history;if(t.preventHistory)return;const n=e.consecutivePreventKey&&e.consecutivePreventKey==t.consecutivePreventKey||!1;t.consecutivePreventKey=e.consecutivePreventKey,t.throttledID||(t.throttledID=setTimeout((()=>{t.throttledID=void 0,this.hm.addHistory(JSON.parse(JSON.stringify(this.importExport().exportModel("design"))),n),this.updateStatus(!0)})))}canUndo(){return this.hm.canUndo()}canRedo(){return this.hm.canRedo()}async undo(){return await this.do(this.hm.undo())}async redo(){return await this.do(this.hm.redo())}preventHistory(e){try{this.viewModel.history.preventHistory=!0,e()}finally{this.viewModel.history.preventHistory=!1}}getState(){return this.viewModel.history}setState(e){e?this.viewModel.history=e:this.viewModel.resetHistory(),this.updateStatus(!1)}async do(e){return!!e&&(this.viewModel.history.consecutivePreventKey=void 0,await this.importExport().importModel(e),this.updateStatus(!0),this.state().updateModified({model:!0}),!0)}updateStatus(e){var t,n;null===(n=(t=this.viewModel.initOptions).onHistoryStatus)||void 0===n||n.call(t,{redo:this.canRedo(),undo:this.canUndo()}),e&&this.state().updateModified({model:!0})}}class lt{constructor(e){this.vm=e}addHistory(e,t){const n=this.vm.history;0!=n.current||0!=n.earliest||0!=n.latest||void 0!==n.items[0]?t?n.items[n.current]=e:(n.items[n.current=n.latest=(n.current+1)%5]=e,n.earliest==n.current&&(n.earliest=(n.earliest+1)%5)):n.items[0]=e}canUndo(){return this.vm.history.current!=this.vm.history.earliest}canRedo(){return this.vm.history.current!=this.vm.history.latest}undo(){if(this.canUndo())return--this.vm.history.current<0&&(this.vm.history.current=4),this.vm.history.items[this.vm.history.current]}redo(){if(this.canRedo())return this.vm.history.current=(this.vm.history.current+1)%5,this.vm.history.items[this.vm.history.current]}}class ct{constructor(e,t=e.resolve(Ue),n=e.resolve(j),i=e.resolve(We)){this.drawArea=t,this.viewModel=n,this.history=i}getState(){return{draw:this.drawArea.getState(),history:this.history.getState()}}setState(e){this.history.preventHistory((()=>{this.drawArea.setState(null==e?void 0:e.draw),this.history.setState(null==e?void 0:e.history)}))}setReadonly(e){var t,n;this.viewModel.readonly=e,this.drawArea.setReadonly(e),null===(n=(t=this.viewModel.initOptions).onCopyPasteStatus)||void 0===n||n.call(t,{paste:this.getEditable()})}getEditable(){return!this.viewModel.readonly}updateModified(e){var t,n;this.viewModel.history.preventHistory||null===(n=(t=this.viewModel.initOptions).onModifiedStatus)||void 0===n||n.call(t,e)}}const ht={async register(e,t){await C(e,[Ye]);const n=e.resolve(Ye);e.registerInstance(j,function(e,t){const n=()=>({preventHistory:!1,items:t.markRaw([]),current:0,earliest:0,latest:0,consecutivePreventKey:void 0,throttledID:void 0}),i=t.proxify({stepRepo:{},steps:{},connections:{},selecteds:[],initOptions:e,componentMap:t.markRaw(new Map),history:n(),readonly:!1,resetHistory:()=>i.history=n()});return i}(t,n)),e.register(P,O(De)),e.register(A,O(Ve)),e.register(He,O($e)),e.register(Qe,O(Ge)),e.register(Je,O(Ze)),e.register(et,O(rt)),e.register(st,O(ot)),e.register(We,O(at)),e.register(Be,O(ct)),await C(e,[Ue]),e.registerInstance(Xe,new Ke(e)),e.resolve(Xe).handleEvents()},unregister(e){e.resolve(Xe).unhandleEvents()},postInit(e){var t,n;null===(t=e.onCopyPasteStatus)||void 0===t||t.call(e,{copy:!1,paste:!0}),null===(n=e.onHistoryStatus)||void 0===n||n.call(e,{undo:!1,redo:!1})}},ut=Symbol.for("IPresentation");var ft,dt,pt=Object.defineProperty,gt=(e,t)=>{for(var n in t)pt(e,n,{get:t[n],enumerable:!0})},mt=(e,t,n)=>(((e,t,n)=>{t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),_t={move:"M",line:"L",curve:"C",arc:"A",close:"Z"},yt={};gt(yt,{HALF_PI:()=>bt,NumArray:()=>Tt,TWO_PI:()=>vt,decomposeMatrix:()=>xt,getComputedMatrix:()=>kt,getPoT:()=>Mt,lerp:()=>St,mod:()=>Rt,setMatrix:()=>wt,toFixed:()=>Ot}),"undefined"!=typeof window?ft=window:void 0!==n.g?ft=n.g:"undefined"!=typeof self&&(ft=self);var vt=2*Math.PI,bt=.5*Math.PI;function xt(e,t,n,i,r,s){let o;return arguments.length<=1?(o=e.a,t=e.b,n=e.c,i=e.d,r=e.e,s=e.f):o=e,{translateX:r,translateY:s,scaleX:Math.sqrt(o*o+t*t),scaleY:Math.sqrt(n*n+i*i),rotation:180*Math.atan2(t,o)/Math.PI}}function wt(e){dt=e}function kt(e,t){t=t&&t.identity()||new dt;let n=e;const i=[];for(;n&&n._matrix;)i.push(n._matrix),n=n.parent;i.reverse();for(let e=0;e<i.length;e++){const n=i[e].elements;t.multiply(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9])}return t}function St(e,t,n){return n*(t-e)+e}var Et=[2,4,8,16,32,64,128,256,512,1024,2048,4096];function Mt(e){let t=0;for(;Et[t]&&Et[t]<e;)t++;return Et[t]}function Rt(e,t){for(;e<0;)e+=t;return e%t}var Tt=ft.Float32Array||Array,Ct=Math.floor;function Ot(e){return Ct(1e6*e)/1e6}var Pt={};gt(Pt,{Curve:()=>Vt,getAnchorsFromArcData:()=>Qt,getComponentOnCubicBezier:()=>Ht,getControlPoints:()=>qt,getCurveBoundingBox:()=>$t,getCurveFromPoints:()=>Xt,getCurveLength:()=>Wt,getReflection:()=>Kt,integrate:()=>Yt,subdivide:()=>Ut});var At=class{constructor(){mt(this,"_events",{}),mt(this,"_bound",!1)}addEventListener(e,t){return(this._events[e]||(this._events[e]=[])).push(t),this._bound=!0,this}on(){return this.addEventListener.apply(this,arguments)}bind(){return this.addEventListener.apply(this,arguments)}removeEventListener(e,t){if(!this._events)return this;if(!e&&!t)return this._events={},this._bound=!1,this;const n=e?[e]:Object.keys(this._events);for(let i=0,r=n.length;i<r;i++){e=n[i];let r=this._events[e];if(r){let n=[];if(t)for(let e=0,i=r.length;e<i;e++){let i=r[e];i=i.handler?i.handler:i,t!==i&&n.push(i)}this._events[e]=n}}return this}off(){return this.removeEventListener.apply(this,arguments)}unbind(){return this.removeEventListener.apply(this,arguments)}dispatchEvent(e){if(!this._events)return this;const t=Array.prototype.slice.call(arguments,1),n=this._events[e];if(n)for(let e=0;e<n.length;e++)n[e].call(this,...t);return this}trigger(){return this.dispatchEvent.apply(this,arguments)}listen(e,t,n){const i=this;function r(){n.apply(i,arguments)}return e&&(r.obj=e,r.name=t,r.handler=n,e.on(t,r)),i}ignore(e,t,n){return e.off(t,n),this}};mt(At,"Types",{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}),mt(At,"Methods",["addEventListener","on","removeEventListener","off","unbind","dispatchEvent","trigger","listen","ignore"]);var jt={x:{enumerable:!0,get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this._bound&&this.dispatchEvent(At.Types.change))}},y:{enumerable:!0,get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this._bound&&this.dispatchEvent(At.Types.change))}}},Ft=class extends At{constructor(e=0,t=0){super(),mt(this,"_x",0),mt(this,"_y",0);for(let e in jt)Object.defineProperty(this,e,jt[e]);this.x=e,this.y=t}static add(e,t){return new Ft(e.x+t.x,e.y+t.y)}static sub(e,t){return new Ft(e.x-t.x,e.y-t.y)}static subtract(e,t){return Ft.sub(e,t)}static ratioBetween(e,t){return(e.x*t.x+e.y*t.y)/(e.length()*t.length())}static angleBetween(e,t){if(arguments.length>=4){const e=arguments[0]-arguments[2],t=arguments[1]-arguments[3];return Math.atan2(t,e)}const n=e.x-t.x,i=e.y-t.y;return Math.atan2(i,n)}static distanceBetween(e,t){return Math.sqrt(Ft.distanceBetweenSquared(e,t))}static distanceBetweenSquared(e,t){const n=e.x-t.x,i=e.y-t.y;return n*n+i*i}set(e,t){return this.x=e,this.y=t,this}copy(e){return this.x=e.x,this.y=e.y,this}clear(){return this.x=0,this.y=0,this}clone(){return new Ft(this.x,this.y)}add(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x+=e,this.y+=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=t)),this}addSelf(e){return this.add.apply(this,arguments)}sub(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x-=e,this.y-=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=t)),this}subtract(){return this.sub.apply(this,arguments)}subSelf(e){return this.sub.apply(this,arguments)}subtractSelf(e){return this.sub.apply(this,arguments)}multiply(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x*=e,this.y*=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=t)),this}multiplySelf(e){return this.multiply.apply(this,arguments)}multiplyScalar(e){return this.multiply(e)}divide(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x/=e,this.y/=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=t),isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0)),this}divideSelf(e){return this.divide.apply(this,arguments)}divideScalar(e){return this.divide(e)}negate(){return this.multiply(-1)}dot(e){return this.x*e.x+this.y*e.y}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.divideScalar(this.length())}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}setLength(e){return this.normalize().multiplyScalar(e)}equals(e,t){return t=void 0===t?1e-4:t,this.distanceTo(e)<t}lerp(e,t){const n=(e.x-this.x)*t+this.x,i=(e.y-this.y)*t+this.y;return this.set(n,i)}isZero(e){return e=void 0===e?1e-4:e,this.length()<e}toString(){return this.x+", "+this.y}toObject(){return{x:this.x,y:this.y}}rotate(e){const t=this.x,n=this.y,i=Math.cos(e),r=Math.sin(e);return this.x=t*i-n*r,this.y=t*r+n*i,this}},Lt=Ft;mt(Lt,"zero",new Ft),mt(Lt,"left",new Ft(-1,0)),mt(Lt,"right",new Ft(1,0)),mt(Lt,"up",new Ft(0,-1)),mt(Lt,"down",new Ft(0,1));var It=class extends Lt{constructor(e=0,t=0,n=0,i=0,r=0,s=0,o=_t.move){super(e,t),mt(this,"controls",{left:new Lt,right:new Lt}),mt(this,"_command",_t.move),mt(this,"_relative",!0),mt(this,"_rx",0),mt(this,"_ry",0),mt(this,"_xAxisRotation",0),mt(this,"_largeArcFlag",0),mt(this,"_sweepFlag",1);for(let e in zt)Object.defineProperty(this,e,zt[e]);this.command=o,this.relative=!0;const a=It.makeBroadcast(this);this.controls.left.set(n,i).addEventListener(At.Types.change,a),this.controls.right.set(r,s).addEventListener(At.Types.change,a)}static makeBroadcast(e){return function(){e._bound&&e.dispatchEvent(At.Types.change)}}copy(e){return this.x=e.x,this.y=e.y,"string"==typeof e.command&&(this.command=e.command),e.controls&&(e.controls.left&&this.controls.left.copy(e.controls.left),e.controls.right&&this.controls.right.copy(e.controls.right)),"boolean"==typeof e.relative&&(this.relative=e.relative),"number"==typeof e.rx&&(this.rx=e.rx),"number"==typeof e.ry&&(this.ry=e.ry),"number"==typeof e.xAxisRotation&&(this.xAxisRotation=e.xAxisRotation),"number"==typeof e.largeArcFlag&&(this.largeArcFlag=e.largeArcFlag),"number"==typeof e.sweepFlag&&(this.sweepFlag=e.sweepFlag),this}clone(){return(new It).copy(this)}toObject(){return{x:this.x,y:this.y,command:this.command,relative:this.relative,controls:{left:this.controls.left.toObject(),right:this.controls.right.toObject()},rx:this.rx,ry:this.ry,xAxisRotation:this.xAxisRotation,largeArcFlag:this.largeArcFlag,sweepFlag:this.sweepFlag}}toString(){return JSON.stringify(this.toObject())}},zt={command:{enumerable:!0,get:function(){return this._command},set:function(e){this._command!==e&&(this._command=e,this._bound&&this.dispatchEvent(At.Types.change))}},relative:{enumerable:!0,get:function(){return this._relative},set:function(e){this._relative!==!!e&&(this._relative=!!e,this._bound&&this.dispatchEvent(At.Types.change))}},rx:{enumerable:!0,get:function(){return this._rx},set:function(e){this._rx!==e&&(this._rx=e,this._bound&&this.dispatchEvent(At.Types.change))}},ry:{enumerable:!0,get:function(){return this._ry},set:function(e){this._ry!==e&&(this._ry=e,this._bound&&this.dispatchEvent(At.Types.change))}},xAxisRotation:{enumerable:!0,get:function(){return this._xAxisRotation},set:function(e){this._xAxisRotation!==e&&(this._xAxisRotation=e,this._bound&&this.dispatchEvent(At.Types.change))}},largeArcFlag:{enumerable:!0,get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag!==e&&(this._largeArcFlag=e,this._bound&&this.dispatchEvent(At.Types.change))}},sweepFlag:{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag!==e&&(this._sweepFlag=e,this._bound&&this.dispatchEvent(At.Types.change))}}},Nt=0,Dt="two-",Bt=function(){return Nt++},Vt={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]};function Ht(e,t,n,i,r){const s=1-e;return s*s*s*t+3*s*s*e*n+3*s*e*e*i+e*e*e*r}function Ut(e,t,n,i,r,s,o,a,l){const c=(l=l||Vt.RecursionLimit)+1;if(Math.abs(e-o)<.001&&Math.abs(t-a)<.001)return[new It(o,a)];const h=[];for(let l=0;l<c;l++){const u=l/c,f=Ht(u,e,n,r,o),d=Ht(u,t,i,s,a);h.push(new It(f,d))}return h}function Wt(e,t,n,i,r,s,o,a,l){if(e===n&&t===i&&r===o&&s===a){const n=o-e,i=a-t;return Math.sqrt(n*n+i*i)}const c=9*(n-r)+3*(o-e),h=6*(e+r)-12*n,u=3*(n-e),f=9*(i-s)+3*(a-t),d=6*(t+s)-12*i,p=3*(i-t);return Yt((function(e){const t=(c*e+h)*e+u,n=(f*e+d)*e+p;return Math.sqrt(t*t+n*n)}),0,1,l||Vt.RecursionLimit)}function $t(e,t,n,i,r,s,o,a){const l=[],c=[[],[]];let h,u,f,d,p,g,m,_;for(let c=0;c<2;++c)if(0==c?(u=6*e-12*n+6*r,h=-3*e+9*n-9*r+3*o,f=3*n-3*e):(u=6*t-12*i+6*s,h=-3*t+9*i-9*s+3*a,f=3*i-3*t),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;d=-f/u,0<d&&d<1&&l.push(d)}else m=u*u-4*f*h,_=Math.sqrt(m),m<0||(p=(-u+_)/(2*h),0<p&&p<1&&l.push(p),g=(-u-_)/(2*h),0<g&&g<1&&l.push(g));let y,v=l.length,b=v;for(;v--;)d=l[v],y=1-d,c[0][v]=y*y*y*e+3*y*y*d*n+3*y*d*d*r+d*d*d*o,c[1][v]=y*y*y*t+3*y*y*d*i+3*y*d*d*s+d*d*d*a;return c[0][b]=e,c[1][b]=t,c[0][b+1]=o,c[1][b+1]=a,c[0].length=c[1].length=b+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}}function Yt(e,t,n,i){let r=Vt.abscissas[i-2],s=Vt.weights[i-2],o=.5*(n-t),a=o+t,l=0,c=i+1>>1,h=1&i?s[l++]*e(a):0;for(;l<c;){const t=o*r[l];h+=s[l++]*(e(a+t)+e(a-t))}return o*h}function Xt(e,t){const n=e.length,i=n-1;for(let r=0;r<n;r++){const s=e[r],o=t?Rt(r-1,n):Math.max(r-1,0),a=t?Rt(r+1,n):Math.min(r+1,i),l=s;qt(e[o],l,e[a]),l.command=0===r?_t.move:_t.curve}}function qt(e,t,n){const i=Lt.angleBetween(e,t),r=Lt.angleBetween(n,t);let s=Lt.distanceBetween(e,t),o=Lt.distanceBetween(n,t),a=(i+r)/2;return s<1e-4||o<1e-4?("boolean"!=typeof t.relative||t.relative||(t.controls.left.copy(t),t.controls.right.copy(t)),t):(s*=.33,o*=.33,r<i?a+=bt:a-=bt,t.controls.left.x=Math.cos(a)*s,t.controls.left.y=Math.sin(a)*s,a-=Math.PI,t.controls.right.x=Math.cos(a)*o,t.controls.right.y=Math.sin(a)*o,"boolean"!=typeof t.relative||t.relative||(t.controls.left.x+=t.x,t.controls.left.y+=t.y,t.controls.right.x+=t.x,t.controls.right.y+=t.y),t)}function Kt(e,t,n){return new Lt(2*e.x-(t.x+e.x)-(n?e.x:0),2*e.y-(t.y+e.y)-(n?e.y:0))}function Qt(e,t,n,i,r,s,o){const a=[];for(let e=0;e<12;e++){let t=(e+1)/12;o&&(t=1-t);const l=t*s+r,c=n*Math.cos(l),h=i*Math.sin(l),u=new It(c,h);u.command=_t.line,a.push(u)}}var Gt=ft.devicePixelRatio||1;function Jt(e){return Gt/function(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1}(e)}var Zt=Array.prototype.slice,en={isNaN:function(e){return"number"==typeof e&&e!==+e},isElement:function(e){return!(!e||1!==e.nodeType)},isObject:function(e){const t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){const t=Zt.call(arguments,1);for(let n=0;n<t.length;n++){const i=t[n];for(let t in i)e[t]=i[t]}return e},defaults:function(e){const t=Zt.call(arguments,1);for(let n=0;n<t.length;n++){const i=t[n];for(let t in i)void 0===e[t]&&(e[t]=i[t])}return e},each:function(e,t,n){const i=n||this,r=!function(e){if(null==e)return!1;const t=e.length;return"number"==typeof t&&t>=0&&t<4294967296}(e)&&Object.keys(e),s=(r||e).length;for(let n=0;n<s;n++){const s=r?r[n]:n;t.call(i,e[s],s,e)}return e},performance:ft.performance&&ft.performance.now?ft.performance:Date},tn=class extends At{constructor(){super(),mt(this,"_flagId",!1),mt(this,"_flagClassName",!1),mt(this,"_renderer",{}),mt(this,"_id",""),mt(this,"_className",""),mt(this,"classList",[]);for(let e in nn)Object.defineProperty(this,e,nn[e])}flagReset(){this._flagId=this._flagClassName=!1}},nn={renderer:{enumerable:!1,get:function(){return this._renderer}},id:{enumerable:!0,get:function(){return this._id},set:function(e){const t=this._id;e!==this._id&&(this._id=e,this._flagId=!0,this.parent&&(delete this.parent.children.ids[t],this.parent.children.ids[this._id]=this))}},className:{enumerable:!0,get:function(){return this._className},set:function(e){this._className!==e&&(this._flagClassName=!0,this.classList=e.split(/\s+?/),this._className=e)}}},rn=Math.cos,sn=Math.sin,on=Math.tan,an=[],ln=class extends At{constructor(e,t,n,i,r,s){super(),mt(this,"elements",new Tt(9)),mt(this,"manual",!1);let o=e;Array.isArray(o)||(o=Array.prototype.slice.call(arguments)),this.identity(),o.length>0&&this.set(o)}static Multiply(e,t,n){if(t.length<=3){const n=e;let i,r,s;const o=t[0]||0,a=t[1]||0,l=t[2]||0;return i=n[0]*o+n[1]*a+n[2]*l,r=n[3]*o+n[4]*a+n[5]*l,s=n[6]*o+n[7]*a+n[8]*l,{x:i,y:r,z:s}}const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],f=t[0],d=t[1],p=t[2],g=t[3],m=t[4],_=t[5],y=t[6],v=t[7],b=t[8];return(n=n||new Tt(9))[0]=i*f+r*g+s*y,n[1]=i*d+r*m+s*v,n[2]=i*p+r*_+s*b,n[3]=o*f+a*g+l*y,n[4]=o*d+a*m+l*v,n[5]=o*p+a*_+l*b,n[6]=c*f+h*g+u*y,n[7]=c*d+h*m+u*v,n[8]=c*p+h*_+u*b,n}set(e,t,n,i,r,s,o,a,l){if(void 0===t){const c=e;e=c[0],t=c[1],n=c[2],i=c[3],r=c[4],s=c[5],o=c[6],a=c[7],l=c[8]}return this.elements[0]=e,this.elements[1]=t,this.elements[2]=n,this.elements[3]=i,this.elements[4]=r,this.elements[5]=s,this.elements[6]=o,this.elements[7]=a,this.elements[8]=l,this.trigger(At.Types.change)}copy(e){return this.elements[0]=e.elements[0],this.elements[1]=e.elements[1],this.elements[2]=e.elements[2],this.elements[3]=e.elements[3],this.elements[4]=e.elements[4],this.elements[5]=e.elements[5],this.elements[6]=e.elements[6],this.elements[7]=e.elements[7],this.elements[8]=e.elements[8],this.manual=e.manual,this.trigger(At.Types.change)}identity(){return this.elements[0]=ln.Identity[0],this.elements[1]=ln.Identity[1],this.elements[2]=ln.Identity[2],this.elements[3]=ln.Identity[3],this.elements[4]=ln.Identity[4],this.elements[5]=ln.Identity[5],this.elements[6]=ln.Identity[6],this.elements[7]=ln.Identity[7],this.elements[8]=ln.Identity[8],this.trigger(At.Types.change)}multiply(e,t,n,i,r,s,o,a,l){if(void 0===t)return this.elements[0]*=e,this.elements[1]*=e,this.elements[2]*=e,this.elements[3]*=e,this.elements[4]*=e,this.elements[5]*=e,this.elements[6]*=e,this.elements[7]*=e,this.elements[8]*=e,this.trigger(At.Types.change);if(void 0===i)return e=e||0,t=t||0,n=n||0,{x:(r=this.elements)[0]*e+r[1]*t+r[2]*n,y:r[3]*e+r[4]*t+r[5]*n,z:r[6]*e+r[7]*t+r[8]*n};const c=this.elements,h=[e,t,n,i,r,s,o,a,l],u=c[0],f=c[1],d=c[2],p=c[3],g=c[4],m=c[5],_=c[6],y=c[7],v=c[8],b=h[0],x=h[1],w=h[2],k=h[3],S=h[4],E=h[5],M=h[6],R=h[7],T=h[8];return this.elements[0]=u*b+f*k+d*M,this.elements[1]=u*x+f*S+d*R,this.elements[2]=u*w+f*E+d*T,this.elements[3]=p*b+g*k+m*M,this.elements[4]=p*x+g*S+m*R,this.elements[5]=p*w+g*E+m*T,this.elements[6]=_*b+y*k+v*M,this.elements[7]=_*x+y*S+v*R,this.elements[8]=_*w+y*E+v*T,this.trigger(At.Types.change)}inverse(e){const t=this.elements;e=e||new ln;const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],u=h*o-a*c,f=-h*s+a*l,d=c*s-o*l;let p=n*u+i*f+r*d;return p?(p=1/p,e.elements[0]=u*p,e.elements[1]=(-h*i+r*c)*p,e.elements[2]=(a*i-r*o)*p,e.elements[3]=f*p,e.elements[4]=(h*n-r*l)*p,e.elements[5]=(-a*n+r*s)*p,e.elements[6]=d*p,e.elements[7]=(-c*n+i*l)*p,e.elements[8]=(o*n-i*s)*p,e):null}scale(e,t){return arguments.length<=1&&(t=e),this.multiply(e,0,0,0,t,0,0,0,1)}rotate(e){const t=rn(e),n=sn(e);return this.multiply(t,-n,0,n,t,0,0,0,1)}translate(e,t){return this.multiply(1,0,e,0,1,t,0,0,1)}skewX(e){const t=on(e);return this.multiply(1,t,0,0,1,0,0,0,1)}skewY(e){const t=on(e);return this.multiply(1,0,0,t,1,0,0,0,1)}toString(e){return an.length=0,this.toTransformArray(e,an),an.map(Ot).join(" ")}toTransformArray(e,t){const n=this.elements,i=!!t,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5];if(e){const e=n[6],h=n[7],u=n[8];return i?(t[0]=r,t[1]=a,t[2]=e,t[3]=s,t[4]=l,t[5]=h,t[6]=o,t[7]=c,void(t[8]=u)):[r,a,e,s,l,h,o,c,u]}return i?(t[0]=r,t[1]=a,t[2]=s,t[3]=l,t[4]=o,void(t[5]=c)):[r,a,s,l,o,c]}toArray(e,t){const n=this.elements,i=!!t,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5];if(e){const e=n[6],h=n[7],u=n[8];return i?(t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c,t[6]=e,t[7]=h,void(t[8]=u)):[r,s,o,a,l,c,e,h,u]}return i?(t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=l,void(t[5]=c)):[r,s,o,a,l,c]}toObject(){return{elements:this.toArray(!0),manual:!!this.manual}}clone(){return(new ln).copy(this)}},cn=ln;mt(cn,"Identity",[1,0,0,0,1,0,0,0,1]),wt(cn);var hn=class extends tn{constructor(){super(),mt(this,"_flagMatrix",!0),mt(this,"_flagScale",!1),mt(this,"_matrix",null),mt(this,"_worldMatrix",null),mt(this,"_position",null),mt(this,"_rotation",0),mt(this,"_scale",1),mt(this,"_skewX",0),mt(this,"_skewY",0);for(let e in un)Object.defineProperty(this,e,un[e]);this._renderer.flagMatrix=fn.bind(this),this.isShape=!0,this.id=Dt+Bt(),this.matrix=new cn,this.worldMatrix=new cn,this.position=new Lt,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}get renderer(){return this._renderer}set renderer(e){this._renderer=e}get translation(){return un.position.get.apply(this,arguments)}set translation(e){un.position.set.apply(this,arguments)}addTo(e){return e.add(this),this}remove(){return this.parent?(this.parent.remove(this),this):this}clone(e){const t=new hn;return t.position.copy(this.position),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}_update(e){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.position.x,this.position.y),this._scale instanceof Lt?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),e&&this.parent&&this.parent._update&&this.parent._update(),this}flagReset(){return this._flagMatrix=this._flagScale=!1,super.flagReset.call(this),this}},un={position:{enumerable:!0,get:function(){return this._position},set:function(e){this._position&&this._position.unbind(At.Types.change,this._renderer.flagMatrix),this._position=e,this._position.bind(At.Types.change,this._renderer.flagMatrix),fn.call(this)}},rotation:{enumerable:!0,get:function(){return this._rotation},set:function(e){this._rotation=e,this._flagMatrix=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof Lt&&this._scale.unbind(At.Types.change,this._renderer.flagMatrix),this._scale=e,this._scale instanceof Lt&&this._scale.bind(At.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}},skewX:{enumerable:!0,get:function(){return this._skewX},set:function(e){this._skewX=e,this._flagMatrix=!0}},skewY:{enumerable:!0,get:function(){return this._skewY},set:function(e){this._skewY=e,this._flagMatrix=!0}},matrix:{enumerable:!0,get:function(){return this._matrix},set:function(e){this._matrix=e,this._flagMatrix=!0}},worldMatrix:{enumerable:!0,get:function(){return kt(this,this._worldMatrix),this._worldMatrix},set:function(e){this._worldMatrix=e}}};function fn(){this._flagMatrix=!0}var dn=class extends Array{constructor(){super(),mt(this,"_events",new At),arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&this.push.apply(this,arguments[0]):arguments.length>0&&this.push.apply(this,arguments)}get _bound(){return this._events._bound}set _bound(e){this._events._bound=e}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.on.apply(this,arguments)}bind(){return this._events.bind.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.off.apply(this,arguments)}unbind(){return this._events.unbind.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.trigger.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}pop(){const e=super.pop.apply(this,arguments);return this.trigger(At.Types.remove,[e]),e}shift(){const e=super.shift.apply(this,arguments);return this.trigger(At.Types.remove,[e]),e}push(){const e=super.push.apply(this,arguments);return this.trigger(At.Types.insert,arguments),e}unshift(){const e=super.unshift.apply(this,arguments);return this.trigger(At.Types.insert,arguments),e}splice(){const e=super.splice.apply(this,arguments);if(this.trigger(At.Types.remove,e),arguments.length>2){const e=this.slice(arguments[0],arguments[0]+arguments.length-2);this.trigger(At.Types.insert,e),this.trigger(At.Types.order)}return e}sort(){return super.sort.apply(this,arguments),this.trigger(At.Types.order),this}reverse(){return super.reverse.apply(this,arguments),this.trigger(At.Types.order),this}indexOf(){return super.indexOf.apply(this,arguments)}},pn=class extends dn{constructor(e){super(e=Array.isArray(e)?e:Array.prototype.slice.call(arguments)),mt(this,"ids",{}),this.attach(e),this.on(At.Types.insert,this.attach),this.on(At.Types.remove,this.detach)}attach(e){for(let t=0;t<e.length;t++){const n=e[t];n&&n.id&&(this.ids[n.id]=n)}return this}detach(e){for(let t=0;t<e.length;t++)delete this.ids[e[t].id];return this}},gn=Math.min,mn=Math.max,_n=class extends hn{constructor(e){super(),mt(this,"_flagAdditions",!1),mt(this,"_flagSubtractions",!1),mt(this,"_flagOrder",!1),mt(this,"_flagOpacity",!0),mt(this,"_flagBeginning",!1),mt(this,"_flagEnding",!1),mt(this,"_flagLength",!1),mt(this,"_flagMask",!1),mt(this,"_fill","#fff"),mt(this,"_stroke","#000"),mt(this,"_linewidth",1),mt(this,"_opacity",1),mt(this,"_visible",!0),mt(this,"_cap","round"),mt(this,"_join","round"),mt(this,"_miter",4),mt(this,"_closed",!0),mt(this,"_curved",!1),mt(this,"_automatic",!0),mt(this,"_beginning",0),mt(this,"_ending",1),mt(this,"_length",0),mt(this,"_mask",null);for(let e in vn)Object.defineProperty(this,e,vn[e]);this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(e)?e:Array.prototype.slice.call(arguments)}static InsertChildren(e){for(let t=0;t<e.length;t++)bn.call(this,e[t],this)}static RemoveChildren(e){for(let t=0;t<e.length;t++)bn.call(this,e[t])}static OrderChildren(e){this._flagOrder=!0}clone(e){const t=new _n,n=this.children.map((function(e){return e.clone()}));return t.add(n),t.opacity=this.opacity,this.mask&&(t.mask=this.mask),t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.className=this.className,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof Lt?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(e.matrix=this.matrix.toObject()),en.each(this.children,(function(t,n){e.children[n]=t.toObject()}),this),e}corner(){const e=this.getBoundingClientRect(!0);for(let t=0;t<this.children.length;t++){const n=this.children[t];n.translation.x-=e.left,n.translation.y-=e.top}return this.mask&&(this.mask.translation.x-=e.left,this.mask.translation.y-=e.top),this}center(){const e=this.getBoundingClientRect(!0),t=e.left+e.width/2-this.translation.x,n=e.top+e.height/2-this.translation.y;for(let e=0;e<this.children.length;e++){const i=this.children[e];i.isShape&&(i.translation.x-=t,i.translation.y-=n)}return this.mask&&(this.mask.translation.x-=t,this.mask.translation.y-=n),this}getById(e){let t=null;return function n(i){if(i.id===e)return i;if(i.children)for(let e=0;e<i.children.length;e++)if(t=n(i.children[e]),t)return t;return null}(this)}getByClassName(e){const t=[];return function n(i){if(Array.prototype.indexOf.call(i.classList,e)>=0&&t.push(i),i.children)for(let e=0;e<i.children.length;e++)n(i.children[e]);return t}(this)}getByType(e){const t=[];return function n(i){if(i instanceof e&&t.push(i),i.children)for(let e=0;e<i.children.length;e++)n(i.children[e]);return t}(this)}add(e){e=e instanceof Array?e.slice():Array.prototype.slice.call(arguments);for(let t=0;t<e.length;t++){const n=e[t];if(!n||!n.id)continue;const i=Array.prototype.indexOf.call(this.children,n);i>=0&&this.children.splice(i,1),this.children.push(n)}return this}remove(e){const t=arguments.length,n=this.parent;if(t<=0&&n)return n.remove(this),this;e=e instanceof Array?e.slice():Array.prototype.slice.call(arguments);for(let t=0;t<e.length;t++){const n=e[t];if(!n||!this.children.ids[n.id])continue;const i=this.children.indexOf(n);i>=0&&this.children.splice(i,1)}return this}getBoundingClientRect(e){let t,n,i,r,s,o,a,l,c,h;this._update(!0);let u=1/0,f=-1/0,d=1/0,p=-1/0;const g=/texture|gradient/i;n=e?this._matrix:kt(this);for(let n=0;n<this.children.length;n++){const i=this.children[n];i.visible&&!g.test(i._renderer.type)&&(t=i.getBoundingClientRect(e),a="number"!=typeof t.top||en.isNaN(t.top)||!isFinite(t.top),l="number"!=typeof t.left||en.isNaN(t.left)||!isFinite(t.left),c="number"!=typeof t.right||en.isNaN(t.right)||!isFinite(t.right),h="number"!=typeof t.bottom||en.isNaN(t.bottom)||!isFinite(t.bottom),a||l||c||h||(d=gn(t.top,d),u=gn(t.left,u),f=mn(t.right,f),p=mn(t.bottom,p)))}return e&&(i=n.multiply(u,d,1),r=n.multiply(u,p,1),s=n.multiply(f,d,1),o=n.multiply(f,p,1),d=gn(i.y,r.y,s.y,o.y),u=gn(i.x,r.x,s.x,o.x),f=mn(i.x,r.x,s.x,o.x),p=mn(i.y,r.y,s.y,o.y)),{top:d,left:u,right:f,bottom:p,width:f-u,height:p-d}}noFill(){return this.children.forEach((function(e){e.noFill()})),this}noStroke(){return this.children.forEach((function(e){e.noStroke()})),this}subdivide(){const e=arguments;return this.children.forEach((function(t){t.subdivide.apply(t,e)})),this}_update(){let e,t,n;if(this._flagBeginning||this._flagEnding){const i=Math.min(this._beginning,this._ending),r=Math.max(this._beginning,this._ending),s=this.length;let o=0;const a=i*s,l=r*s;for(e=0;e<this.children.length;e++)n=this.children[e],t=n.length,a>o+t?(n.beginning=1,n.ending=1):l<o?(n.beginning=0,n.ending=0):a>o&&a<o+t?(n.beginning=(a-o)/t,n.ending=1):l>o&&l<o+t?(n.beginning=0,n.ending=(l-o)/t):(n.beginning=0,n.ending=1),o+=t}return super._update.apply(this,arguments)}flagReset(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,super.flagReset.call(this),this}},yn=_n;mt(yn,"Children",pn),mt(yn,"Properties",["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"]);var vn={visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._flagVisible=this._visible!==e||this._flagVisible,this._visible=e}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._flagOpacity=this._opacity!==e||this._flagOpacity,this._opacity=e}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(e){this._flagBeginning=this._beginning!==e||this._flagBeginning,this._beginning=e}},ending:{enumerable:!0,get:function(){return this._ending},set:function(e){this._flagEnding=this._ending!==e||this._flagEnding,this._ending=e}},length:{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(let e=0;e<this.children.length;e++){const t=this.children[e];this._length+=t.length}}return this._length}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){this._fill=e;for(let t=0;t<this.children.length;t++)this.children[t].fill=e}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){this._stroke=e;for(let t=0;t<this.children.length;t++)this.children[t].stroke=e}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e;for(let t=0;t<this.children.length;t++)this.children[t].linewidth=e}},join:{enumerable:!0,get:function(){return this._join},set:function(e){this._join=e;for(let t=0;t<this.children.length;t++)this.children[t].join=e}},miter:{enumerable:!0,get:function(){return this._miter},set:function(e){this._miter=e;for(let t=0;t<this.children.length;t++)this.children[t].miter=e}},cap:{enumerable:!0,get:function(){return this._cap},set:function(e){this._cap=e;for(let t=0;t<this.children.length;t++)this.children[t].cap=e}},closed:{enumerable:!0,get:function(){return this._closed},set:function(e){this._closed=e;for(let t=0;t<this.children.length;t++)this.children[t].closed=e}},curved:{enumerable:!0,get:function(){return this._curved},set:function(e){this._curved=e;for(let t=0;t<this.children.length;t++)this.children[t].curved=e}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(e){this._automatic=e;for(let t=0;t<this.children.length;t++)this.children[t].automatic=e}},children:{enumerable:!0,get:function(){return this._children},set:function(e){const t=yn.InsertChildren.bind(this),n=yn.RemoveChildren.bind(this),i=yn.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&n(this._children)),this._children=new pn(e),this._children.bind(At.Types.insert,t),this._children.bind(At.Types.remove,n),this._children.bind(At.Types.order,i),e.length>0&&t(e)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,en.isObject(e)&&!e.clip&&(e.clip=!0)}}};function bn(e,t){const n=e.parent;let i;function r(){t.subtractions.length>0&&(i=Array.prototype.indexOf.call(t.subtractions,e),i>=0&&t.subtractions.splice(i,1)),t.additions.length>0&&(i=Array.prototype.indexOf.call(t.additions,e),i>=0&&t.additions.splice(i,1)),e.parent=t,t.additions.push(e),t._flagAdditions=!0}function s(){i=Array.prototype.indexOf.call(n.additions,e),i>=0&&n.additions.splice(i,1),i=Array.prototype.indexOf.call(n.subtractions,e),i<0&&(n.subtractions.push(e),n._flagSubtractions=!0)}n!==t?(n&&n.children.ids[e.id]&&(i=Array.prototype.indexOf.call(n.children,e),n.children.splice(i,1),s()),t?r():(s(),n._flagAdditions&&0===n.additions.length&&(n._flagAdditions=!1),n._flagSubtractions&&0===n.subtractions.length&&(n._flagSubtractions=!1),delete e.parent)):r()}var xn=new cn,wn=[],kn=Math.max,Sn=Math.min,En=Math.abs,Mn=Math.sin,Rn=Math.cos,Tn=Math.acos,Cn=Math.sqrt,On={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(e,t){return e.tagName=e.nodeName=t||"canvas",e.nodeType=1,e.getAttribute=function(e){return this[e]},e.setAttribute=function(e,t){return this[e]=t,this},e},group:{renderChild:function(e){On[e._renderer.type].render.call(e,this.ctx,!0,this.clip)},render:function(e){if(!this._visible)return this;this._update();const t=this._matrix.elements,n=this.parent;this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1);const i=this._mask,r=jn(t),s=!r||!!i;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=e,s&&(e.save(),r||e.transform(t[0],t[3],t[1],t[4],t[2],t[5])),i&&On[i._renderer.type].render.call(i,e,!0),this._opacity>0&&0!==this._scale)for(let t=0;t<this.children.length;t++){const n=this.children[t];On[n._renderer.type].render.call(n,e)}return s&&e.restore(),this.flagReset()}},path:{render:function(e,t,n){let i,r,s,o,a,l,c,h,u,f,d,p,g,m,_,y,v,b,x,w,k,S,E,M,R,T,C,O,P,A,j,F,L,I,z,N,D,B,V,H,U;if(I=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,P=this._mask,A=this._clip,a=this._opacity*(I||1),l=this._visible,!t&&(!l||A||0===a))return this;this._update(),i=this._matrix.elements,r=this._stroke,s=this._linewidth,o=this._fill,c=this._cap,h=this._join,u=this._miter,f=this._closed,d=this._renderer.vertices,p=d.length,g=p-1,j=jn(i),L=this.dashes,j||(e.save(),e.transform(i[0],i[3],i[1],i[4],i[2],i[5])),P&&On[P._renderer.type].render.call(P,e,!0),o&&("string"==typeof o?e.fillStyle=o:(On[o._renderer.type].render.call(o,e,this),e.fillStyle=o._renderer.effect)),r&&("string"==typeof r?e.strokeStyle=r:(On[r._renderer.type].render.call(r,e,this),e.strokeStyle=r._renderer.effect),s&&(e.lineWidth=s),u&&(e.miterLimit=u),h&&(e.lineJoin=h),!f&&c&&(e.lineCap=c)),"number"==typeof a&&(e.globalAlpha=a),L&&L.length>0&&(e.lineDashOffset=L.offset||0,e.setLineDash(L)),e.beginPath();for(let t=0;t<p;t++)switch(y=d[t],C=y.x,O=y.y,y.command){case _t.close:e.closePath();break;case _t.arc:z=y.rx,N=y.ry,D=y.xAxisRotation,B=y.largeArcFlag,V=y.sweepFlag,m=f?Rt(t-1,p):kn(t-1,0),_=d[m],H=_.x,U=_.y,On.renderSvgArcCommand(e,H,U,z,N,B,V,D,C,O);break;case _t.curve:m=f?Rt(t-1,p):Math.max(t-1,0),_=d[m],E=_.controls&&_.controls.right||Lt.zero,M=y.controls&&y.controls.left||Lt.zero,_._relative?(k=E.x+_.x,S=E.y+_.y):(k=E.x,S=E.y),y._relative?(x=M.x+y.x,w=M.y+y.y):(x=M.x,w=M.y),e.bezierCurveTo(k,S,x,w,C,O),t>=g&&f&&(v=b,R=y.controls&&y.controls.right||Lt.zero,T=v.controls&&v.controls.left||Lt.zero,y._relative?(k=R.x+y.x,S=R.y+y.y):(k=R.x,S=R.y),v._relative?(x=T.x+v.x,w=T.y+v.y):(x=T.x,w=T.y),C=v.x,O=v.y,e.bezierCurveTo(k,S,x,w,C,O));break;case _t.line:e.lineTo(C,O);break;case _t.move:b=y,e.moveTo(C,O)}return f&&e.closePath(),A||n||(On.isHidden.test(o)||(F=o._renderer&&o._renderer.offset,F&&(e.save(),e.translate(-o._renderer.offset.x,-o._renderer.offset.y),e.scale(o._renderer.scale.x,o._renderer.scale.y)),e.fill(),F&&e.restore()),On.isHidden.test(r)||(F=r._renderer&&r._renderer.offset,F&&(e.save(),e.translate(-r._renderer.offset.x,-r._renderer.offset.y),e.scale(r._renderer.scale.x,r._renderer.scale.y),e.lineWidth=s/r._renderer.scale.x),e.stroke(),F&&e.restore())),j||e.restore(),A&&!n&&e.clip(),L&&L.length>0&&e.setLineDash(wn),this.flagReset()}},points:{render:function(e,t,n){let i,r,s,o,a,l,c,h,u,f,d,p,g,m,_,y;if(y=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,a=this._opacity*(y||1),l=this._visible,!(t||l&&0!==a))return this;this._update(),i=this._matrix.elements,r=this._stroke,s=this._linewidth,o=this._fill,h=this._renderer.collection,u=h.length,g=jn(i),_=this.dashes,c=this._size,g||(e.save(),e.transform(i[0],i[3],i[1],i[4],i[2],i[5])),o&&("string"==typeof o?e.fillStyle=o:(On[o._renderer.type].render.call(o,e,this),e.fillStyle=o._renderer.effect)),r&&("string"==typeof r?e.strokeStyle=r:(On[r._renderer.type].render.call(r,e,this),e.strokeStyle=r._renderer.effect),s&&(e.lineWidth=s)),"number"==typeof a&&(e.globalAlpha=a),_&&_.length>0&&(e.lineDashOffset=_.offset||0,e.setLineDash(_)),e.beginPath();let v,b=.5*c;this._sizeAttenuation||(kt(this,xn),v=xn.elements,v=xt(v[0],v[3],v[1],v[4],v[2],v[5]),b/=Math.max(v.scaleX,v.scaleY));for(let t=0;t<u;t++)f=h[t],d=f.x,p=f.y,e.moveTo(d+b,p),e.arc(d,p,b,0,vt);return n||(On.isHidden.test(o)||(m=o._renderer&&o._renderer.offset,m&&(e.save(),e.translate(-o._renderer.offset.x,-o._renderer.offset.y),e.scale(o._renderer.scale.x,o._renderer.scale.y)),e.fill(),m&&e.restore()),On.isHidden.test(r)||(m=r._renderer&&r._renderer.offset,m&&(e.save(),e.translate(-r._renderer.offset.x,-r._renderer.offset.y),e.scale(r._renderer.scale.x,r._renderer.scale.y),e.lineWidth=s/r._renderer.scale.x),e.stroke(),m&&e.restore())),g||e.restore(),_&&_.length>0&&e.setLineDash(wn),this.flagReset()}},text:{render:function(e,t,n){const i=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,r=this._opacity*i,s=this._visible,o=this._mask,a=this._clip;if(!t&&(!s||a||0===r))return this;this._update();const l=this._matrix.elements,c=this._stroke,h=this._linewidth,u=this._fill,f=this._decoration,d=jn(l),p=u._renderer&&u._renderer.offset&&c._renderer&&c._renderer.offset,g=this.dashes,m=On.alignments[this._alignment]||this._alignment,_=this._baseline;let y,v,b,x,w,k,S,E,M,R,T;if(d||(e.save(),e.transform(l[0],l[3],l[1],l[4],l[2],l[5])),o&&On[o._renderer.type].render.call(o,e,!0),p||(e.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),e.textAlign=m,e.textBaseline=_,u&&("string"==typeof u?e.fillStyle=u:(On[u._renderer.type].render.call(u,e,this),e.fillStyle=u._renderer.effect)),c&&("string"==typeof c?e.strokeStyle=c:(On[c._renderer.type].render.call(c,e,this),e.strokeStyle=c._renderer.effect),h&&(e.lineWidth=h)),"number"==typeof r&&(e.globalAlpha=r),g&&g.length>0&&(e.lineDashOffset=g.offset||0,e.setLineDash(g)),a||n||(On.isHidden.test(u)||(u._renderer&&u._renderer.offset?(k=u._renderer.scale.x,S=u._renderer.scale.y,e.save(),e.translate(-u._renderer.offset.x,-u._renderer.offset.y),e.scale(k,S),y=this._size/u._renderer.scale.y,v=this._leading/u._renderer.scale.y,e.font=[this._style,this._weight,y+"px/",v+"px",this._family].join(" "),b=u._renderer.offset.x/u._renderer.scale.x,x=u._renderer.offset.y/u._renderer.scale.y,e.fillText(this.value,b,x),e.restore()):e.fillText(this.value,0,0)),On.isHidden.test(c)||(c._renderer&&c._renderer.offset?(k=c._renderer.scale.x,S=c._renderer.scale.y,e.save(),e.translate(-c._renderer.offset.x,-c._renderer.offset.y),e.scale(k,S),y=this._size/c._renderer.scale.y,v=this._leading/c._renderer.scale.y,e.font=[this._style,this._weight,y+"px/",v+"px",this._family].join(" "),b=c._renderer.offset.x/c._renderer.scale.x,x=c._renderer.offset.y/c._renderer.scale.y,w=h/c._renderer.scale.x,e.lineWidth=w,e.strokeText(this.value,b,x),e.restore()):e.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(f)){const t=e.measureText(this.value);let n=1;switch(f){case"underline":M=t.actualBoundingBoxAscent,T=t.actualBoundingBoxAscent;break;case"strikethrough":M=0,T=0,n=.5}switch(_){case"top":M+=this._size*n,T+=this._size*n;break;case"baseline":case"bottom":M-=this._size*n,T-=this._size*n}switch(m){case"left":case"start":E=0,R=t.width;break;case"right":case"end":E=-t.width,R=0;break;default:E=-t.width/2,R=t.width/2}e.lineWidth=Math.max(Math.floor(this._size/15),1),e.strokeStyle=e.fillStyle,e.beginPath(),e.moveTo(E,M),e.lineTo(R,T),e.stroke()}return d||e.restore(),a&&!n&&e.clip(),g&&g.length>0&&e.setLineDash(wn),this.flagReset()}},"linear-gradient":{render:function(e,t){if(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let n,i=this.left._x,r=this.left._y,s=this.right._x,o=this.right._y;/objectBoundingBox/i.test(this._units)&&(n=t.getBoundingClientRect(!0),i=(i-.5)*n.width,r=(r-.5)*n.height,s=(s-.5)*n.width,o=(o-.5)*n.height),this._renderer.effect=e.createLinearGradient(i,r,s,o);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return this.flagReset()}}},"radial-gradient":{render:function(e,t){if(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let n,i=this.center._x,r=this.center._y,s=this.focal._x,o=this.focal._y,a=this._radius;/objectBoundingBox/i.test(this._units)&&(n=t.getBoundingClientRect(!0),i=i*n.width*.5,r=r*n.height*.5,s=s*n.width*.5,o=o*n.height*.5,a*=.5*Math.min(n.width,n.height)),this._renderer.effect=e.createRadialGradient(i,r,0,s,o,a);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return this.flagReset()}}},texture:{render:function(e){this._update();const t=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=e.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof Lt||(this._renderer.offset=new Lt),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,t&&(this._renderer.offset.x+=t.width/2,this._renderer.offset.y+=t.height/2,this._scale instanceof Lt?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof Lt||(this._renderer.scale=new Lt),this._scale instanceof Lt?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(e,t,n,i,r,s,o,a,l,c){a=a*Math.PI/180,i=En(i),r=En(r);const h=(t-l)/2,u=(n-c)/2,f=Rn(a)*h+Mn(a)*u,d=-Mn(a)*h+Rn(a)*u,p=f*f,g=d*d;let m=i*i,_=r*r;const y=p/m+g/_;if(y>1){const e=Cn(y);i*=e,r*=e,m=i*i,_=r*r}const v=m*g+_*p;let b=Cn(kn(0,(m*_-v)/v));s===o&&(b=-b);const x=b*i*d/r,w=-b*r*f/i,k=Rn(a)*x-Mn(a)*w+(t+l)/2,S=Mn(a)*x+Rn(a)*w+(n+c)/2,E=An(1,0,(f-x)/i,(d-w)/r);!function(e,t,n,i,r,s,o,a,l){const c=o-s,h=Vt.Tolerance.epsilon,u=Math.abs(c)<h;let f=Rt(c,vt);f<h&&(f=u?0:vt),!0!==a||u||(f===vt?f=-vt:f-=vt);for(let o=0;o<12;o++){const a=s+o/11*f;let c=t+i*Math.cos(a),h=n+r*Math.sin(a);if(0!==l){const e=Math.cos(l),i=Math.sin(l),r=c-t,s=h-n;c=r*e-s*i+t,h=r*i+s*e+n}e.lineTo(c,h)}}(e,k,S,i,r,E,E+An((f-x)/i,(d-w)/r,(-f-x)/i,(-d-w)/r)%vt,0===o,a)}},Pn=class extends At{constructor(e){super();const t=!1!==e.smoothing;this.domElement=e.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=e.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=t),this.scene=new yn,this.scene.parent=this}setSize(e,t,n){return this.width=e,this.height=t,this.ratio=void 0===n?Jt(this.ctx):n,this.domElement.width=e*this.ratio,this.domElement.height=t*this.ratio,this.domElement.style&&en.extend(this.domElement.style,{width:e+"px",height:t+"px"}),this.trigger(At.Types.resize,e,t,n)}render(){const e=1===this.ratio;return e||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),On.group.render.call(this.scene,this.ctx),e||this.ctx.restore(),this}};function An(e,t,n,i){const r=e*n+t*i,s=Cn(e*e+t*t)*Cn(n*n+i*i);let o=Tn(kn(-1,Sn(1,r/s)));return e*i-t*n<0&&(o=-o),o}function jn(e){return 1==e[0]&&0==e[3]&&0==e[1]&&1==e[4]&&0==e[2]&&0==e[5]}mt(Pn,"Utils",On);var Fn={Image:null,isHeadless:!1,shim:function(e,t){return Pn.Utils.shim(e),void 0!==t&&(Fn.Image=t),Fn.isHeadless=!0,e}},Ln={hasEventListeners:"function"==typeof ft.addEventListener,bind:function(e,t,n,i){return this.hasEventListeners?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n),Ln},unbind:function(e,t,n,i){return Ln.hasEventListeners?e.removeEventListeners(t,n,!!i):e.detachEvent("on"+t,n),Ln},getRequestAnimationFrame:function(){const e=["ms","moz","webkit","o"];let t=0,n=ft.requestAnimationFrame;if(!n){for(let t=0;t<e.length;t++)n=ft[e[t]+"RequestAnimationFrame"]||n;n=n||function(e,n){const i=(new Date).getTime(),r=Math.max(0,16-(i-t)),s=ft.setTimeout((function(){e(i+r)}),r);return t=i+r,s}}return n}},In=ft.document?ft.document.createElement("div"):{};In.id="help-two-load",Object.defineProperty(Ln,"temp",{enumerable:!0,get:function(){return en.isElement(In)&&!ft.document.head.contains(In)&&(In.style.display="none",ft.document.head.appendChild(In)),In}});var zn=class extends Error{constructor(e){super(),mt(this,"name","Two.js"),mt(this,"message"),this.message=e}},Nn=class{constructor(){mt(this,"map",{})}add(e,t){return this.map[e]=t,this}remove(e){return delete this.map[e],this}get(e){return this.map[e]}contains(e){return e in this.map}};function Dn(e,t){if(0===t||1===t)return!0;const n=e._length*t;let i=0;for(let t=0;t<e._lengths.length;t++){const r=e._lengths[t];if(i>=n)return n-i>=0;i+=r}return!1}function Bn(e,t){const n=e._length;if(t<=0)return 0;if(t>=n)return e._lengths.length-1;for(let n=0,i=0;n<e._lengths.length;n++){if(i+e._lengths[n]>=t)return t-=i,Math.max(n-1,0)+t/e._lengths[n];i+=e._lengths[n]}return-1}function Vn(e,t,n){let i,r,s,o,a,l,c,h;const u=t.controls&&t.controls.right,f=e.controls&&e.controls.left;return i=t.x,a=t.y,r=(u||t).x,l=(u||t).y,s=(f||e).x,c=(f||e).y,o=e.x,h=e.y,u&&t._relative&&(r+=t.x,l+=t.y),f&&e._relative&&(s+=e.x,c+=e.y),Wt(i,a,r,l,s,c,o,h,n)}function Hn(e,t,n){let i,r,s,o,a,l,c,h;const u=t.controls&&t.controls.right,f=e.controls&&e.controls.left;return i=t.x,a=t.y,r=(u||t).x,l=(u||t).y,s=(f||e).x,c=(f||e).y,o=e.x,h=e.y,u&&t._relative&&(r+=t.x,l+=t.y),f&&e._relative&&(s+=e.x,c+=e.y),Ut(i,a,r,l,s,c,o,h,n)}var Un=class extends tn{constructor(e,t,n){super(),mt(this,"_flagOffset",!0),mt(this,"_flagOpacity",!0),mt(this,"_flagColor",!0),mt(this,"_offset",0),mt(this,"_opacity",1),mt(this,"_color","#fff");for(let e in $n)Object.defineProperty(this,e,$n[e]);this._renderer.type="stop",this.offset="number"==typeof e?e:Un.Index<=0?0:1,this.opacity="number"==typeof n?n:1,this.color="string"==typeof t?t:Un.Index<=0?"#fff":"#000",Un.Index=(Un.Index+1)%2}clone(e){const t=new Un;return en.each(Un.Properties,(function(e){t[e]=this[e]}),this),e&&e.stops&&e.stops.push(t),t}toObject(){const e={};return en.each(Un.Properties,(function(t){e[t]=this[t]}),this),e}flagReset(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,super.flagReset.call(this),this}},Wn=Un;mt(Wn,"Index",0),mt(Wn,"Properties",["offset","opacity","color"]);var $n={offset:{enumerable:!0,get:function(){return this._offset},set:function(e){this._offset=e,this._flagOffset=!0,this.parent&&(this.parent._flagStops=!0)}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0,this.parent&&(this.parent._flagStops=!0)}},color:{enumerable:!0,get:function(){return this._color},set:function(e){this._color=e,this._flagColor=!0,this.parent&&(this.parent._flagStops=!0)}}},Yn=class extends tn{constructor(e){super(),mt(this,"_flagStops",!1),mt(this,"_flagSpread",!1),mt(this,"_flagUnits",!1),mt(this,"_spread",""),mt(this,"_units","");for(let e in qn)Object.defineProperty(this,e,qn[e]);this._renderer.type="gradient",this.id=Dt+Bt(),this.classList=[],this._renderer.flagStops=Kn.bind(this),this._renderer.bindStops=Qn.bind(this),this._renderer.unbindStops=Gn.bind(this),this.spread="pad",this.units="objectBoundingBox",e&&(this.stops=e)}clone(e){const t=this.stops.map((function(e){return e.clone()})),n=new Yn(t);return en.each(Yn.Properties,(function(e){n[e]=this[e]}),this),e&&e.add(n),n}toObject(){const e={stops:this.stops.map((function(e){return e.toObject()}))};return en.each(Yn.Properties,(function(t){e[t]=this[t]}),this),e}_update(){return(this._flagSpread||this._flagStops)&&this.trigger(At.Types.change),this}flagReset(){return this._flagSpread=this._flagUnits=this._flagStops=!1,super.flagReset.call(this),this}},Xn=Yn;mt(Xn,"Stop",Wn),mt(Xn,"Properties",["spread","stops","renderer","units"]);var qn={spread:{enumerable:!0,get:function(){return this._spread},set:function(e){this._spread=e,this._flagSpread=!0}},units:{enumerable:!0,get:function(){return this._units},set:function(e){this._units=e,this._flagUnits=!0}},stops:{enumerable:!0,get:function(){return this._stops},set:function(e){const t=this._renderer.bindStops,n=this._renderer.unbindStops;this._stops&&this._stops.unbind(At.Types.insert,t).unbind(At.Types.remove,n),this._stops=new dn((e||[]).slice(0)),this._stops.bind(At.Types.insert,t).bind(At.Types.remove,n),t(this._stops)}}};function Kn(){this._flagStops=!0}function Qn(e){let t=e.length;for(;t--;)e[t].bind(At.Types.change,this._renderer.flagStops),e[t].parent=this;this._renderer.flagStops()}function Gn(e){let t=e.length;for(;t--;)e[t].unbind(At.Types.change,this._renderer.flagStops),delete e[t].parent;this._renderer.flagStops()}var Jn=class extends Xn{constructor(e,t,n,i,r){super(r),mt(this,"_flagEndPoints",!1),mt(this,"_left",null),mt(this,"_right",null);for(let e in ei)Object.defineProperty(this,e,ei[e]);this._renderer.type="linear-gradient",this._renderer.flagEndPoints=ti.bind(this),this.left=new Lt,this.right=new Lt,"number"==typeof e&&(this.left.x=e),"number"==typeof t&&(this.left.y=t),"number"==typeof n&&(this.right.x=n),"number"==typeof i&&(this.right.y=i)}clone(e){const t=this.stops.map((function(e){return e.clone()})),n=new Jn(this.left._x,this.left._y,this.right._x,this.right._y,t);return en.each(Xn.Properties,(function(e){n[e]=this[e]}),this),e&&e.add(n),n}toObject(){const e=super.toObject.call(this);return e.left=this.left.toObject(),e.right=this.right.toObject(),e}_update(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(At.Types.change),this}flagReset(){return this._flagEndPoints=!1,super.flagReset.call(this),this}},Zn=Jn;mt(Zn,"Properties",["left","right"]),mt(Zn,"Stop",Wn);var ei={left:{enumerable:!0,get:function(){return this._left},set:function(e){this._left instanceof Lt&&this._left.unbind(At.Types.change,this._renderer.flagEndPoints),this._left=e,this._left.bind(At.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}},right:{enumerable:!0,get:function(){return this._right},set:function(e){this._right instanceof Lt&&this._right.unbind(At.Types.change,this._renderer.flagEndPoints),this._right=e,this._right.bind(At.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}}};function ti(){this._flagEndPoints=!0}var ni=class extends Xn{constructor(e,t,n,i,r,s){super(i),mt(this,"_flagRadius",!1),mt(this,"_flagCenter",!1),mt(this,"_flagFocal",!1),mt(this,"_radius",0),mt(this,"_center",null),mt(this,"_focal",null);for(let e in si)Object.defineProperty(this,e,si[e]);this._renderer.type="radial-gradient",this._renderer.flagCenter=oi.bind(this),this._renderer.flagFocal=ai.bind(this),this.center=new Lt,this.radius="number"==typeof n?n:1,this.focal=new Lt,"number"==typeof e&&(this.center.x=e),"number"==typeof t&&(this.center.y=t),this.focal.copy(this.center),"number"==typeof r&&(this.focal.x=r),"number"==typeof s&&(this.focal.y=s)}clone(e){const t=this.stops.map((function(e){return e.clone()})),n=new ni(this.center._x,this.center._y,this._radius,t,this.focal._x,this.focal._y);return en.each(Xn.Properties.concat(ni.Properties),(function(e){n[e]=this[e]}),this),e&&e.add(n),n}toObject(){const e=super.toObject.call(this);return en.each(ni.Properties,(function(t){e[t]=this[t]}),this),e.center=this.center.toObject(),e.focal=this.focal.toObject(),e}_update(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(At.Types.change),this}flagReset(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,super.flagReset.call(this),this}},ii=ni;mt(ii,"Stop",Wn),mt(ii,"Properties",["center","radius","focal"]);var ri,si={radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius=e,this._flagRadius=!0}},center:{enumerable:!0,get:function(){return this._center},set:function(e){this._center&&this._center.unbind(At.Types.change,this._renderer.flagCenter),this._center=e,this._center.bind(At.Types.change,this._renderer.flagCenter),this._flagCenter=!0}},focal:{enumerable:!0,get:function(){return this._focal},set:function(e){this._focal&&this._focal.unbind(At.Types.change,this._renderer.flagFocal),this._focal=e,this._focal.bind(At.Types.change,this._renderer.flagFocal),this._flagFocal=!0}}};function oi(){this._flagCenter=!0}function ai(){this._flagFocal=!0}var li={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};ft.document&&(ri=document.createElement("a"));var ci=class extends tn{constructor(e,t){super(),mt(this,"_flagSrc",!1),mt(this,"_flagImage",!1),mt(this,"_flagVideo",!1),mt(this,"_flagLoaded",!1),mt(this,"_flagRepeat",!1),mt(this,"_flagOffset",!1),mt(this,"_flagScale",!1),mt(this,"_src",""),mt(this,"_image",null),mt(this,"_loaded",!1),mt(this,"_repeat","no-repeat"),mt(this,"_scale",1),mt(this,"_offset",null),this._renderer={};for(let e in ui)Object.defineProperty(this,e,ui[e]);if(this._renderer.type="texture",this._renderer.flagOffset=fi.bind(this),this._renderer.flagScale=di.bind(this),this.id=Dt+Bt(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new Lt,"function"==typeof t){const e=function(){this.unbind(At.Types.load,e),"function"==typeof t&&t()}.bind(this);this.bind(At.Types.load,e)}if("string"==typeof e)this.src=e;else if("object"==typeof e){const t=Object.prototype.toString.call(e);"[object HTMLImageElement]"!==t&&"[object HTMLCanvasElement]"!==t&&"[object HTMLVideoElement]"!==t&&"[object Image]"!==t||(this.image=e)}this._update()}static getAbsoluteURL(e){return ri?(ri.href=e,ri.href):e}static loadHeadlessBuffer(e,t){e.image.onload=t,e.image.src=e.src}static getTag(e){return e&&e.nodeName&&e.nodeName.toLowerCase()||"img"}static getImage(e){const t=ci.getAbsoluteURL(e);if(ci.ImageRegistry.contains(t))return ci.ImageRegistry.get(t);let n;return Fn.Image?(n=new Fn.Image,Pn.Utils.shim(n,"img")):ft.document?n=li.video.test(t)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),n.crossOrigin="anonymous",n}static load(e,t){let n=e.image,i=ci.getTag(n);e._flagImage&&(/canvas/i.test(i)?ci.Register.canvas(e,t):(e._src=!Fn.isHeadless&&n.getAttribute("two-src")||n.src,ci.Register[i](e,t))),e._flagSrc&&(n||(n=ci.getImage(e.src),e.image=n),i=ci.getTag(n),ci.Register[i](e,t))}clone(){const e=new ci(this.src);return e.repeat=this.repeat,e.offset.copy(this.origin),e.scale=this.scale,e}toObject(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}}_update(){return(this._flagSrc||this._flagImage)&&(this.trigger(At.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,ci.load(this,function(){this.loaded=!0,this.trigger(At.Types.change).trigger(At.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this}flagReset(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagRepeat=this._flagVideo=this._flagScale=this._flagOffset=!1,super.flagReset.call(this),this}},hi=ci;mt(hi,"Properties",["src","loaded","repeat","scale","offset","image"]),mt(hi,"RegularExpressions",li),mt(hi,"ImageRegistry",new Nn),mt(hi,"Register",{canvas:function(e,t){e._src="#"+e.id,ci.ImageRegistry.add(e.src,e.image),"function"==typeof t&&t()},img:function(e,t){const n=e.image,i=function(e){!Fn.isHeadless&&n.removeEventListener&&"function"==typeof n.removeEventListener&&(n.removeEventListener("load",i,!1),n.removeEventListener("error",r,!1)),"function"==typeof t&&t()},r=function(t){throw Fn.isHeadless||"function"!=typeof n.removeEventListener||(n.removeEventListener("load",i,!1),n.removeEventListener("error",r,!1)),new zn("unable to load "+e.src)};"number"==typeof n.width&&n.width>0&&"number"==typeof n.height&&n.height>0?i():Fn.isHeadless||"function"!=typeof n.addEventListener||(n.addEventListener("load",i,!1),n.addEventListener("error",r,!1)),e._src=ci.getAbsoluteURL(e._src),!Fn.isHeadless&&n&&n.getAttribute("two-src")||(Fn.isHeadless||n.setAttribute("two-src",e.src),ci.ImageRegistry.add(e.src,n),Fn.isHeadless?ci.loadHeadlessBuffer(e,i):e.image.src=e.src)},video:function(e,t){if(Fn.isHeadless)throw new zn("video textures are not implemented in headless environments.");const n=function(r){e.image.removeEventListener("canplaythrough",n,!1),e.image.removeEventListener("error",i,!1),e.image.width=e.image.videoWidth,e.image.height=e.image.videoHeight,"function"==typeof t&&t()},i=function(t){throw e.image.removeEventListener("canplaythrough",n,!1),e.image.removeEventListener("error",i,!1),new zn("unable to load "+e.src)};e._src=ci.getAbsoluteURL(e._src),e.image.getAttribute("two-src")||(e.image.setAttribute("two-src",e.src),ci.ImageRegistry.add(e.src,e.image)),e.image.readyState>=4?n():(e.image.addEventListener("canplaythrough",n,!1),e.image.addEventListener("error",i,!1),e.image.src=e.src,e.image.load())}});var ui={src:{enumerable:!0,get:function(){return this._src},set:function(e){this._src=e,this._flagSrc=!0}},loaded:{enumerable:!0,get:function(){return this._loaded},set:function(e){this._loaded=e,this._flagLoaded=!0}},repeat:{enumerable:!0,get:function(){return this._repeat},set:function(e){this._repeat=e,this._flagRepeat=!0}},image:{enumerable:!0,get:function(){return this._image},set:function(e){let t;t="canvas"===hi.getTag(e)?"#"+e.id:e.src,hi.ImageRegistry.contains(t)?this._image=hi.ImageRegistry.get(e.src):this._image=e,this._flagImage=!0}},offset:{enumerable:!0,get:function(){return this._offset},set:function(e){this._offset&&this._offset.unbind(At.Types.change,this._renderer.flagOffset),this._offset=e,this._offset.bind(At.Types.change,this._renderer.flagOffset),this._flagOffset=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof Lt&&this._scale.unbind(At.Types.change,this._renderer.flagScale),this._scale=e,this._scale instanceof Lt&&this._scale.bind(At.Types.change,this._renderer.flagScale),this._flagScale=!0}}};function fi(){this._flagOffset=!0}function di(){this._flagScale=!0}var pi=Math.min,gi=Math.max,mi=Math.ceil,_i=Math.floor,yi=new Lt,vi=class extends hn{constructor(e,t,n,i){super(),mt(this,"_flagVertices",!0),mt(this,"_flagLength",!0),mt(this,"_flagFill",!0),mt(this,"_flagStroke",!0),mt(this,"_flagLinewidth",!0),mt(this,"_flagOpacity",!0),mt(this,"_flagVisible",!0),mt(this,"_flagCap",!0),mt(this,"_flagJoin",!0),mt(this,"_flagMiter",!0),mt(this,"_flagMask",!1),mt(this,"_flagClip",!1),mt(this,"_length",0),mt(this,"_fill","#fff"),mt(this,"_stroke","#000"),mt(this,"_linewidth",1),mt(this,"_opacity",1),mt(this,"_visible",!0),mt(this,"_cap","round"),mt(this,"_join","round"),mt(this,"_miter",4),mt(this,"_closed",!0),mt(this,"_curved",!1),mt(this,"_automatic",!0),mt(this,"_beginning",0),mt(this,"_ending",1),mt(this,"_mask",null),mt(this,"_clip",!1),mt(this,"_dashes",null);for(let e in xi)Object.defineProperty(this,e,xi[e]);this._renderer.type="path",this._renderer.flagVertices=wi.bind(this),this._renderer.bindVertices=ki.bind(this),this._renderer.unbindVertices=Si.bind(this),this._renderer.flagFill=Ei.bind(this),this._renderer.flagStroke=Mi.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this.closed=!!t,this.curved=!!n,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=e,this.automatic=!i,this.dashes=[],this.dashes.offset=0}clone(e){const t=new vi;for(let e=0;e<this.vertices.length;e++)t.vertices.push(this.vertices[e].clone());for(let e=0;e<vi.Properties.length;e++){const n=vi.Properties[e];t[n]=this[n]}return t.className=this.className,t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e={vertices:this.vertices.map((function(e){return e.toObject()}))};return en.each(vi.Properties,(function(t){void 0!==this[t]&&(this[t].toObject?e[t]=this[t].toObject():e[t]=this[t])}),this),e.className=this.className,e.translation=this.translation.toObject(),e.rotation=this.rotation,e.scale=this.scale instanceof Lt?this.scale.toObject():this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&(e.matrix=this.matrix.toObject()),e}noFill(){return this.fill="transparent",this}noStroke(){return this.stroke=void 0,this}corner(){const e=this.getBoundingClientRect(!0),t=e.width/2,n=e.height/2,i=e.left+e.width/2,r=e.top+e.height/2;for(let e=0;e<this.vertices.length;e++){const s=this.vertices[e];s.x-=i,s.y-=r,s.x+=t,s.y+=n}return this.mask&&(this.mask.translation.x-=i,this.mask.translation.x+=t,this.mask.translation.y-=r,this.mask.translation.y+=n),this}center(){const e=this.getBoundingClientRect(!0),t=e.left+e.width/2-this.translation.x,n=e.top+e.height/2-this.translation.y;for(let e=0;e<this.vertices.length;e++){const i=this.vertices[e];i.x-=t,i.y-=n}return this.mask&&(this.mask.translation.x-=t,this.mask.translation.y-=n),this}getBoundingClientRect(e){let t,n,i,r,s,o,a,l,c,h,u,f,d,p,g=1/0,m=-1/0,_=1/0,y=-1/0;if(this._update(!0),t=e?this._matrix:kt(this),n=(this.linewidth||0)/2,i=this._renderer.vertices.length,i<=0)return{width:0,height:0};for(r=0;r<i;r++)if(o=this._renderer.vertices[r],s=this._renderer.vertices[(r+i-1)%i],s.controls&&o.controls){a=s.controls.right.x,l=s.controls.right.y,s.relative&&(a+=s.x,l+=s.y),c=o.controls.left.x,h=o.controls.left.y,o.relative&&(c+=o.x,h+=o.y);const e=$t(s.x,s.y,a,l,c,h,o.x,o.y);_=pi(e.min.y-n,_),g=pi(e.min.x-n,g),m=gi(e.max.x+n,m),y=gi(e.max.y+n,y)}else r<=1&&(_=pi(s.y-n,_),g=pi(s.x-n,g),m=gi(s.x+n,m),y=gi(s.y+n,y)),_=pi(o.y-n,_),g=pi(o.x-n,g),m=gi(o.x+n,m),y=gi(o.y+n,y);return u=t.multiply(g,_,1),f=t.multiply(g,y,1),d=t.multiply(m,_,1),p=t.multiply(m,y,1),_=pi(u.y,f.y,d.y,p.y),g=pi(u.x,f.x,d.x,p.x),m=gi(u.x,f.x,d.x,p.x),y=gi(u.y,f.y,d.y,p.y),{top:_,left:g,right:m,bottom:y,width:m-g,height:y-_}}getPointAt(e,t){let n,i,r,s,o,a,l,c,h,u,f,d,p,g,m,_=this.length*Math.min(Math.max(e,0),1);const y=this.vertices.length,v=y-1;let b=null,x=null;for(let t=0,r=this._lengths.length,s=0;t<r;t++){if(s+this._lengths[t]>=_){this._closed?(n=Rt(t,y),i=Rt(t-1,y),0===t&&(n=i,i=t)):(n=t,i=Math.min(Math.max(t-1,0),v)),b=this.vertices[n],x=this.vertices[i],_-=s,e=0!==this._lengths[t]?_/this._lengths[t]:0;break}s+=this._lengths[t]}if(null===b||null===x)return null;if(!b)return x;if(!x)return b;m=x.controls&&x.controls.right,g=b.controls&&b.controls.left,o=x.x,u=x.y,a=(m||x).x,f=(m||x).y,l=(g||b).x,d=(g||b).y,c=b.x,p=b.y,m&&x.relative&&(a+=x.x,f+=x.y),g&&b.relative&&(l+=b.x,d+=b.y),s=Ht(e,o,a,l,c),h=Ht(e,u,f,d,p);const w=St(o,a,e),k=St(u,f,e),S=St(a,l,e),E=St(f,d,e),M=St(l,c,e),R=St(d,p,e),T=St(w,S,e),C=St(k,E,e),O=St(S,M,e),P=St(E,R,e);return en.isObject(t)?(t.x=s,t.y=h,t instanceof It&&(t.controls.left.x=T,t.controls.left.y=C,t.controls.right.x=O,t.controls.right.y=P,("boolean"!=typeof t.relative||t.relative)&&(t.controls.left.x-=s,t.controls.left.y-=h,t.controls.right.x-=s,t.controls.right.y-=h)),t.t=e,t):(r=new It(s,h,T-s,C-h,O-s,P-h,this._curved?_t.curve:_t.line),r.t=e,r)}plot(){if(this.curved)return Xt(this._collection,this.closed),this;for(let e=0;e<this._collection.length;e++)this._collection[e].command=0===e?_t.move:_t.line;return this}subdivide(e){this._update();const t=this.vertices.length-1,n=this._closed||this.vertices[t]._command===_t.close;let i,r=this.vertices[t],s=[];return en.each(this.vertices,(function(o,a){if(a<=0&&!n)r=o;else{if(o.command===_t.move)return s.push(new It(r.x,r.y)),a>0&&(s[s.length-1].command=_t.line),void(r=o);i=Hn(o,r,e),s=s.concat(i),en.each(i,(function(e,t){t<=0&&r.command===_t.move?e.command=_t.move:e.command=_t.line})),a>=t&&(this._closed&&this._automatic?(r=o,i=Hn(o,r,e),s=s.concat(i),en.each(i,(function(e,t){t<=0&&r.command===_t.move?e.command=_t.move:e.command=_t.line}))):n&&s.push(new It(o.x,o.y)),s[s.length-1].command=n?_t.close:_t.line),r=o}}),this),this._automatic=!1,this._curved=!1,this.vertices=s,this}_updateLength(e,t){t||this._update();const n=this.vertices.length-1;let i=this.vertices[n],r=0;return void 0===this._lengths&&(this._lengths=[]),en.each(this.vertices,(function(t,n){if(n<=0||t.command===_t.move)return i=t,void(this._lengths[n]=0);this._lengths[n]=Vn(t,i,e),r+=this._lengths[n],i=t}),this),this._length=r,this._flagLength=!1,this}_update(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);const e=this._collection.length,t=this._closed,n=Math.min(this._beginning,this._ending),i=Math.max(this._beginning,this._ending),r=Bn(this,n*this._length),s=Bn(this,i*this._length),o=mi(r),a=_i(s);let l,c,h,u,f,d;for(this._renderer.vertices.length=0,d=0;d<e;d++)this._renderer.collection.length<=d&&this._renderer.collection.push(new It),d>a&&!c?(f=this._renderer.collection[d].copy(this._collection[d]),this.getPointAt(i,f),f.command=this._renderer.collection[d].command,this._renderer.vertices.push(f),c=f,h=this._collection[d-1],h&&h.controls&&(f.relative?f.controls.right.clear():f.controls.right.copy(f),h.relative?this._renderer.collection[d-1].controls.right.copy(h.controls.right).lerp(Lt.zero,1-f.t):this._renderer.collection[d-1].controls.right.copy(h.controls.right).lerp(h,1-f.t))):d>=o&&d<=a&&(f=this._renderer.collection[d].copy(this._collection[d]),this._renderer.vertices.push(f),d===a&&Dn(this,i)?(c=f,!t&&c.controls&&(c.relative?c.controls.right.clear():c.controls.right.copy(c))):d===o&&Dn(this,n)&&(l=f,l.command=_t.move,!t&&l.controls&&(l.relative?l.controls.left.clear():l.controls.left.copy(l))));o>0&&!l&&(d=o-1,f=this._renderer.collection[d].copy(this._collection[d]),this.getPointAt(n,f),f.command=_t.move,this._renderer.vertices.unshift(f),u=this._collection[d+1],u&&u.controls&&(f.controls.left.clear(),u.relative?this._renderer.collection[d+1].controls.left.copy(u.controls.left).lerp(Lt.zero,f.t):(yi.copy(u),this._renderer.collection[d+1].controls.left.copy(u.controls.left).lerp(u,f.t))))}return hn.prototype._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,hn.prototype.flagReset.call(this),this}},bi=vi;mt(bi,"Properties",["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"]),mt(bi,"Utils",{getCurveLength:Vn});var xi={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._visible=e,this._flagVisible=!0}},cap:{enumerable:!0,get:function(){return this._cap},set:function(e){this._cap=e,this._flagCap=!0}},join:{enumerable:!0,get:function(){return this._join},set:function(e){this._join=e,this._flagJoin=!0}},miter:{enumerable:!0,get:function(){return this._miter},set:function(e){this._miter=e,this._flagMiter=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof Xn||this._fill instanceof Zn||this._fill instanceof ii||this._fill instanceof hi)&&this._fill.unbind(At.Types.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof Xn||this._fill instanceof Zn||this._fill instanceof ii||this._fill instanceof hi)&&this._fill.bind(At.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof Xn||this._stroke instanceof Zn||this._stroke instanceof ii||this._stroke instanceof hi)&&this._stroke.unbind(At.Types.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof Xn||this._stroke instanceof Zn||this._stroke instanceof ii||this._stroke instanceof hi)&&this._stroke.bind(At.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},closed:{enumerable:!0,get:function(){return this._closed},set:function(e){this._closed=!!e,this._flagVertices=!0}},curved:{enumerable:!0,get:function(){return this._curved},set:function(e){this._curved=!!e,this._flagVertices=!0}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(e){if(e===this._automatic)return;this._automatic=!!e;const t=this._automatic?"ignore":"listen";en.each(this.vertices,(function(e){e[t]()}))}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(e){this._beginning=e,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(e){this._ending=e,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(e){const t=this._renderer.bindVertices,n=this._renderer.unbindVertices;this._collection&&this._collection.unbind(At.Types.insert,t).unbind(At.Types.remove,n),this._collection=e instanceof dn?e:new dn(e||[]),this._collection.bind(At.Types.insert,t).bind(At.Types.remove,n),t(this._collection)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,en.isObject(e)&&!e.clip&&(e.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(e){"number"!=typeof e.offset&&(e.offset=this.dashes&&this._dashes.offset||0),this._dashes=e}}};function wi(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)}function ki(e){let t=e.length;for(;t--;)e[t].bind(At.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function Si(e){let t=e.length;for(;t--;)e[t].unbind(At.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function Ei(){this._flagFill=!0}function Mi(){this._flagStroke=!0}var Ri=class extends bi{constructor(e,t,n,i){super([new It,new It,new It,new It],!0,!1,!0),mt(this,"_flagWidth",0),mt(this,"_flagHeight",0),mt(this,"_width",0),mt(this,"_height",0),mt(this,"_origin",null);for(let e in Ci)Object.defineProperty(this,e,Ci[e]);this.width="number"==typeof n?n:1,this.height="number"==typeof i?i:1,this.origin=new Lt,"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t),this._update()}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){const e=this._width/2,t=this._height/2;this._closed||4!==this.vertices.length||this.vertices.push(new It),this.vertices[0].set(-e,-t).sub(this._origin).command=_t.move,this.vertices[1].set(e,-t).sub(this._origin).command=_t.line,this.vertices[2].set(e,t).sub(this._origin).command=_t.line,this.vertices[3].set(-e,t).sub(this._origin).command=_t.line,this.vertices[4]&&(this.vertices[4].set(-e,-t).sub(this._origin).command=_t.line)}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(e){const t=new Ri(0,0,this.width,this.height);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix);for(let e=0;e<bi.Properties.length;e++){const n=bi.Properties[e];t[n]=this[n]}return e&&e.add(t),t}toObject(){const e=super.toObject.call(this);return e.width=this.width,e.height=this.height,e.origin=this.origin.toObject(),e}},Ti=Ri;mt(Ti,"Properties",["width","height"]);var Ci={width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0}},origin:{enumerable:!0,get:function(){return this._origin},set:function(e){this._origin&&this._origin.unbind(At.Types.change,this._renderer.flagVertices),this._origin=e,this._origin.bind(At.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}}},Oi=class extends Ti{constructor(e,t,n,i,r,s){super(t,n,0,0),mt(this,"_flagTexture",!1),mt(this,"_flagColumns",!1),mt(this,"_flagRows",!1),mt(this,"_flagFrameRate",!1),mt(this,"_flagIndex",!1),mt(this,"_amount",1),mt(this,"_duration",0),mt(this,"_startTime",0),mt(this,"_playing",!1),mt(this,"_firstFrame",0),mt(this,"_lastFrame",0),mt(this,"_loop",!0),mt(this,"_texture",null),mt(this,"_columns",1),mt(this,"_rows",1),mt(this,"_frameRate",0),mt(this,"_index",0),mt(this,"_origin",null);for(let e in Ai)Object.defineProperty(this,e,Ai[e]);this.noStroke(),this.noFill(),e instanceof hi?this.texture=e:"string"==typeof e&&(this.texture=new hi(e)),this.origin=new Lt,this._update(),"number"==typeof i&&(this.columns=i),"number"==typeof r&&(this.rows=r),"number"==typeof s&&(this.frameRate=s),this.index=0}play(e,t,n){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=en.performance.now(),"number"==typeof e&&(this._firstFrame=e),"number"==typeof t&&(this._lastFrame=t),"function"==typeof n?this._onLastFrame=n:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=0,this}clone(e){const t=new Oi(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(t.play(this._firstFrame,this._lastFrame),t._loop=this._loop),e&&e.add(t),t}toObject(){const e=super.toObject.call(this);return e.texture=this.texture.toObject(),e.columns=this.columns,e.rows=this.rows,e.frameRate=this.frameRate,e.index=this.index,e._firstFrame=this._firstFrame,e._lastFrame=this._lastFrame,e._loop=this._loop,e}_update(){const e=this._texture,t=this._columns,n=this._rows;let i,r,s,o,a,l,c,h,u;if(e&&((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=e),e.loaded)){c=e.image.width,h=e.image.height,i=c/t,r=h/n,o=this._amount,this.width!==i&&(this.width=i),this.height!==r&&(this.height=r),this._playing&&this._frameRate>0&&(en.isNaN(this._lastFrame)&&(this._lastFrame=o-1),s=en.performance.now()-this._startTime,u=this._lastFrame+1,a=1e3*(u-this._firstFrame)/this._frameRate,this._loop?s%=a:s=Math.min(s,a),l=St(this._firstFrame,u,s/a),l=Math.floor(l),l!==this._index&&(this._index=l,l>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));const f=-i*(this._index%t)+(c-i)/2,d=-r*Math.floor(this._index/t)+(h-r)/2;f!==e.offset.x&&(e.offset.x=f),d!==e.offset.y&&(e.offset.y=d)}return super._update.call(this),this}flagReset(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,super.flagReset.call(this),this}},Pi=Oi;mt(Pi,"Properties",["texture","columns","rows","frameRate","index"]);var Ai={texture:{enumerable:!0,get:function(){return this._texture},set:function(e){this._texture=e,this._flagTexture=!0}},columns:{enumerable:!0,get:function(){return this._columns},set:function(e){this._columns=e,this._flagColumns=!0}},rows:{enumerable:!0,get:function(){return this._rows},set:function(e){this._rows=e,this._flagRows=!0}},frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(e){this._frameRate=e,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(e){this._index=e,this._flagIndex=!0}}},ji=Math.cos,Fi=Math.sin,Li=class extends bi{constructor(e,t,n,i){const r=i?Math.max(i,2):4,s=[];for(let e=0;e<r;e++)s.push(new It(0,0,0,0,0,0));super(s,!0,!0,!0),mt(this,"_flagRadius",!1),mt(this,"_radius",0);for(let e in zi)Object.defineProperty(this,e,zi[e]);"number"==typeof n&&(this.radius=n),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}_update(){if(this._flagVertices||this._flagRadius){let e=this.vertices.length;!this._closed&&e>2&&(e-=1);const t=4/3*Math.tan(Math.PI/(2*e)),n=this._radius,i=n*t;for(let t=0;t<this.vertices.length;t++){const r=t/e*vt,s=n*ji(r),o=n*Fi(r),a=i*ji(r-bt),l=i*Fi(r-bt),c=i*ji(r+bt),h=i*Fi(r+bt),u=this.vertices[t];u.command=0===t?_t.move:_t.curve,u.set(s,o),u.controls.left.set(a,l),u.controls.right.set(c,h)}}return super._update.call(this),this}flagReset(){return this._flagRadius=!1,super.flagReset.call(this),this}clone(e){const t=new Li(0,0,this.radius,this.vertices.length);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix);for(let e=0;e<bi.Properties.length;e++){const n=bi.Properties[e];t[n]=this[n]}return e&&e.add(t),t}toObject(){const e=super.toObject.call(this);for(let t=0;t<Li.Properties.length;t++){const n=Li.Properties[t];e[n]=this[n]}return e}},Ii=Li;mt(Ii,"Properties",["radius"]);var zi={radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius=e,this._flagRadius=!0}}},Ni=Math.cos,Di=Math.sin,Bi=class extends bi{constructor(e,t,n,i,r){"number"!=typeof i&&"number"==typeof n&&(i=n);const s=r?Math.max(r,2):4,o=[];for(let e=0;e<s;e++)o.push(new It);super(o,!0,!0,!0),mt(this,"_flagWidth",!1),mt(this,"_flagHeight",!1),mt(this,"_width",0),mt(this,"_height",0);for(let e in Hi)Object.defineProperty(this,e,Hi[e]);"number"==typeof n&&(this.width=2*n),"number"==typeof i&&(this.height=2*i),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){let e=this.vertices.length;!this._closed&&e>2&&(e-=1);const t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),n=this._width/2,i=this._height/2;for(let r=0;r<this.vertices.length;r++){const s=r/e*vt,o=n*Ni(s),a=i*Di(s),l=n*t*Ni(s-bt),c=i*t*Di(s-bt),h=n*t*Ni(s+bt),u=i*t*Di(s+bt),f=this.vertices[r];f.command=0===r?_t.move:_t.curve,f.set(o,a),f.controls.left.set(l,c),f.controls.right.set(h,u)}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(e){const t=this.width/2,n=this.height/2,i=this.vertices.length,r=new Bi(0,0,t,n,i);r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix);for(let e=0;e<bi.Properties.length;e++){const t=bi.Properties[e];r[t]=this[t]}return e&&e.add(r),r}toObject(){const e=super.toObject.call(this);for(let t=0;t<Bi.Properties.length;t++){const n=Bi.Properties[t];e[n]=this[n]}return e}},Vi=Bi;mt(Vi,"Properties",["width","height"]);var Hi={width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0}}},Ui=class extends bi{constructor(e,t,n,i){super([new It(e,t),new It(n,i)]);for(let e in Wi)Object.defineProperty(this,e,Wi[e]);this.vertices[0].command=_t.move,this.vertices[1].command=_t.line,this.automatic=!1}},Wi={left:{enumerable:!0,get:function(){return this.vertices[0]},set:function(e){if(en.isObject(e))this.vertices.splice(0,1,e);else{const e=new zn("Two.Line.x argument is not an object.");console.warn(e.name,e.message)}}},right:{enumerable:!0,get:function(){return this.vertices[0]},set:function(e){if(en.isObject(e))this.vertices.splice(1,1,e);else{const e=new zn("Two.Line.y argument is not an object.");console.warn(e.name,e.message)}}}},$i=class extends bi{constructor(e,t,n,i,r){void 0===r&&"number"==typeof n&&"number"==typeof i&&(r=Math.floor(Math.min(n,i)/12));const s=[];for(let e=0;e<10;e++)s.push(new It(0,0,0,0,0,0,0===e?_t.move:_t.curve));super(s),mt(this,"_flagWidth",!1),mt(this,"_flagHeight",!1),mt(this,"_flagRadius",!1),mt(this,"_width",0),mt(this,"_height",0),mt(this,"_radius",12);for(let e in Xi)Object.defineProperty(this,e,Xi[e]);this.closed=!0,this.automatic=!1,this._renderer.flagRadius=qi.bind(this),"number"==typeof n&&(this.width=n),"number"==typeof i&&(this.height=i),"number"==typeof r&&(this.radius=r),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagRadius){const e=this._width,t=this._height;let n,i,r;this._radius instanceof Lt?(n=this._radius.x,i=this._radius.y):(n=this._radius,i=this._radius);let s=e/2,o=t/2;r=this.vertices[0],r.x=-(s-n),r.y=-o,r=this.vertices[1],r.x=s-n,r.y=-o,r.controls.left.clear(),r.controls.right.x=n,r.controls.right.y=0,r=this.vertices[2],r.x=s,r.y=-(o-i),r.controls.right.clear(),r.controls.left.clear(),r=this.vertices[3],r.x=s,r.y=o-i,r.controls.left.clear(),r.controls.right.x=0,r.controls.right.y=i,r=this.vertices[4],r.x=s-n,r.y=o,r.controls.right.clear(),r.controls.left.clear(),r=this.vertices[5],r.x=-(s-n),r.y=o,r.controls.left.clear(),r.controls.right.x=-n,r.controls.right.y=0,r=this.vertices[6],r.x=-s,r.y=o-i,r.controls.left.clear(),r.controls.right.clear(),r=this.vertices[7],r.x=-s,r.y=-(o-i),r.controls.left.clear(),r.controls.right.x=0,r.controls.right.y=-i,r=this.vertices[8],r.x=-(s-n),r.y=-o,r.controls.left.clear(),r.controls.right.clear(),r=this.vertices[9],r.copy(this.vertices[8])}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,super.flagReset.call(this),this}clone(e){const t=this.width,n=this.height,i=this.radius,r=new $i(0,0,t,n,i);r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix);for(let e=0;e<bi.Properties.length;e++){const t=bi.Properties[e];r[t]=this[t]}return e&&e.add(r),r}toObject(){const e=super.toObject.call(this);for(let t=0;t<$i.Properties.length;t++){const n=$i.Properties[t];e[n]=this[n]}return e.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),e}},Yi=$i;mt(Yi,"Properties",["width","height","radius"]);var Xi={width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0}},radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius instanceof Lt&&this._radius.unbind(At.Types.change,this._renderer.flagRadius),this._radius=e,this._radius instanceof Lt&&this._radius.bind(At.Types.change,this._renderer.flagRadius),this._flagRadius=!0}}};function qi(){this._flagRadius=!0}var Ki=Math.min,Qi=Math.max,Gi=class extends hn{constructor(e,t,n,i){super(),mt(this,"_flagValue",!0),mt(this,"_flagFamily",!0),mt(this,"_flagSize",!0),mt(this,"_flagLeading",!0),mt(this,"_flagAlignment",!0),mt(this,"_flagBaseline",!0),mt(this,"_flagStyle",!0),mt(this,"_flagWeight",!0),mt(this,"_flagDecoration",!0),mt(this,"_flagFill",!0),mt(this,"_flagStroke",!0),mt(this,"_flagLinewidth",!0),mt(this,"_flagOpacity",!0),mt(this,"_flagVisible",!0),mt(this,"_flagMask",!1),mt(this,"_flagClip",!1),mt(this,"_value",""),mt(this,"_family","sans-serif"),mt(this,"_size",13),mt(this,"_leading",17),mt(this,"_alignment","center"),mt(this,"_baseline","middle"),mt(this,"_style","normal"),mt(this,"_weight",500),mt(this,"_decoration","none"),mt(this,"_fill","#000"),mt(this,"_stroke","transparent"),mt(this,"_linewidth",1),mt(this,"_opacity",1),mt(this,"_visible",!0),mt(this,"_mask",null),mt(this,"_clip",!1),mt(this,"_dashes",null);for(let e in Zi)Object.defineProperty(this,e,Zi[e]);if(this._renderer.type="text",this._renderer.flagFill=er.bind(this),this._renderer.flagStroke=tr.bind(this),this.value=e,"number"==typeof t&&(this.translation.x=t),"number"==typeof n&&(this.translation.y=n),this.dashes=[],this.dashes.offset=0,!en.isObject(i))return this;for(let e=0;e<Gi.Properties.length;e++){const t=Gi.Properties[e];t in i&&(this[t]=i[t])}}clone(e){const t=new Gi(this.value);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale;for(let e=0;e<Gi.Properties.length;e++){const n=Gi.Properties[e];t[n]=this[n]}return this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};this.matrix.manual&&(e.matrix=this.matrix.toObject());for(let t=0;t<Gi.Properties.length;t++){const n=Gi.Properties[t];e[n]=this[n]}return e}noFill(){return this.fill="transparent",this}noStroke(){return this.stroke=void 0,this.linewidth=void 0,this}getBoundingClientRect(e){let t,n,i,r,s,o,a,l,c;this._update(!0),t=e?this._matrix:kt(this);const h=this.leading,u=this.value.length*this.size*Gi.Ratio,f=(this._linewidth||0)/2;switch(this.alignment){case"left":o=-f,a=u+f;break;case"right":o=-(u+f),a=f;break;default:o=-(u/2+f),a=u/2+f}switch(this.baseline){case"top":l=-f,c=h+f;break;case"bottom":l=-(h+f),c=f;break;default:l=-(h/2+f),c=h/2+f}return n=t.multiply(o,l,1),i=t.multiply(o,c,1),r=t.multiply(a,l,1),s=t.multiply(a,c,1),l=Ki(n.y,i.y,r.y,s.y),o=Ki(n.x,i.x,r.x,s.x),a=Qi(n.x,i.x,r.x,s.x),c=Qi(n.y,i.y,r.y,s.y),{top:l,left:o,right:a,bottom:c,width:a-o,height:c-l}}flagReset(){return super.flagReset.call(this),this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,this}},Ji=Gi;mt(Ji,"Ratio",.6),mt(Ji,"Properties",["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","fill","stroke"]);var Zi={value:{enumerable:!0,get:function(){return this._value},set:function(e){this._value=e,this._flagValue=!0}},family:{enumerable:!0,get:function(){return this._family},set:function(e){this._family=e,this._flagFamily=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(e){this._size=e,this._flagSize=!0}},leading:{enumerable:!0,get:function(){return this._leading},set:function(e){this._leading=e,this._flagLeading=!0}},alignment:{enumerable:!0,get:function(){return this._alignment},set:function(e){this._alignment=e,this._flagAlignment=!0}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e,this._flagLinewidth=!0}},style:{enumerable:!0,get:function(){return this._style},set:function(e){this._style=e,this._flagStyle=!0}},weight:{enumerable:!0,get:function(){return this._weight},set:function(e){this._weight=e,this._flagWeight=!0}},decoration:{enumerable:!0,get:function(){return this._decoration},set:function(e){this._decoration=e,this._flagDecoration=!0}},baseline:{enumerable:!0,get:function(){return this._baseline},set:function(e){this._baseline=e,this._flagBaseline=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._visible=e,this._flagVisible=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof Xn||this._fill instanceof Zn||this._fill instanceof ii||this._fill instanceof hi)&&this._fill.unbind(At.Types.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof Xn||this._fill instanceof Zn||this._fill instanceof ii||this._fill instanceof hi)&&this._fill.bind(At.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof Xn||this._stroke instanceof Zn||this._stroke instanceof ii||this._stroke instanceof hi)&&this._stroke.unbind(At.Types.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof Xn||this._stroke instanceof Zn||this._stroke instanceof ii||this._stroke instanceof hi)&&this._stroke.bind(At.Types.change,this._renderer.flagStroke)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,en.isObject(e)&&!e.clip&&(e.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(e){"number"!=typeof e.offset&&(e.offset=this.dashes&&this._dashes.offset||0),this._dashes=e}}};function er(){this._flagFill=!0}function tr(){this._flagStroke=!0}var nr={path:/[+-]?(?:\d*\.\d+|\d+)(?:[eE][+-]\d+)?/g,cssBackgroundImage:/url\(['"]?#([\w\d-_]*)['"]?\)/i,unitSuffix:/[a-zA-Z%]*/i},ir={start:"left",middle:"center",end:"right"},rr=["id","class","transform","xmlns","viewBox"],sr=["x","y","width","height","href","xlink:href"];function or(e){return e.replace(/svg:/gi,"").toLowerCase()}function ar(e,t){if(t.x+=e.translateX,t.y+=e.translateY,t.x*=e.scaleX,t.y*=e.scaleY,0!==e.rotation){const n=t.length();t.x=n*Math.cos(e.rotation),t.y=n*Math.sin(e.rotation)}}function lr(e,t){t||(t={});const n=e.split(";");for(let e=0;e<n.length;e++){const i=n[e].split(":"),r=i[0],s=i[1];void 0!==r&&void 0!==s&&(t[r]=s.replace(/\s/,""))}return t}function cr(e){const t={},n=function(e){const t=e.getAttributeNames();for(let e=0;e<rr.length;e++){const n=rr[e],i=Array.prototype.indexOf.call(t,n);i>=0&&t.splice(i,1)}return t}(e),i=Math.max(n.length,e.style.length);for(let r=0;r<i;r++){const i=e.style[r],s=n[r];i&&(t[i]=e.style[i]),s&&(t[s]=e.getAttribute(s))}return t}function hr(e,t,n){const i={},r={},s={};let o,a,l,c,h,u,f,d,p,g,m,_,y,v,b,x,w;if(ft.getComputedStyle){const t=ft.getComputedStyle(e);for(o=t.length;o--;)l=t[o],c=t[l],void 0!==c&&(i[l]=c)}for(o=0;o<e.attributes.length;o++)u=e.attributes[o],/style/i.test(u.nodeName)?lr(u.value,s):r[u.nodeName]=u.value;for(l in void 0!==i.opacity&&(i["stroke-opacity"]=i.opacity,i["fill-opacity"]=i.opacity,delete i.opacity),n&&en.defaults(i,n),en.extend(i,s,r),i.visible=!(void 0===i.display&&/none/i.test(i.display))||void 0===i.visibility&&/hidden/i.test(i.visibility),i)switch(c=i[l],l){case"gradientTransform":if(/none/i.test(c))break;if(a=e.gradientTransform&&e.gradientTransform.baseVal&&e.gradientTransform.baseVal.length>0?e.gradientTransform.baseVal[0].matrix:e.getCTM?e.getCTM():null,null===a)break;switch(f=xt(a),t._renderer.type){case"linear-gradient":ar(f,t.left),ar(f,t.right);break;case"radial-gradient":t.center.x+=f.translateX,t.center.y+=f.translateY,t.focal.x+=f.translateX,t.focal.y+=f.translateY,t.radius*=Math.max(f.scaleX,f.scaleY)}break;case"transform":if(/none/i.test(c))break;if(a=e.transform&&e.transform.baseVal&&e.transform.baseVal.length>0?e.transform.baseVal[0].matrix:e.getCTM?e.getCTM():null,null===a)break;f=xt(a),t.translation.set(f.translateX,f.translateY),t.rotation=Math.PI*(f.rotation/180),t.scale=new Lt(f.scaleX,f.scaleY),d=parseFloat((i.x+"").replace("px")),p=parseFloat((i.y+"").replace("px")),d&&(t.translation.x=d),p&&(t.translation.y=p);break;case"visible":if(t instanceof yn){t._visible=c;break}t.visible=c;break;case"stroke-linecap":if(t instanceof yn){t._cap=c;break}t.cap=c;break;case"stroke-linejoin":if(t instanceof yn){t._join=c;break}t.join=c;break;case"stroke-miterlimit":if(t instanceof yn){t._miter=c;break}t.miter=c;break;case"stroke-width":if(t instanceof yn){t._linewidth=parseFloat(c);break}t.linewidth=parseFloat(c);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(t instanceof yn){t._opacity=parseFloat(c);break}t.opacity=parseFloat(c);break;case"clip-path":if(nr.cssBackgroundImage.test(c)&&(g=c.replace(nr.cssBackgroundImage,"$1"),dr.defs.current&&dr.defs.current.contains(g)&&(_=dr.defs.current.get(g),_&&_.childNodes.length>0)))switch(_=_.childNodes[0],y=or(_.nodeName),t.mask=dr[y].call(this,_,{}),t._renderer.type){case"text":case"path":t.position.add(t.mask.position),t.mask.position.clear()}break;case"fill":case"stroke":h=(t instanceof yn?"_":"")+l,nr.cssBackgroundImage.test(c)?(g=c.replace(nr.cssBackgroundImage,"$1"),dr.defs.current&&dr.defs.current.contains(g)?(_=dr.defs.current.get(g),_.object||(y=or(_.nodeName),_.object=dr[y].call(this,_,{})),_=_.object):(m=fr(this),_=m.getById(g)),t[h]=_):t[h]=/none/i.test(c)?"transparent":c;break;case"id":t.id=c;break;case"class":case"className":t.classList=c.split(" "),t._flagClassName=!0;break;case"x":case"y":if(v=t instanceof Xn,b=t instanceof Zn,x=t instanceof ii,v||b||x)break;c.match("[a-z%]$")&&!c.endsWith("px")&&(w=new zn("only pixel values are supported with the "+l+" attribute."),console.warn(w.name,w.message)),t.translation[l]=parseFloat(c);break;case"font-family":t instanceof Ji&&(t.family=c);break;case"font-size":t instanceof Ji&&(t.size=c);break;case"font-weight":t instanceof Ji&&(t.weight=c);break;case"font-style":t instanceof Ji&&(t.style=c);break;case"text-decoration":t instanceof Ji&&(t.decoration=c);break;case"line-height":t instanceof Ji&&(t.leading=c)}return Object.keys(e.dataset).length&&(t.dataset=e.dataset),i}function ur(e,t){for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];i.id&&("#text"!==or(e.nodeName)&&t.add(i.id,i))}}function fr(e){for(;e.parent;)e=e.parent;return e.scene}var dr={svg:function(e){const t=dr.defs.current=new Nn,n=e.getElementsByTagName("defs");for(let e=0;e<n.length;e++)ur(n[e],t);const i=dr.g.call(this,e),r=e.getAttribute("viewBox"),s=e.getAttribute("x"),o=e.getAttribute("y"),a=e.getAttribute("width"),l=e.getAttribute("height");i.defs=t;const c=null!==r,h=null!==o,u=null!==a,f=null!==l;return null!==s&&(i.x=parseFloat(s.replace(nr.unitSuffix,""))),h&&(i.y=parseFloat(o.replace(nr.unitSuffix,""))),u&&(i.width=parseFloat(a.replace(nr.unitSuffix,""))),f&&(i.height=parseFloat(l.replace(nr.unitSuffix,""))),c&&function(e,t){const n=t.split(/[\s,]/),i=-parseFloat(n[0]),r=-parseFloat(n[1]),s=parseFloat(n[2]),o=parseFloat(n[3]);if(i&&r)for(let t=0;t<e.children.length;t++){const n=e.children[t];"translation"in n?n.translation.add(i,r):"x"in n?n.x=i:"y"in n&&(n.y=r)}const a="number"==typeof e.x,l="number"==typeof e.y,c="number"==typeof e.width,h="number"==typeof e.height;a&&(e.translation.x+=e.x),l&&(e.translation.y+=e.y),(c||h)&&(e.scale=new Lt(1,1)),c&&(e.scale.x=e.width/s),h&&(e.scale.y=e.height/o),e.mask=new Ti(0,0,s,o),e.mask.origin.set(-s/2,-o/2)}(i,r),delete dr.defs.current,i},defs:function(e){return null},use:function(e,t){let n;const i=e.getAttribute("href")||e.getAttribute("xlink:href");if(!i)return n=new zn("encountered <use /> with no href."),console.warn(n.name,n.message),null;const r=i.slice(1);if(!dr.defs.current.contains(r))return n=new zn("unable to find element for reference "+i+"."),console.warn(n.name,n.message),null;const s=dr.defs.current.get(r).cloneNode(!0);for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t],i=sr.includes(n.nodeName),r=!s.hasAttribute(n.nodeName);(i||r)&&s.setAttribute(n.nodeName,n.value)}const o=or(s.nodeName);return dr[o].call(this,s,t)},g:function(e,t){const n=new yn;hr.call(this,e,n,t),this.add(n);const i=cr.call(this,e);for(let t=0,r=e.childNodes.length;t<r;t++){const r=e.childNodes[t],s=r.nodeName;if(!s)return;const o=or(s);if(o in dr){const e=dr[o].call(n,r,i);e&&!e.parent&&n.add(e)}}return n},polygon:function(e,t){let n;n="string"==typeof e?e:e.getAttribute("points");const i=[];n.replace(/(-?[\d.eE-]+)[,|\s](-?[\d.eE-]+)/g,(function(e,t,n){i.push(new It(parseFloat(t),parseFloat(n)))}));const r=new bi(i,!0).noStroke();return r.fill="black",hr.call(this,e,r,t),r},polyline:function(e,t){const n=dr.polygon.call(this,e,t);return n.closed=!1,n},path:function(e,t){let n;n="string"==typeof e?e:e.getAttribute("d");let i=[],r=!1,s=!1;if(n){let e,t,o=new It,a=n.match(/[a-df-z][^a-df-z]*/gi);const l=a.length-1;en.each(a.slice(0),(function(e,t){const n=e.slice(1).trim().match(nr.path),i=e[0],r=i.toLowerCase();let s,o,l,c,h;const u=[];switch(0===t&&(a=[]),r){case"h":case"v":n.length>1&&(s=1);break;case"m":case"l":case"t":n.length>2&&(s=2);break;case"s":case"q":n.length>4&&(s=4);break;case"c":n.length>6&&(s=6);break;case"a":n.length>7&&(s=7)}if(s){for(o=0,l=n.length,h=0;o<l;o+=s){if(c=i,h>0)switch(i){case"m":c="l";break;case"M":c="L"}u.push(c+n.slice(o,o+s).join(" ")),h++}a=Array.prototype.concat.apply(a,u)}else a.push(e)})),en.each(a,(function(n,a){let c,h,u;const f=n[0],d=f.toLowerCase();let p,g,m,_,y,v,b,x,w,k,S,E,M,R,T,C,O;switch(t=n.slice(1).trim().match(nr.path),s=f===d,d){case"z":if(a>=l)r=!0;else{h=o.x,u=o.y,c=new It(h,u,void 0,void 0,void 0,void 0,_t.close);for(let e=i.length-1;e>=0;e--){const t=i[e];if(/m/i.test(t.command)){o=t;break}}}break;case"m":case"l":e=void 0,h=parseFloat(t[0]),u=parseFloat(t[1]),c=new It(h,u,void 0,void 0,void 0,void 0,/m/i.test(d)?_t.move:_t.line),s&&c.addSelf(o),o=c;break;case"h":case"v":k=/h/i.test(d)?"x":"y",S=/x/i.test(k)?"y":"x",c=new It(void 0,void 0,void 0,void 0,void 0,void 0,_t.line),c[k]=parseFloat(t[0]),c[S]=o[S],s&&(c[k]+=o[k]),o=c;break;case"c":case"s":p=o.x,g=o.y,e||(e=new Lt),/c/i.test(d)?(m=parseFloat(t[0]),_=parseFloat(t[1]),y=parseFloat(t[2]),v=parseFloat(t[3]),b=parseFloat(t[4]),x=parseFloat(t[5])):(w=Kt(o,e,s),m=w.x,_=w.y,y=parseFloat(t[0]),v=parseFloat(t[1]),b=parseFloat(t[2]),x=parseFloat(t[3])),s&&(m+=p,_+=g,y+=p,v+=g,b+=p,x+=g),o.controls.right.set(m-o.x,_-o.y),c=new It(b,x,y-b,v-x,void 0,void 0,_t.curve),o=c,e=c.controls.left;break;case"t":case"q":p=o.x,g=o.y,e||(e=new Lt),/q/i.test(d)?(m=parseFloat(t[0]),_=parseFloat(t[1]),y=parseFloat(t[0]),v=parseFloat(t[1]),b=parseFloat(t[2]),x=parseFloat(t[3])):(w=Kt(o,e,s),m=w.x,_=w.y,y=w.x,v=w.y,b=parseFloat(t[0]),x=parseFloat(t[1])),s&&(m+=p,_+=g,y+=p,v+=g,b+=p,x+=g),o.controls.right.set(.33*(m-o.x),.33*(_-o.y)),c=new It(b,x,y-b,v-x,void 0,void 0,_t.curve),o=c,e=c.controls.left;break;case"a":p=o.x,g=o.y,M=parseFloat(t[0]),R=parseFloat(t[1]),T=parseFloat(t[2]),C=parseFloat(t[3]),O=parseFloat(t[4]),b=parseFloat(t[5]),x=parseFloat(t[6]),s&&(b+=p,x+=g),E=new It(b,x),E.command=_t.arc,E.rx=M,E.ry=R,E.xAxisRotation=T,E.largeArcFlag=C,E.sweepFlag=O,c=E,o=E,e=void 0}c&&(Array.isArray(c)?i=i.concat(c):i.push(c))}))}n=new bi(i,r,void 0,!0).noStroke(),n.fill="black";const o=n.getBoundingClientRect(!0);return o.centroid={x:o.left+o.width/2,y:o.top+o.height/2},en.each(n.vertices,(function(e){e.subSelf(o.centroid)})),hr.call(this,e,n,t),n.translation.addSelf(o.centroid),n},circle:function(e,t){const n=parseFloat(e.getAttribute("cx")),i=parseFloat(e.getAttribute("cy")),r=parseFloat(e.getAttribute("r")),s=new Ii(0,0,r).noStroke();return s.fill="black",hr.call(this,e,s,t),s.translation.x=n,s.translation.y=i,s},ellipse:function(e,t){const n=parseFloat(e.getAttribute("cx")),i=parseFloat(e.getAttribute("cy")),r=parseFloat(e.getAttribute("rx")),s=parseFloat(e.getAttribute("ry")),o=new Vi(0,0,r,s).noStroke();return o.fill="black",hr.call(this,e,o,t),o.translation.x=n,o.translation.y=i,o},rect:function(e,t){const n=parseFloat(e.getAttribute("rx")),i=parseFloat(e.getAttribute("ry"));if(!en.isNaN(n)||!en.isNaN(i))return dr["rounded-rect"](e);const r=parseFloat(e.getAttribute("width")),s=parseFloat(e.getAttribute("height")),o=r/2,a=s/2,l=new Ti(0,0,r,s).noStroke();return l.fill="black",hr.call(this,e,l,t),l.translation.x+=o,l.translation.y+=a,l},"rounded-rect":function(e,t){const n=parseFloat(e.getAttribute("rx"))||0,i=parseFloat(e.getAttribute("ry"))||0,r=parseFloat(e.getAttribute("width")),s=parseFloat(e.getAttribute("height")),o=r/2,a=s/2,l=new Lt(n,i),c=new Yi(0,0,r,s,l).noStroke();return c.fill="black",hr.call(this,e,c,t),c.translation.x+=o,c.translation.y+=a,c},line:function(e,t){const n=parseFloat(e.getAttribute("x1")),i=parseFloat(e.getAttribute("y1")),r=parseFloat(e.getAttribute("x2")),s=parseFloat(e.getAttribute("y2")),o=new Ui(n,i,r,s).noFill();return hr.call(this,e,o,t),o},lineargradient:function(e,t){let n=e.getAttribute("gradientUnits"),i=e.getAttribute("spreadMethod");n||(n="objectBoundingBox"),i||(i="pad");let r=parseFloat(e.getAttribute("x1")||0),s=parseFloat(e.getAttribute("y1")||0),o=parseFloat(e.getAttribute("x2")||0),a=parseFloat(e.getAttribute("y2")||0);const l=(o+r)/2,c=(a+s)/2;/userSpaceOnUse/i.test(n)&&(r-=l,s-=c,o-=l,a-=c);const h=[];for(let t=0;t<e.children.length;t++){const n=e.children[t];let i=n.getAttribute("offset");/%/gi.test(i)&&(i=parseFloat(i.replace(/%/gi,""))/100),i=parseFloat(i);let r,s=n.getAttribute("stop-color"),o=n.getAttribute("stop-opacity"),a=n.getAttribute("style");null===s&&(r=!!a&&a.match(/stop-color:\s?([#a-fA-F0-9]*)/),s=r&&r.length>1?r[1]:void 0),null===o?(r=!!a&&a.match(/stop-opacity:\s?([0-9.-]*)/),o=r&&r.length>1?parseFloat(r[1]):1):o=parseFloat(o),h.push(new Wn(i,s,o))}const u=new Zn(r,s,o,a,h);return u.spread=i,u.units=n,hr.call(this,e,u,t),u},radialgradient:function(e,t){let n=e.getAttribute("gradientUnits"),i=e.getAttribute("spreadMethod");n||(n="objectBoundingBox"),i||(i="pad");let r=parseFloat(e.getAttribute("cx"))||0,s=parseFloat(e.getAttribute("cy"))||0,o=parseFloat(e.getAttribute("r")),a=parseFloat(e.getAttribute("fx")),l=parseFloat(e.getAttribute("fy"));en.isNaN(a)&&(a=r),en.isNaN(l)&&(l=s);const c=Math.abs(r+a)/2,h=Math.abs(s+l)/2;/userSpaceOnUse/i.test(n)&&(r-=c,s-=h,a-=c,l-=h);const u=[];for(let t=0;t<e.children.length;t++){const n=e.children[t];let i=n.getAttribute("offset");/%/gi.test(i)&&(i=parseFloat(i.replace(/%/gi,""))/100),i=parseFloat(i);let r,s=n.getAttribute("stop-color"),o=n.getAttribute("stop-opacity"),a=n.getAttribute("style");null===s&&(r=!!a&&a.match(/stop-color:\s?([#a-fA-F0-9]*)/),s=r&&r.length>1?r[1]:void 0),null===o?(r=!!a&&a.match(/stop-opacity:\s?([0-9.-]*)/),o=r&&r.length>1?parseFloat(r[1]):1):o=parseFloat(o),u.push(new Wn(i,s,o))}const f=new ii(r,s,o,u,a,l);return f.spread=i,f.units=n,hr.call(this,e,f,t),f},text:function(e,t){const n=(i=e.getAttribute("text-anchor"),ir[i]||"left");var i;const r=function(e){const t=e.getAttribute("dominant-baseline"),n=e.getAttribute("alignment-baseline");return t||n}(e)||"baseline",s=e.textContent,o=new Ji(s);return hr.call(this,e,o,t),o.alignment=n,o.baseline=r,o},clippath:function(e,t){return dr.defs.current&&!dr.defs.current.contains(e.id)&&dr.defs.current.add(e.id,e),null},image:function(e,t){let n;const i=e.getAttribute("href")||e.getAttribute("xlink:href");if(!i)return n=new zn("encountered <image /> with no href."),console.warn(n.name,n.message),null;const r=parseFloat(e.getAttribute("x"))||0,s=parseFloat(e.getAttribute("y"))||0,o=parseFloat(e.getAttribute("width")),a=parseFloat(e.getAttribute("height")),l=new Pi(i,r,s);return en.isNaN(o)||(l.width=o),en.isNaN(a)||(l.height=a),hr.call(this,e,l,t),l}};function pr(e,t){const n=new XMLHttpRequest;return n.open("GET",e),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&t(n.responseText)},n.send(),n}var gr=class extends Ti{constructor(e,t,n,i){super(t,n,0,0),mt(this,"_flagTextures",!1),mt(this,"_flagFrameRate",!1),mt(this,"_flagIndex",!1),mt(this,"_amount",1),mt(this,"_duration",0),mt(this,"_index",0),mt(this,"_startTime",0),mt(this,"_playing",!1),mt(this,"_firstFrame",0),mt(this,"_lastFrame",0),mt(this,"_loop",!0),mt(this,"_textures",null),mt(this,"_frameRate",0),mt(this,"_origin",null);for(let e in _r)Object.defineProperty(this,e,_r[e]);this._renderer.flagTextures=yr.bind(this),this._renderer.bindTextures=vr.bind(this),this._renderer.unbindTextures=br.bind(this),this.noStroke(),this.noFill(),Array.isArray(e)?this.textures=e.map(xr.bind(this)):this.textures=[xr(e)],this.origin=new Lt,this._update(),this.frameRate="number"==typeof i?i:gr.DefaultFrameRate,this.index=0}play(e,t,n){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=en.performance.now(),"number"==typeof e&&(this._firstFrame=e),"number"==typeof t&&(this._lastFrame=t),"function"==typeof n?this._onLastFrame=n:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=this._firstFrame,this}clone(e){const t=new gr(this.textures,this.translation.x,this.translation.y,this.frameRate);return t._loop=this._loop,this._playing&&t.play(),e&&e.add(t),t}toObject(){const e=super.toObject.call(this);return e.textures=this.textures.map((function(e){return e.toObject()})),e.frameRate=this.frameRate,e.index=this.index,e._firstFrame=this._firstFrame,e._lastFrame=this._lastFrame,e._loop=this._loop,e}_update(){const e=this._textures;let t,n,i,r,s,o,a,l;return e&&(this._flagTextures&&(this._amount=e.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(r=this._amount,en.isNaN(this._lastFrame)&&(this._lastFrame=r-1),i=en.performance.now()-this._startTime,l=this._lastFrame+1,s=1e3*(l-this._firstFrame)/this._frameRate,this._loop?i%=s:i=Math.min(i,s),a=St(this._firstFrame,l,i/s),a=Math.floor(a),a!==this._index&&(this._index=a,o=e[this._index],o.loaded&&(t=o.image.width,n=o.image.height,this.width!==t&&(this.width=t),this.height!==n&&(this.height=n),this.fill=o,a>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof hi||(o=e[this._index],o.loaded&&(t=o.image.width,n=o.image.height,this.width!==t&&(this.width=t),this.height!==n&&(this.height=n)),this.fill=o)),super._update.call(this),this}flagReset(){return this._flagTextures=this._flagFrameRate=!1,super.flagReset.call(this),this}},mr=gr;mt(mr,"Properties",["textures","frameRate","index"]),mt(mr,"DefaultFrameRate",30);var _r={frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(e){this._frameRate=e,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(e){this._index=e,this._flagIndex=!0}},textures:{enumerable:!0,get:function(){return this._textures},set:function(e){const t=this._renderer.bindTextures,n=this._renderer.unbindTextures;this._textures&&this._textures.unbind(At.Types.insert,t).unbind(At.Types.remove,n),this._textures=new dn((e||[]).slice(0)),this._textures.bind(At.Types.insert,t).bind(At.Types.remove,n),t(this._textures)}}};function yr(){this._flagTextures=!0}function vr(e){let t=e.length;for(;t--;)e[t].bind(At.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function br(e){let t=e.length;for(;t--;)e[t].unbind(At.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function xr(e){return e instanceof hi?e:"string"==typeof e?new hi(e):void 0}var wr=class extends bi{constructor(e,t,n,i,r,s,o){const a=o||36,l=[];for(let e=0;e<a;e++)l.push(new It);super(l,!0,!1,!0),mt(this,"_flagStartAngle",!1),mt(this,"_flagEndAngle",!1),mt(this,"_flagInnerRadius",!1),mt(this,"_flagOuterRadius",!1),mt(this,"_startAngle",0),mt(this,"_endAngle",vt),mt(this,"_innerRadius",0),mt(this,"_outerRadius",0);for(let e in Sr)Object.defineProperty(this,e,Sr[e]);"number"==typeof n&&(this.innerRadius=n),"number"==typeof i&&(this.outerRadius=i),"number"==typeof r&&(this.startAngle=r),"number"==typeof s&&(this.endAngle=s),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}_update(){if(this._flagVertices||this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){const e=this._startAngle,t=this._endAngle,n=this._innerRadius,i=this._outerRadius,r=Rt(e,vt)===Rt(t,vt),s=n>0,o=this.vertices;let a,l,c,h,u,f,d,p,g,m,_=s?o.length/2:o.length,y=0;for(r?_--:s||(_-=2),l=0,c=_-1;l<_;l++)h=l/c,u=o[y],f=h*(t-e)+e,d=(t-e)/_,p=i*Math.cos(f),g=i*Math.sin(f),a=0===l?_t.move:_t.curve,u.command=a,u.x=p,u.y=g,u.controls.left.clear(),u.controls.right.clear(),u.command===_t.curve&&(m=i*d/Math.PI,u.controls.left.x=m*Math.cos(f-bt),u.controls.left.y=m*Math.sin(f-bt),u.controls.right.x=m*Math.cos(f+bt),u.controls.right.y=m*Math.sin(f+bt),1===l&&u.controls.left.multiplyScalar(2),l===c&&u.controls.right.multiplyScalar(2)),y++;if(s){for(r?(o[y].command=_t.close,y++):(_--,c=_-1),l=0;l<_;l++)h=l/c,u=o[y],f=(1-h)*(t-e)+e,d=(t-e)/_,p=n*Math.cos(f),g=n*Math.sin(f),a=_t.curve,l<=0&&(a=r?_t.move:_t.line),u.command=a,u.x=p,u.y=g,u.controls.left.clear(),u.controls.right.clear(),u.command===_t.curve&&(m=n*d/Math.PI,u.controls.left.x=m*Math.cos(f+bt),u.controls.left.y=m*Math.sin(f+bt),u.controls.right.x=m*Math.cos(f-bt),u.controls.right.y=m*Math.sin(f-bt),1===l&&u.controls.left.multiplyScalar(2),l===c&&u.controls.right.multiplyScalar(2)),y++;o[y].copy(o[0]),o[y].command=_t.line}else r||(o[y].command=_t.line,o[y].x=0,o[y].y=0,y++,o[y].copy(o[0]),o[y].command=_t.line)}return super._update.call(this),this}flagReset(){return super.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}clone(e){const t=this.innerRadius,n=this.outerRadius,i=this.startAngle,r=this.endAngle,s=this.vertices.length,o=new wr(0,0,t,n,i,r,s);o.translation.copy(this.translation),o.rotation=this.rotation,o.scale=this.scale,o.skewX=this.skewX,o.skewY=this.skewY,this.matrix.manual&&o.matrix.copy(this.matrix);for(let e=0;e<bi.Properties.length;e++){const t=bi.Properties[e];o[t]=this[t]}return e&&e.add(o),o}toObject(){const e=super.toObject.call(this);for(let t=0;t<wr.Properties.length;t++){const n=wr.Properties[t];e[n]=this[n]}return e}},kr=wr;mt(kr,"Properties",["startAngle","endAngle","innerRadius","outerRadius"]);var Sr={startAngle:{enumerable:!0,get:function(){return this._startAngle},set:function(e){this._startAngle=e,this._flagStartAngle=!0}},endAngle:{enumerable:!0,get:function(){return this._endAngle},set:function(e){this._endAngle=e,this._flagEndAngle=!0}},innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this._flagOuterRadius=!0}}},Er=Math.ceil,Mr=Math.floor,Rr=class extends hn{constructor(e){super(),mt(this,"_flagVertices",!0),mt(this,"_flagLength",!0),mt(this,"_flagFill",!0),mt(this,"_flagStroke",!0),mt(this,"_flagLinewidth",!0),mt(this,"_flagOpacity",!0),mt(this,"_flagVisible",!0),mt(this,"_flagSize",!0),mt(this,"_flagSizeAttenuation",!0),mt(this,"_length",0),mt(this,"_fill","#fff"),mt(this,"_stroke","#000"),mt(this,"_linewidth",1),mt(this,"_opacity",1),mt(this,"_visible",!0),mt(this,"_size",1),mt(this,"_sizeAttenuation",!1),mt(this,"_beginning",0),mt(this,"_ending",1),mt(this,"_dashes",null),mt(this,"noFill",bi.prototype.noFill),mt(this,"noStroke",bi.prototype.noStroke),mt(this,"corner",bi.prototype.corner),mt(this,"center",bi.prototype.center),mt(this,"getBoundingClientRect",bi.prototype.getBoundingClientRect),mt(this,"_updateLength",bi.prototype._updateLength);for(let e in Cr)Object.defineProperty(this,e,Cr[e]);this._renderer.type="points",this._renderer.flagVertices=wi.bind(this),this._renderer.bindVertices=ki.bind(this),this._renderer.unbindVertices=Si.bind(this),this._renderer.flagFill=Ei.bind(this),this._renderer.flagStroke=Mi.bind(this),this._renderer.vertices=null,this._renderer.collection=null,this.sizeAttenuation=!1,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.className="",this.visible=!0,this.vertices=e,this.dashes=[],this.dashes.offset=0}clone(e){const t=new Rr;for(let e=0;e<this.vertices.length;e++)t.vertices.push(this.vertices[e].clone());for(let e=0;e<Rr.Properties.length;e++){const n=Rr.Properties[e];t[n]=this[n]}return t.className=this.className,t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e={vertices:this.vertices.map((function(e){return e.toObject()}))};return en.each(Rr.Properties,(function(t){e[t]=this[t]}),this),e.className=this.className,e.translation=this.translation.toObject(),e.rotation=this.rotation,e.scale=this.scale instanceof Lt?this.scale.toObject():this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&(e.matrix=this.matrix.toObject()),e}subdivide(e){this._update();let t=[];for(let n=0;n<this.vertices.length;n++){const i=this.vertices[n],r=this.vertices[n-1];if(!r)continue;const s=i.x,o=i.y,a=r.x,l=r.y,c=Ut(s,o,s,o,a,l,a,l,e);t=t.concat(c)}return this.vertices=t,this}_update(){if(this._flagVertices){this._flagLength&&this._updateLength(void 0,!0);const e=Math.min(this._beginning,this._ending),t=Math.max(this._beginning,this._ending),n=Bn(this,e*this._length),i=Bn(this,t*this._length),r=Er(n),s=Mr(i);let o,a=0;this._renderer.vertices=[],this._renderer.collection=[];for(let e=0;e<this._collection.length;e++)e>=r&&e<=s&&(o=this._collection[e],this._renderer.collection.push(o),this._renderer.vertices[2*a+0]=o.x,this._renderer.vertices[2*a+1]=o.y,a++)}return super._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagSize=this._flagSizeAttenuation=!1,super.flagReset.call(this),this}},Tr=Rr;mt(Tr,"Properties",["fill","stroke","linewidth","opacity","visible","size","sizeAttenuation","beginning","ending"]);var Cr={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._visible=e,this._flagVisible=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(e){this._size=e,this._flagSize=!0}},sizeAttenuation:{enumerable:!0,get:function(){return this._sizeAttenuation},set:function(e){this._sizeAttenuation=e,this._flagSizeAttenuation=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof Xn||this._fill instanceof Zn||this._fill instanceof ii||this._fill instanceof hi)&&this._fill.unbind(At.Types.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof Xn||this._fill instanceof Zn||this._fill instanceof ii||this._fill instanceof hi)&&this._fill.bind(At.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof Xn||this._stroke instanceof Zn||this._stroke instanceof ii||this._stroke instanceof hi)&&this._stroke.unbind(At.Types.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof Xn||this._stroke instanceof Zn||this._stroke instanceof ii||this._stroke instanceof hi)&&this._stroke.bind(At.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(e){this._beginning=e,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(e){this._ending=e,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(e){const t=this._renderer.bindVertices,n=this._renderer.unbindVertices;this._collection&&this._collection.unbind(At.Types.insert,t).unbind(At.Types.remove,n),this._collection=e instanceof dn?e:new dn(e||[]),this._collection.bind(At.Types.insert,t).bind(At.Types.remove,n),t(this._collection)}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(e){"number"!=typeof e.offset&&(e.offset=this.dashes&&this._dashes.offset||0),this._dashes=e}}},Or=Math.cos,Pr=Math.sin,Ar=class extends bi{constructor(e,t,n,i){i=Math.max(i||0,3),super(),mt(this,"_flagWidth",!1),mt(this,"_flagHeight",!1),mt(this,"_flagSides",!1),mt(this,"_radius",0),mt(this,"_width",0),mt(this,"_height",0),mt(this,"_sides",0);for(let e in Fr)Object.defineProperty(this,e,Fr[e]);this.closed=!0,this.automatic=!1,"number"==typeof n&&(this.radius=n),"number"==typeof i&&(this.sides=i),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagSides){const e=this._sides,t=e+1;let n=this.vertices.length;n>e&&(this.vertices.splice(e-1,n-e),n=e);for(let i=0;i<t;i++){const t=vt*((i+.5)/e)+Math.PI/2,r=this._width*Or(t)/2,s=this._height*Pr(t)/2;i>=n?this.vertices.push(new It(r,s)):this.vertices[i].set(r,s),this.vertices[i].command=0===i?_t.move:_t.line}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagSides=!1,super.flagReset.call(this),this}clone(e){const t=new Ar(0,0,0,this.sides);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,t.width=this.width,t.height=this.height,this.matrix.manual&&t.matrix.copy(this.matrix);for(let e=0;e<bi.Properties.length;e++){const n=bi.Properties[e];t[n]=this[n]}return e&&e.add(t),t}toObject(){const e=super.toObject.call(this);for(let t=0;t<Ar.Properties.length;t++){const n=Ar.Properties[t];e[n]=this[n]}return e}},jr=Ar;mt(jr,"Properties",["width","height","sides"]);var Fr={radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius=e,this.width=2*e,this.height=2*e}},width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0,this._radius=Math.max(this.width,this.height)/2}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0,this._radius=Math.max(this.width,this.height)/2}},sides:{enumerable:!0,get:function(){return this._sides},set:function(e){this._sides=e,this._flagSides=!0}}},Lr=Math.cos,Ir=Math.sin,zr=class extends bi{constructor(e,t,n,i,r){arguments.length<=3&&(n=(i=n)/2),("number"!=typeof r||r<=0)&&(r=5),super(),mt(this,"_flagInnerRadius",!1),mt(this,"_flagOuterRadius",!1),mt(this,"_flagSides",!1),mt(this,"_innerRadius",0),mt(this,"_outerRadius",0),mt(this,"_sides",0);for(let e in Dr)Object.defineProperty(this,e,Dr[e]);this.closed=!0,this.automatic=!1,"number"==typeof n&&(this.innerRadius=n),"number"==typeof i&&(this.outerRadius=i),"number"==typeof r&&(this.sides=r),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}_update(){if(this._flagVertices||this._flagInnerRadius||this._flagOuterRadius||this._flagSides){const e=2*this._sides,t=e+1;let n=this.vertices.length;n>e&&(this.vertices.splice(e-1,n-e),n=e);for(let i=0;i<t;i++){const t=vt*((i+.5)/e),r=(i%2?this._outerRadius:this._innerRadius)/2,s=r*Lr(t),o=r*Ir(t);i>=n?this.vertices.push(new It(s,o)):this.vertices[i].set(s,o),this.vertices[i].command=0===i?_t.move:_t.line}}return super._update.call(this),this}flagReset(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,super.flagReset.call(this),this}clone(e){const t=this.innerRadius,n=this.outerRadius,i=this.sides,r=new zr(0,0,t,n,i);r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix);for(let e=0;e<bi.Properties.length;e++){const t=bi.Properties[e];r[t]=this[t]}return e&&e.add(r),r}toObject(){const e=super.toObject.call(this);for(let t=0;t<zr.Properties.length;t++){const n=zr.Properties[t];e[n]=this[n]}return e}},Nr=zr;mt(Nr,"Properties",["innerRadius","outerRadius","sides"]);var Dr={innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this._flagOuterRadius=!0}},sides:{enumerable:!0,get:function(){return this._sides},set:function(e){this._sides=e,this._flagSides=!0}}},Br=new cn,Vr={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(e,t){const n=e,i=document.createElementNS(Vr.ns,n);return"svg"===n&&(t=en.defaults(t||{},{version:Vr.version})),t&&Object.keys(t).length>0&&Vr.setAttributes(i,t),i},setAttributes:function(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i++)/href/.test(n[i])?e.setAttributeNS(Vr.xlink,n[i],t[n[i]]):e.setAttribute(n[i],t[n[i]]);return this},removeAttributes:function(e,t){for(let n in t)e.removeAttribute(n);return this},toString:function(e,t){let n,i=e.length,r=i-1,s="";for(let o=0;o<i;o++){const a=e[o],l=e[t?Rt(o-1,i):Math.max(o-1,0)];let c,h,u,f,d,p,g,m,_,y,v,b,x,w,k,S=Ot(a.x),E=Ot(a.y);switch(a.command){case _t.close:c=_t.close;break;case _t.arc:v=a.rx,b=a.ry,x=a.xAxisRotation,w=a.largeArcFlag,k=a.sweepFlag,c=_t.arc+" "+v+" "+b+" "+x+" "+w+" "+k+" "+S+" "+E;break;case _t.curve:g=l.controls&&l.controls.right||Lt.zero,m=a.controls&&a.controls.left||Lt.zero,l.relative?(u=Ot(g.x+l.x),f=Ot(g.y+l.y)):(u=Ot(g.x),f=Ot(g.y)),a.relative?(d=Ot(m.x+a.x),p=Ot(m.y+a.y)):(d=Ot(m.x),p=Ot(m.y)),c=(0===o?_t.move:_t.curve)+" "+u+" "+f+" "+d+" "+p+" "+S+" "+E;break;case _t.move:n=a,c=_t.move+" "+S+" "+E;break;default:c=a.command+" "+S+" "+E}o>=r&&t&&(a.command===_t.curve&&(h=n,_=a.controls&&a.controls.right||a,y=h.controls&&h.controls.left||h,a.relative?(u=Ot(_.x+a.x),f=Ot(_.y+a.y)):(u=Ot(_.x),f=Ot(_.y)),h.relative?(d=Ot(y.x+h.x),p=Ot(y.y+h.y)):(d=Ot(y.x),p=Ot(y.y)),S=Ot(h.x),E=Ot(h.y),c+=" C "+u+" "+f+" "+d+" "+p+" "+S+" "+E),a.command!==_t.close&&(c+=" Z")),s+=c+" "}return s},pointsToString:function(e,t){let n="";const i=.5*t;for(let t=0;t<e.length;t++){const r=e[t].x,s=e[t].y-i;n+=_t.move+" "+r+" "+s+" ",n+="a "+i+" "+i+" 0 1 0 0.001 0 Z"}return n},getClip:function(e,t){let n=e._renderer.clip;return n||(n=e._renderer.clip=Vr.createElement("clipPath",{"clip-rule":"nonzero"}),t.defs.appendChild(n)),n},group:{appendChild:function(e){const t=e._renderer.elem;if(!t)return;const n=t.nodeName;!n||/(radial|linear)gradient/i.test(n)||e._clip||this.elem.appendChild(t)},removeChild:function(e){const t=e._renderer.elem;t&&t.parentNode==this.elem&&t.nodeName&&(e._clip||this.elem.removeChild(t))},orderChild:function(e){this.elem.appendChild(e._renderer.elem)},renderChild:function(e){Vr[e._renderer.type].render.call(e,this)},render:function(e){if(!this._visible&&!this._flagVisible||0===this._opacity&&!this._flagOpacity)return this;this._update(),this._renderer.elem||(this._renderer.elem=Vr.createElement("g",{id:this.id}),e.appendChild(this._renderer.elem));const t=this._matrix.manual||this._flagMatrix,n={domElement:e,elem:this._renderer.elem};t&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(let t=0;t<this.children.length;t++){const n=this.children[t];Vr[n._renderer.type].render.call(n,e)}return this._flagId&&this._renderer.elem.setAttribute("id",this._id),this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagVisible&&this._renderer.elem.setAttribute("display",this._visible?"inline":"none"),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(Vr.group.appendChild,n),this._flagSubtractions&&this.subtractions.forEach(Vr.group.removeChild,n),this._flagOrder&&this.children.forEach(Vr.group.orderChild,n),this._flagMask&&(this._mask?(Vr[this._mask._renderer.type].render.call(this._mask,e),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.dataset&&Object.assign(this._renderer.elem.dataset,this.dataset),this.flagReset()}},path:{render:function(e){if(0===this._opacity&&!this._flagOpacity)return this;this._update();const t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(t.id=this._id),this._flagVertices){const e=Vr.toString(this._renderer.vertices,this._closed);t.d=e}if(this._fill&&this._fill._renderer&&(this._fill._update(),Vr[this._fill._renderer.type].render.call(this._fill,e,!0)),this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Vr[this._stroke._renderer.type].render.call(this._stroke,e,!0)),this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t["stroke-opacity"]=this._opacity,t["fill-opacity"]=this._opacity),this._flagClassName&&(t.class=this.classList.join(" ")),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this._flagCap&&(t["stroke-linecap"]=this._cap),this._flagJoin&&(t["stroke-linejoin"]=this._join),this._flagMiter&&(t["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(t["stroke-dasharray"]=this.dashes.join(" "),t["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Vr.setAttributes(this._renderer.elem,t):(t.id=this._id,this._renderer.elem=Vr.createElement("path",t),e.appendChild(this._renderer.elem)),this._flagClip){const t=Vr.getClip(this,e),n=this._renderer.elem;this._clip?(n.removeAttribute("id"),t.setAttribute("id",this.id),t.appendChild(n)):(t.removeAttribute("id"),n.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(n))}return this._flagMask&&(this._mask?(Vr[this._mask._renderer.type].render.call(this._mask,e),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},points:{render:function(e){if(0===this._opacity&&!this._flagOpacity)return this;this._update();const t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(t.id=this._id),this._flagVertices||this._flagSize||this._flagSizeAttenuation){let e=this._size;if(!this._sizeAttenuation){kt(this,Br);const t=Br.elements,n=xt(t[0],t[3],t[1],t[4],t[2],t[5]);e/=Math.max(n.scaleX,n.scaleY)}const n=Vr.pointsToString(this._renderer.collection,e);t.d=n}return this._fill&&this._fill._renderer&&(this._fill._update(),Vr[this._fill._renderer.type].render.call(this._fill,e,!0)),this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Vr[this._stroke._renderer.type].render.call(this._stroke,e,!0)),this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t["stroke-opacity"]=this._opacity,t["fill-opacity"]=this._opacity),this._flagClassName&&(t.class=this.classList.join(" ")),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(t["stroke-dasharray"]=this.dashes.join(" "),t["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Vr.setAttributes(this._renderer.elem,t):(t.id=this._id,this._renderer.elem=Vr.createElement("path",t),e.appendChild(this._renderer.elem)),this.flagReset()}},text:{render:function(e){this._update();const t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(t.id=this._id),this._flagFamily&&(t["font-family"]=this._family),this._flagSize&&(t["font-size"]=this._size),this._flagLeading&&(t["line-height"]=this._leading),this._flagAlignment&&(t["text-anchor"]=Vr.alignments[this._alignment]||this._alignment),this._flagBaseline&&(t["alignment-baseline"]=t["dominant-baseline"]=this._baseline),this._flagStyle&&(t["font-style"]=this._style),this._flagWeight&&(t["font-weight"]=this._weight),this._flagDecoration&&(t["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),Vr[this._fill._renderer.type].render.call(this._fill,e,!0)),this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Vr[this._stroke._renderer.type].render.call(this._stroke,e,!0)),this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t.opacity=this._opacity),this._flagClassName&&(t.class=this.classList.join(" ")),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(t["stroke-dasharray"]=this.dashes.join(" "),t["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Vr.setAttributes(this._renderer.elem,t):(t.id=this._id,this._renderer.elem=Vr.createElement("text",t),e.defs.appendChild(this._renderer.elem)),this._flagClip){const t=Vr.getClip(this,e),n=this._renderer.elem;this._clip?(n.removeAttribute("id"),t.setAttribute("id",this.id),t.appendChild(n)):(t.removeAttribute("id"),n.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(n))}return this._flagMask&&(this._mask?(Vr[this._mask._renderer.type].render.call(this._mask,e),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(e,t){t||this._update();const n={};if(this._flagId&&(n.id=this._id),this._flagEndPoints&&(n.x1=this.left._x,n.y1=this.left._y,n.x2=this.right._x,n.y2=this.right._y),this._flagSpread&&(n.spreadMethod=this._spread),this._flagUnits&&(n.gradientUnits=this._units),this._renderer.elem?Vr.setAttributes(this._renderer.elem,n):(n.id=this._id,this._renderer.elem=Vr.createElement("linearGradient",n),e.defs.appendChild(this._renderer.elem)),this._flagStops){const e=this._renderer.elem.childNodes.length!==this.stops.length;if(e)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let t=0;t<this.stops.length;t++){const n=this.stops[t],i={};n._flagOffset&&(i.offset=100*n._offset+"%"),n._flagColor&&(i["stop-color"]=n._color),n._flagOpacity&&(i["stop-opacity"]=n._opacity),n._renderer.elem?Vr.setAttributes(n._renderer.elem,i):n._renderer.elem=Vr.createElement("stop",i),e&&this._renderer.elem.appendChild(n._renderer.elem),n.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(e,t){t||this._update();const n={};if(this._flagId&&(n.id=this._id),this._flagCenter&&(n.cx=this.center._x,n.cy=this.center._y),this._flagFocal&&(n.fx=this.focal._x,n.fy=this.focal._y),this._flagRadius&&(n.r=this._radius),this._flagSpread&&(n.spreadMethod=this._spread),this._flagUnits&&(n.gradientUnits=this._units),this._renderer.elem?Vr.setAttributes(this._renderer.elem,n):(n.id=this._id,this._renderer.elem=Vr.createElement("radialGradient",n),e.defs.appendChild(this._renderer.elem)),this._flagStops){const e=this._renderer.elem.childNodes.length!==this.stops.length;if(e)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let t=0;t<this.stops.length;t++){const n=this.stops[t],i={};n._flagOffset&&(i.offset=100*n._offset+"%"),n._flagColor&&(i["stop-color"]=n._color),n._flagOpacity&&(i["stop-opacity"]=n._opacity),n._renderer.elem?Vr.setAttributes(n._renderer.elem,i):n._renderer.elem=Vr.createElement("stop",i),e&&this._renderer.elem.appendChild(n._renderer.elem),n.flagReset()}}return this.flagReset()}},texture:{render:function(e,t){t||this._update();const n={},i={x:0,y:0},r=this.image;if(this._flagId&&(n.id=this._id),this._flagLoaded&&this.loaded)switch(r.nodeName.toLowerCase()){case"canvas":i.href=i["xlink:href"]=r.toDataURL("image/png");break;case"img":case"image":i.href=i["xlink:href"]=this.src}return(this._flagOffset||this._flagLoaded||this._flagScale)&&(n.x=this._offset.x,n.y=this._offset.y,r&&(n.x-=r.width/2,n.y-=r.height/2,this._scale instanceof Lt?(n.x*=this._scale.x,n.y*=this._scale.y):(n.x*=this._scale,n.y*=this._scale)),n.x>0&&(n.x*=-1),n.y>0&&(n.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(n.width=0,n.height=0,r)&&(i.width=n.width=r.width,i.height=n.height=r.height,"no-repeat"===this._repeat&&(n.width+=1,n.height+=1),this._scale instanceof Lt?(n.width*=this._scale.x,n.height*=this._scale.y):(n.width*=this._scale,n.height*=this._scale)),(this._flagScale||this._flagLoaded)&&(this._renderer.image?Vr.setAttributes(this._renderer.image,i):this._renderer.image=Vr.createElement("image",i)),this._renderer.elem?0!==Object.keys(n).length&&Vr.setAttributes(this._renderer.elem,n):(n.id=this._id,n.patternUnits="userSpaceOnUse",this._renderer.elem=Vr.createElement("pattern",n),e.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},Hr=class extends At{constructor(e){super(),this.domElement=e.domElement||Vr.createElement("svg"),this.scene=new yn,this.scene.parent=this,this.defs=Vr.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"}setSize(e,t){return this.width=e,this.height=t,Vr.setAttributes(this.domElement,{width:e,height:t}),this.trigger(At.Types.resize,e,t)}render(){return Vr.group.render.call(this.scene,this.domElement),this}};mt(Hr,"Utils",Vr);var Ur=function(e,t,n){const i=e.createShader(e[n]);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(i);throw e.deleteShader(i),new zn("unable to compile shader "+i+": "+t)}return i},Wr={vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},$r={vertex:"\n      precision mediump float;\n      attribute vec2 a_position;\n\n      uniform mat3 u_matrix;\n      uniform vec2 u_resolution;\n      uniform vec4 u_rect;\n\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;\n        vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;\n        vec2 normal = projected / u_resolution;\n        vec2 clipspace = (normal * 2.0) - 1.0;\n\n        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n        v_textureCoords = a_position;\n      }\n    ",fragment:"\n      precision mediump float;\n\n      uniform sampler2D u_image;\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec4 texel = texture2D(u_image, v_textureCoords);\n        if (texel.a == 0.0) {\n          discard;\n        }\n        gl_FragColor = texel;\n      }\n    "},Yr={vertex:"\n      precision mediump float;\n      attribute vec2 a_position;\n\n      uniform float u_size;\n      uniform mat3 u_matrix;\n      uniform vec2 u_resolution;\n\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n        vec2 normal = projected / u_resolution;\n        vec2 clipspace = (normal * 2.0) - 1.0;\n\n        gl_PointSize = u_size;\n        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n        v_textureCoords = a_position;\n      }\n    ",fragment:"\n      precision mediump float;\n\n      uniform sampler2D u_image;\n\n      void main() {\n        vec4 texel = texture2D(u_image, gl_PointCoord);\n        if (texel.a == 0.0) {\n          discard;\n        }\n        gl_FragColor = texel;\n      }\n    "},Xr=cn.Multiply,qr=[1,0,0,0,1,0,0,0,1],Kr=new Tt(9),Qr=Pn.Utils,Gr=new Tt([0,0,1,0,0,1,0,1,1,0,1,1]),Jr={precision:.9,isHidden:/(undefined|none|transparent)/i,canvas:ft.document?ft.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new cn,group:{removeChild:function(e,t){if(e.children)for(let n=0;n<e.children.length;n++)Jr.group.removeChild(e.children[n],t);e._renderer.texture&&(t.deleteTexture(e._renderer.texture),delete e._renderer.texture),e._renderer.positionBuffer&&(t.deleteBuffer(e._renderer.positionBuffer),delete e._renderer.positionBuffer)},render:function(e,t){if(!this._visible)return;this._update();const n=this.parent,i=n._matrix&&n._matrix.manual||n._flagMatrix,r=this._matrix.manual||this._flagMatrix;let s;if((i||r)&&(this._renderer.matrix||(this._renderer.matrix=new Tt(9)),this._matrix.toTransformArray(!0,Kr),Xr(Kr,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof Lt||(this._renderer.scale=new Lt),this._scale instanceof Lt?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(n._renderer.type)||(this._renderer.scale.x*=n._renderer.scale.x,this._renderer.scale.y*=n._renderer.scale.y),i&&(this._flagMatrix=!0)),this._mask&&(e.clear(e.STENCIL_BUFFER_BIT),e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,0),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.colorMask(!1,!1,!1,!1),Jr[this._mask._renderer.type].render.call(this._mask,e,t,this),e.stencilFunc(e.EQUAL,1,255),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.colorMask(!0,!0,!0,!0)),this._flagOpacity=n._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1),this._flagSubtractions)for(s=0;s<this.subtractions.length;s++)Jr.group.removeChild(this.subtractions[s],e);for(s=0;s<this.children.length;s++){const n=this.children[s];Jr[n._renderer.type].render.call(n,e,t)}return this._mask&&e.disable(e.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(e){let t,n,i,r,s,o,a,l,c,h,u,f,d,p;const g=e._renderer.vertices,m=this.canvas,_=this.ctx,y=e._renderer.scale,v=e._stroke,b=e._linewidth,x=e._fill,w=e._renderer.opacity||e._opacity,k=e._cap,S=e._join,E=e._miter,M=e._closed,R=e.dashes,T=g.length,C=T-1;m.width=Math.max(Math.ceil(e._renderer.rect.width*y.x),1),m.height=Math.max(Math.ceil(e._renderer.rect.height*y.y),1);const O=e._renderer.rect.centroid,P=O.x,A=O.y;let j,F,L,I,z,N,D,B;_.clearRect(0,0,m.width,m.height),x&&("string"==typeof x?_.fillStyle=x:(Jr[x._renderer.type].render.call(x,_,e),_.fillStyle=x._renderer.effect)),v&&("string"==typeof v?_.strokeStyle=v:(Jr[v._renderer.type].render.call(v,_,e),_.strokeStyle=v._renderer.effect),b&&(_.lineWidth=b),E&&(_.miterLimit=E),S&&(_.lineJoin=S),!M&&k&&(_.lineCap=k)),"number"==typeof w&&(_.globalAlpha=w),R&&R.length>0&&(_.lineDashOffset=R.offset||0,_.setLineDash(R)),_.save(),_.scale(y.x,y.y),_.translate(P,A),_.beginPath();for(let e=0;e<g.length;e++){const p=g[e];switch(f=p.x,d=p.y,p.command){case _t.close:_.closePath();break;case _t.arc:F=p.rx,L=p.ry,I=p.xAxisRotation,z=p.largeArcFlag,N=p.sweepFlag,t=M?Rt(e-1,T):Math.max(e-1,0),n=g[t],D=n.x,B=n.y,Qr.renderSvgArcCommand(_,D,B,F,L,z,N,I,f,d);break;case _t.curve:t=M?Rt(e-1,T):Math.max(e-1,0),n=g[t],l=n.controls&&n.controls.right||Lt.zero,c=p.controls&&p.controls.left||Lt.zero,n._relative?(o=l.x+n.x,a=l.y+n.y):(o=l.x,a=l.y),p._relative?(r=c.x+p.x,s=c.y+p.y):(r=c.x,s=c.y),_.bezierCurveTo(o,a,r,s,f,d),e>=C&&M&&(i=j,h=p.controls&&p.controls.right||Lt.zero,u=i.controls&&i.controls.left||Lt.zero,p._relative?(o=h.x+p.x,a=h.y+p.y):(o=h.x,a=h.y),i._relative?(r=u.x+i.x,s=u.y+i.y):(r=u.x,s=u.y),f=i.x,d=i.y,_.bezierCurveTo(o,a,r,s,f,d));break;case _t.line:_.lineTo(f,d);break;case _t.move:j=p,_.moveTo(f,d)}}M&&_.closePath(),Jr.isHidden.test(x)||(p=x._renderer&&x._renderer.offset,p&&(_.save(),_.translate(-x._renderer.offset.x,-x._renderer.offset.y),_.scale(x._renderer.scale.x,x._renderer.scale.y)),_.fill(),p&&_.restore()),Jr.isHidden.test(v)||(p=v._renderer&&v._renderer.offset,p&&(_.save(),_.translate(-v._renderer.offset.x,-v._renderer.offset.y),_.scale(v._renderer.scale.x,v._renderer.scale.y),_.lineWidth=b/v._renderer.scale.x),_.stroke(),p&&_.restore()),_.restore()},getBoundingClientRect:function(e,t,n){let i,r,s=1/0,o=-1/0,a=1/0,l=-1/0;e.forEach((function(e){const t=e.x,n=e.y,i=e.controls;let r,c,h,u,f,d;a=Math.min(n,a),s=Math.min(t,s),o=Math.max(t,o),l=Math.max(n,l),e.controls&&(f=i.left,d=i.right,f&&d&&(r=e._relative?f.x+t:f.x,c=e._relative?f.y+n:f.y,h=e._relative?d.x+t:d.x,u=e._relative?d.y+n:d.y,r&&c&&h&&u&&(a=Math.min(c,u,a),s=Math.min(r,h,s),o=Math.max(r,h,o),l=Math.max(c,u,l))))})),"number"==typeof t&&(a-=t,s-=t,o+=t,l+=t),i=o-s,r=l-a,n.top=a,n.left=s,n.right=o,n.bottom=l,n.width=i,n.height=r,n.centroid||(n.centroid={}),n.centroid.x=-s,n.centroid.y=-a},render:function(e,t,n){if(!this._visible||!this._opacity)return this;this._update();const i=n||this.parent,r=t[this._renderer.type],s=i._matrix.manual||i._flagMatrix,o=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==i,l=this._flagVertices||this._flagFill||this._fill instanceof Zn&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof ii&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof hi&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Zn&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof ii&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof hi&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||i._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((s||o||a)&&(this._renderer.matrix||(this._renderer.matrix=new Tt(9)),this._matrix.toTransformArray(!0,Kr),Xr(Kr,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof Lt||(this._renderer.scale=new Lt),this._scale instanceof Lt?(this._renderer.scale.x=this._scale.x*i._renderer.scale.x,this._renderer.scale.y=this._scale.y*i._renderer.scale.y):(this._renderer.scale.x=this._scale*i._renderer.scale.x,this._renderer.scale.y=this._scale*i._renderer.scale.y),a&&(this._renderer.parent=i)),this._mask&&(e.clear(e.STENCIL_BUFFER_BIT),e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,0),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.colorMask(!1,!1,!1,!1),Jr[this._mask._renderer.type].render.call(this._mask,e,t,this),e.stencilFunc(e.EQUAL,1,255),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.colorMask(!0,!0,!0,!0)),l?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*i._renderer.opacity,Jr.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),Jr.updateTexture.call(Jr,e,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!n||!this._renderer.texture)return this;t.current!==r&&(e.useProgram(r),e.bindBuffer(e.ARRAY_BUFFER,t.buffers.position),e.vertexAttribPointer(r.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r.position),e.bufferData(e.ARRAY_BUFFER,Gr,e.STATIC_DRAW),t.resolution.flagged||e.uniform2f(e.getUniformLocation(r,"u_resolution"),t.resolution.width,t.resolution.height),t.current=r),t.resolution.flagged&&e.uniform2f(e.getUniformLocation(r,"u_resolution"),t.resolution.width,t.resolution.height),e.bindTexture(e.TEXTURE_2D,this._renderer.texture);const c=this._renderer.rect;return e.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),e.uniform4f(r.rect,c.left,c.top,c.right,c.bottom),e.drawArrays(e.TRIANGLES,0,6),this._mask&&e.disable(e.STENCIL_TEST),this.flagReset()}},points:{updateCanvas:function(e){let t;const n=this.canvas,i=this.ctx,r=e._stroke,s=e._linewidth,o=e._fill,a=e._renderer.opacity||e._opacity,l=e.dashes,c=e._size;let h=c;Jr.isHidden.test(r)||(h+=s),n.width=Mt(h),n.height=n.width;const u=h/n.width,f=n.width/2,d=n.height/2;i.clearRect(0,0,n.width,n.height),o&&("string"==typeof o?i.fillStyle=o:(Jr[o._renderer.type].render.call(o,i,e),i.fillStyle=o._renderer.effect)),r&&("string"==typeof r?i.strokeStyle=r:(Jr[r._renderer.type].render.call(r,i,e),i.strokeStyle=r._renderer.effect),s&&(i.lineWidth=s/u)),"number"==typeof a&&(i.globalAlpha=a),l&&l.length>0&&(i.lineDashOffset=l.offset||0,i.setLineDash(l)),i.save(),i.translate(f,d),i.scale(Jr.precision,Jr.precision),i.beginPath(),i.arc(0,0,c/u*.5,0,vt),i.restore(),closed&&i.closePath(),Jr.isHidden.test(o)||(t=o._renderer&&o._renderer.offset,t&&(i.save(),i.translate(-o._renderer.offset.x,-o._renderer.offset.y),i.scale(o._renderer.scale.x,o._renderer.scale.y)),i.fill(),t&&i.restore()),Jr.isHidden.test(r)||(t=r._renderer&&r._renderer.offset,t&&(i.save(),i.translate(-r._renderer.offset.x,-r._renderer.offset.y),i.scale(r._renderer.scale.x,r._renderer.scale.y),i.lineWidth=s/r._renderer.scale.x),i.stroke(),t&&i.restore())},render:function(e,t,n){if(!this._visible||!this._opacity)return this;this._update();let i=this._size;const r=n||this.parent,s=t[this._renderer.type],o=this._sizeAttenuation,a=this._stroke,l=this._linewidth,c=r._matrix.manual||r._flagMatrix,h=this._matrix.manual||this._flagMatrix,u=this._renderer.parent!==r,f=this._renderer.vertices,d=this._renderer.collection.length,p=this._flagVertices,g=this._flagFill||this._fill instanceof Zn&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof ii&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof hi&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Zn&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof ii&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof hi&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||r._flagOpacity||this._flagVisible||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((c||h||u)&&(this._renderer.matrix||(this._renderer.matrix=new Tt(9)),this._matrix.toTransformArray(!0,Kr),Xr(Kr,r._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof Lt||(this._renderer.scale=new Lt),this._scale instanceof Lt?(this._renderer.scale.x=this._scale.x*r._renderer.scale.x,this._renderer.scale.y=this._scale.y*r._renderer.scale.y):(this._renderer.scale.x=this._scale*r._renderer.scale.x,this._renderer.scale.y=this._scale*r._renderer.scale.y),u&&(this._renderer.parent=r)),p){const t=this._renderer.positionBuffer;t&&e.deleteBuffer(t),this._renderer.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._renderer.positionBuffer),e.vertexAttribPointer(s.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(s.position),e.bufferData(e.ARRAY_BUFFER,f,e.STATIC_DRAW)}return g?(this._renderer.opacity=this._opacity*r._renderer.opacity,Jr.updateTexture.call(Jr,e,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!n||!this._renderer.texture?this:(Jr.isHidden.test(a)||(i+=l),i/=Jr.precision,o&&(i*=Math.max(this._renderer.scale.x,this._renderer.scale.y)),t.current!==s&&(e.useProgram(s),t.resolution.flagged||e.uniform2f(e.getUniformLocation(s,"u_resolution"),t.resolution.width,t.resolution.height),t.current=s),t.resolution.flagged&&e.uniform2f(e.getUniformLocation(s,"u_resolution"),t.resolution.width,t.resolution.height),e.bindTexture(e.TEXTURE_2D,this._renderer.texture),e.uniformMatrix3fv(s.matrix,!1,this._renderer.matrix),e.uniform1f(s.size,i*t.resolution.ratio),e.drawArrays(e.POINTS,0,d),this.flagReset())}},text:{updateCanvas:function(e){const t=this.canvas,n=this.ctx,i=e._renderer.scale,r=e._stroke,s=e._linewidth*i,o=e._fill,a=e._renderer.opacity||e._opacity,l=e.dashes,c=e._decoration;t.width=Math.max(Math.ceil(e._renderer.rect.width*i.x),1),t.height=Math.max(Math.ceil(e._renderer.rect.height*i.y),1);const h=e._renderer.rect.centroid,u=h.x,f=h.y;let d,p,g,m,_,y,v,b,x,w,k;const S=o._renderer&&o._renderer.offset&&r._renderer&&r._renderer.offset;if(n.clearRect(0,0,t.width,t.height),S||(n.font=[e._style,e._weight,e._size+"px/"+e._leading+"px",e._family].join(" ")),n.textAlign="center",n.textBaseline="middle",o&&("string"==typeof o?n.fillStyle=o:(Jr[o._renderer.type].render.call(o,n,e),n.fillStyle=o._renderer.effect)),r&&("string"==typeof r?n.strokeStyle=r:(Jr[r._renderer.type].render.call(r,n,e),n.strokeStyle=r._renderer.effect),s&&(n.lineWidth=s)),"number"==typeof a&&(n.globalAlpha=a),l&&l.length>0&&(n.lineDashOffset=l.offset||0,n.setLineDash(l)),n.save(),n.scale(i.x,i.y),n.translate(u,f),Jr.isHidden.test(o)||(o._renderer&&o._renderer.offset?(y=o._renderer.scale.x,v=o._renderer.scale.y,n.save(),n.translate(-o._renderer.offset.x,-o._renderer.offset.y),n.scale(y,v),d=e._size/o._renderer.scale.y,p=e._leading/o._renderer.scale.y,n.font=[e._style,e._weight,d+"px/",p+"px",e._family].join(" "),g=o._renderer.offset.x/o._renderer.scale.x,m=o._renderer.offset.y/o._renderer.scale.y,n.fillText(e.value,g,m),n.restore()):n.fillText(e.value,0,0)),Jr.isHidden.test(r)||(r._renderer&&r._renderer.offset?(y=r._renderer.scale.x,v=r._renderer.scale.y,n.save(),n.translate(-r._renderer.offset.x,-r._renderer.offset.y),n.scale(y,v),d=e._size/r._renderer.scale.y,p=e._leading/r._renderer.scale.y,n.font=[e._style,e._weight,d+"px/",p+"px",e._family].join(" "),g=r._renderer.offset.x/r._renderer.scale.x,m=r._renderer.offset.y/r._renderer.scale.y,_=s/r._renderer.scale.x,n.lineWidth=_,n.strokeText(e.value,g,m),n.restore()):n.strokeText(e.value,0,0)),/(underline|strikethrough)/i.test(c)){const t=n.measureText(e.value);switch(c){case"underline":x=t.actualBoundingBoxAscent,k=t.actualBoundingBoxAscent;break;case"strikethrough":x=0,k=0}b=-t.width/2,w=t.width/2,n.lineWidth=Math.max(Math.floor(e._size/15),1),n.strokeStyle=n.fillStyle,n.beginPath(),n.moveTo(b,x),n.lineTo(w,k),n.stroke()}n.restore()},getBoundingClientRect:function(e,t){const n=Jr.ctx;n.font=[e._style,e._weight,e._size+"px/"+e._leading+"px",e._family].join(" "),n.textAlign="center",n.textBaseline=e._baseline;let i=1.25*n.measureText(e._value).width,r=1.25*Math.max(e._size,e._leading);this._linewidth&&!Jr.isHidden.test(this._stroke)&&(i+=2*this._linewidth,r+=2*this._linewidth);const s=i/2,o=r/2;switch(Jr.alignments[e._alignment]||e._alignment){case Jr.alignments.left:t.left=0,t.right=i;break;case Jr.alignments.right:t.left=-i,t.right=0;break;default:t.left=-s,t.right=s}switch(e._baseline){case"bottom":t.top=-r,t.bottom=0;break;case"top":t.top=0,t.bottom=r;break;default:t.top=-o,t.bottom=o}t.width=i,t.height=r,t.centroid||(t.centroid={}),t.centroid.x=s,t.centroid.y=o},render:function(e,t,n){if(!this._visible||!this._opacity)return this;this._update();const i=n||this.parent,r=t[this._renderer.type],s=i._matrix.manual||i._flagMatrix,o=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==i,l=this._flagVertices||this._flagFill||this._fill instanceof Zn&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof ii&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof hi&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Zn&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof ii&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof hi&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||i._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((s||o||a)&&(this._renderer.matrix||(this._renderer.matrix=new Tt(9)),this._matrix.toTransformArray(!0,Kr),Xr(Kr,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof Lt||(this._renderer.scale=new Lt),this._scale instanceof Lt?(this._renderer.scale.x=this._scale.x*i._renderer.scale.x,this._renderer.scale.y=this._scale.y*i._renderer.scale.y):(this._renderer.scale.x=this._scale*i._renderer.scale.x,this._renderer.scale.y=this._scale*i._renderer.scale.y),a&&(this._renderer.parent=i)),this._mask&&(e.clear(e.STENCIL_BUFFER_BIT),e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,0),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.colorMask(!1,!1,!1,!1),Jr[this._mask._renderer.type].render.call(this._mask,e,t,this),e.stencilFunc(e.EQUAL,1,255),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.colorMask(!0,!0,!0,!0)),l?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*i._renderer.opacity,Jr.text.getBoundingClientRect(this,this._renderer.rect),Jr.updateTexture.call(Jr,e,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!n||!this._renderer.texture)return this;t.current!==r&&(e.useProgram(r),e.bindBuffer(e.ARRAY_BUFFER,t.buffers.position),e.vertexAttribPointer(r.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r.position),e.bufferData(e.ARRAY_BUFFER,Gr,e.STATIC_DRAW),t.resolution.flagged||e.uniform2f(e.getUniformLocation(r,"u_resolution"),t.resolution.width,t.resolution.height),t.current=r),t.resolution.flagged&&e.uniform2f(e.getUniformLocation(r,"u_resolution"),t.resolution.width,t.resolution.height),e.bindTexture(e.TEXTURE_2D,this._renderer.texture);const c=this._renderer.rect;return e.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),e.uniform4f(r.rect,c.left,c.top,c.right,c.bottom),e.drawArrays(e.TRIANGLES,0,6),this._mask&&e.disable(e.STENCIL_TEST),this.flagReset()}},"linear-gradient":{render:function(e,t){if(e.canvas.getContext("2d")&&t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let n,i=this.left._x,r=this.left._y,s=this.right._x,o=this.right._y;/objectBoundingBox/i.test(this._units)&&(n=t.getBoundingClientRect(!0),i=(i-.5)*n.width,r=(r-.5)*n.height,s=(s-.5)*n.width,o=(o-.5)*n.height),this._renderer.effect=e.createLinearGradient(i,r,s,o);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return this.flagReset()}}},"radial-gradient":{render:function(e,t){if(e.canvas.getContext("2d")&&t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let n,i=this.center._x,r=this.center._y,s=this.focal._x,o=this.focal._y,a=this._radius;/objectBoundingBox/i.test(this._units)&&(n=t.getBoundingClientRect(!0),i=i*n.width*.5,r=r*n.height*.5,s=s*n.width*.5,o=o*n.height*.5,a*=.5*Math.min(n.width,n.height)),this._renderer.effect=e.createRadialGradient(i,r,0,s,o,a);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return this.flagReset()}}},texture:{render:function(e,t){if(!e.canvas.getContext("2d"))return;this._update();const n=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=e.createPattern(n,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof Lt||(this._renderer.offset=new Lt),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,n&&(this._renderer.offset.x+=n.width/2,this._renderer.offset.y+=n.height/2,this._scale instanceof Lt?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof Lt||(this._renderer.scale=new Lt),this._scale instanceof Lt?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},updateTexture:function(e,t){if(this[t._renderer.type].updateCanvas.call(Jr,t),this.canvas.width<=0||this.canvas.height<=0)return t._renderer.texture&&e.deleteTexture(t._renderer.texture),void delete t._renderer.texture;t._renderer.texture||(t._renderer.texture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,t._renderer.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas)},program:{create:function(e,t){let n,i,r;if(n=e.createProgram(),en.each(t,(function(t){e.attachShader(n,t)})),e.linkProgram(n),i=e.getProgramParameter(n,e.LINK_STATUS),!i)throw r=e.getProgramInfoLog(n),e.deleteProgram(n),new zn("unable to link program: "+r);return n}},TextureRegistry:new Nn};Jr.ctx=Jr.canvas.getContext("2d");var Zr=class extends At{constructor(e){let t,n,i,r;if(super(),this.domElement=e.domElement||document.createElement("canvas"),void 0!==e.offscreenElement&&(Jr.canvas=e.offscreenElement,Jr.ctx=Jr.canvas.getContext("2d")),this.scene=new yn,this.scene.parent=this,this._renderer={type:"renderer",matrix:new Tt(qr),scale:1,opacity:1},this._flagMatrix=!0,e=en.defaults(e||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=e.overdraw,t=this.ctx=this.domElement.getContext("webgl",e)||this.domElement.getContext("experimental-webgl",e),!this.ctx)throw new zn("unable to create a webgl context. Try using another renderer.");i=Ur(t,$r.vertex,Wr.vertex),r=Ur(t,$r.fragment,Wr.fragment),this.programs={current:null,buffers:{position:t.createBuffer()},resolution:{width:0,height:0,ratio:1,flagged:!1}},n=this.programs.path=Jr.program.create(t,[i,r]),this.programs.text=this.programs.path,n.position=t.getAttribLocation(n,"a_position"),n.matrix=t.getUniformLocation(n,"u_matrix"),n.rect=t.getUniformLocation(n,"u_rect");const s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(n.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n.position),t.bufferData(t.ARRAY_BUFFER,Gr,t.STATIC_DRAW),i=Ur(t,Yr.vertex,Wr.vertex),r=Ur(t,Yr.fragment,Wr.fragment),n=this.programs.points=Jr.program.create(t,[i,r]),n.position=t.getAttribLocation(n,"a_position"),n.matrix=t.getUniformLocation(n,"u_matrix"),n.size=t.getUniformLocation(n,"u_size"),t.enable(t.BLEND),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}setSize(e,t,n){let i,r;const s=this.ctx;return this.width=e,this.height=t,this.ratio=void 0===n?Jt(s):n,this.domElement.width=e*this.ratio,this.domElement.height=t*this.ratio,en.isObject(this.domElement.style)&&en.extend(this.domElement.style,{width:e+"px",height:t+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,i=e*this.ratio,r=t*this.ratio,s.viewport(0,0,i,r),this.programs.resolution.width=i,this.programs.resolution.height=r,this.programs.resolution.ratio=this.ratio,this.programs.resolution.flagged=!0,this.trigger(At.Types.resize,e,t,n)}render(){const e=this.ctx;return this.overdraw||e.clear(e.COLOR_BUFFER_BIT),Jr.group.render.call(this.scene,e,this.programs),this._flagMatrix=!1,this.programs.resolution.flagged=!0,this}};mt(Zr,"Utils",Jr);var es=en.extend({Error:zn,getRatio:Jt,read:dr,xhr:pr},en,Fn,Pt,yt),ts=class{constructor(e){mt(this,"_events",new At),mt(this,"type",""),mt(this,"renderer",null),mt(this,"scene",null),mt(this,"width",0),mt(this,"height",0),mt(this,"frameCount",0),mt(this,"timeDelta",0),mt(this,"playing",!1);const t=en.defaults(e||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:ts.Types.svg,autostart:!1});if(en.each(t,(function(e,t){/fullscreen/i.test(t)||/autostart/i.test(t)||(this[t]=e)}),this),en.isElement(t.domElement)){const e=t.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+e)||(this.type=ts.Types[e])}this.renderer=new ts[this.type](this),this.setPlaying(t.autostart),this.frameCount=0,t.fullscreen?(this.fit=is.bind(this),this.fit.domElement=window,this.fit.attached=!0,en.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),en.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),Ln.bind(this.fit.domElement,"resize",this.fit),this.fit()):t.fitted?(this.fit=rs.bind(this),en.extend(this.renderer.domElement.style,{display:"block"})):en.isElement(t.domElement)||(this.renderer.setSize(t.width,t.height,this.ratio),this.width=t.width,this.height=t.height),this.renderer.bind(At.Types.resize,ss.bind(this)),this.scene=this.renderer.scene,ts.Instances.push(this),t.autostart&&os.init()}get _bound(){return this._events._bound}set _bound(e){this._events._bound=e}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.addEventListener.apply(this,arguments)}bind(){return this._events.addEventListener.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.removeEventListener.apply(this,arguments)}unbind(){return this._events.removeEventListener.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.dispatchEvent.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}appendTo(e){return e.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=e,this.fit.attached=!1),this.update()),this}play(){return this.playing=!0,os.init(),this.trigger(At.Types.play)}pause(){return this.playing=!1,this.trigger(At.Types.pause)}setPlaying(e){this.playing=e}release(e){let t,n,i;if(!en.isObject(e))return this.release(this.scene);if("function"==typeof e.unbind&&e.unbind(),e.vertices)for("function"==typeof e.vertices.unbind&&e.vertices.unbind(),t=0;t<e.vertices.length;t++)n=e.vertices[t],"function"==typeof n.unbind&&n.unbind(),n.controls&&(n.controls.left&&"function"==typeof n.controls.left.unbind&&n.controls.left.unbind(),n.controls.right&&"function"==typeof n.controls.right.unbind&&n.controls.right.unbind());if(e.children){for(t=0;t<e.children.length;t++)i=e.children[t],this.release(i);"function"==typeof e.children.unbind&&e.children.unbind()}return e}update(){const e=!!this._lastFrame,t=en.performance.now();e&&(this.timeDelta=parseFloat((t-this._lastFrame).toFixed(3))),this._lastFrame=t,this.fit&&this.fit.domElement&&!this.fit.attached&&(Ln.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());const n=this.width,i=this.height,r=this.renderer;return n===r.width&&i===r.height||r.setSize(n,i,this.ratio),this.trigger(At.Types.update,this.frameCount,this.timeDelta),this.render()}render(){return this.renderer.render(),this.trigger(At.Types.render,this.frameCount++)}add(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this}remove(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this}clear(){return this.scene.remove(this.scene.children),this}makeLine(e,t,n,i){const r=new Ui(e,t,n,i);return this.scene.add(r),r}makeArrow(e,t,n,i,r){const s="number"==typeof r?r:10,o=Math.atan2(i-t,n-e),a=[new It(e,t,void 0,void 0,void 0,void 0,_t.move),new It(n,i,void 0,void 0,void 0,void 0,_t.line),new It(n-s*Math.cos(o-Math.PI/4),i-s*Math.sin(o-Math.PI/4),void 0,void 0,void 0,void 0,_t.line),new It(n,i,void 0,void 0,void 0,void 0,_t.move),new It(n-s*Math.cos(o+Math.PI/4),i-s*Math.sin(o+Math.PI/4),void 0,void 0,void 0,void 0,_t.line)],l=new bi(a,!1,!1,!0);return l.noFill(),l.cap="round",l.join="round",this.scene.add(l),l}makeRectangle(e,t,n,i){const r=new Ti(e,t,n,i);return this.scene.add(r),r}makeRoundedRectangle(e,t,n,i,r){const s=new Yi(e,t,n,i,r);return this.scene.add(s),s}makeCircle(e,t,n,i){const r=new Ii(e,t,n,i);return this.scene.add(r),r}makeEllipse(e,t,n,i,r){const s=new Vi(e,t,n,i,r);return this.scene.add(s),s}makeStar(e,t,n,i,r){const s=new Nr(e,t,n,i,r);return this.scene.add(s),s}makeCurve(e){const t=arguments.length;if(!Array.isArray(e)){e=[];for(let n=0;n<t;n+=2){const t=arguments[n];if("number"!=typeof t)break;const i=arguments[n+1];e.push(new It(t,i))}}const n=arguments[t-1],i=new bi(e,!("boolean"==typeof n?n:void 0),!0),r=i.getBoundingClientRect();return i.center().translation.set(r.left+r.width/2,r.top+r.height/2),this.scene.add(i),i}makePolygon(e,t,n,i){const r=new jr(e,t,n,i);return this.scene.add(r),r}makeArcSegment(e,t,n,i,r,s,o){const a=new kr(e,t,n,i,r,s,o);return this.scene.add(a),a}makePoints(e){const t=arguments.length;let n=e;if(!Array.isArray(e)){n=[];for(let e=0;e<t;e+=2){const t=arguments[e];if("number"!=typeof t)break;const i=arguments[e+1];n.push(new Lt(t,i))}}const i=new Tr(n);return this.scene.add(i),i}makePath(e){const t=arguments.length;let n=e;if(!Array.isArray(e)){n=[];for(let e=0;e<t;e+=2){const t=arguments[e];if("number"!=typeof t)break;const i=arguments[e+1];n.push(new It(t,i))}}const i=arguments[t-1],r=new bi(n,!("boolean"==typeof i?i:void 0)),s=r.getBoundingClientRect();return"number"==typeof s.top&&"number"==typeof s.left&&"number"==typeof s.right&&"number"==typeof s.bottom&&r.center().translation.set(s.left+s.width/2,s.top+s.height/2),this.scene.add(r),r}makeText(e,t,n,i){const r=new Ji(e,t,n,i);return this.add(r),r}makeLinearGradient(e,t,n,i){const r=Array.prototype.slice.call(arguments,4),s=new Zn(e,t,n,i,r);return this.add(s),s}makeRadialGradient(e,t,n){const i=Array.prototype.slice.call(arguments,3),r=new ii(e,t,n,i);return this.add(r),r}makeSprite(e,t,n,i,r,s,o){const a=new Pi(e,t,n,i,r,s);return o&&a.play(),this.add(a),a}makeImageSequence(e,t,n,i,r){const s=new mr(e,t,n,i);return r&&s.play(),this.add(s),s}makeTexture(e,t){return new hi(e,t)}makeGroup(e){e instanceof Array||(e=Array.prototype.slice.call(arguments));const t=new yn;return this.scene.add(t),t.add(e),t}interpret(e,t,n){const i=e.tagName.toLowerCase();if(n=void 0===n||n,!(i in dr))return null;const r=dr[i].call(this,e);return n?this.add(t&&r instanceof yn?r.children:r):r.parent&&r.remove(),r}load(e,t){const n=new yn;let i,r,s;const o=function(e){for(Ln.temp.innerHTML=e,r=0;r<Ln.temp.children.length;r++)i=Ln.temp.children[r],s=this.interpret(i,!1,!1),null!==s&&n.add(s);if("function"==typeof t){const e=Ln.temp.children.length<=1?Ln.temp.children[0]:Ln.temp.children;t(n,e)}}.bind(this);return/\.svg$/i.test(e)?(pr(e,o),n):(o(e),n)}},ns=ts;function is(){const e=document.body.getBoundingClientRect(),t=this.width=e.width,n=this.height=e.height;this.renderer.setSize(t,n,this.ratio)}function rs(){const e=this.renderer.domElement.parentElement;if(!e)return void console.warn("Two.js: Attempting to fit to parent, but no parent found.");const t=e.getBoundingClientRect(),n=this.width=t.width,i=this.height=t.height;this.renderer.setSize(n,i,this.ratio)}function ss(e,t){this.width=e,this.height=t,this.trigger(At.Types.resize,e,t)}mt(ns,"nextFrameID",null),mt(ns,"Types",{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"}),mt(ns,"Version","v0.8.10"),mt(ns,"PublishDate","2022-06-09T16:09:22.888Z"),mt(ns,"Identifier",Dt),mt(ns,"Resolution",12),mt(ns,"AutoCalculateImportedMatrices",true),mt(ns,"Instances",[]),mt(ns,"uniqueId",Bt),mt(ns,"Anchor",It),mt(ns,"Collection",dn),mt(ns,"Events",At),mt(ns,"Group",yn),mt(ns,"Matrix",cn),mt(ns,"Path",bi),mt(ns,"Registry",Nn),mt(ns,"Shape",hn),mt(ns,"Text",Ji),mt(ns,"Vector",Lt),mt(ns,"Gradient",Xn),mt(ns,"ImageSequence",mr),mt(ns,"LinearGradient",Zn),mt(ns,"RadialGradient",ii),mt(ns,"Sprite",Pi),mt(ns,"Stop",Wn),mt(ns,"Texture",hi),mt(ns,"ArcSegment",kr),mt(ns,"Circle",Ii),mt(ns,"Ellipse",Vi),mt(ns,"Line",Ui),mt(ns,"Points",Tr),mt(ns,"Polygon",jr),mt(ns,"Rectangle",Ti),mt(ns,"RoundedRectangle",Yi),mt(ns,"Star",Nr),mt(ns,"CanvasRenderer",Pn),mt(ns,"SVGRenderer",Hr),mt(ns,"WebGLRenderer",Zr),mt(ns,"Commands",_t),mt(ns,"Utils",es);var os=Ln.getRequestAnimationFrame();function as(){for(let e=0;e<ns.Instances.length;e++){const t=ns.Instances[e];t.playing&&t.update()}ns.nextFrameID=os(as)}let ls,cs;os.init=function(){as(),os.init=function(){}},"undefined"!=typeof window?ls=window:void 0!==n.g?ls=n.g:"undefined"!=typeof self&&(ls=self);const hs=2*Math.PI,us=.5*Math.PI;function fs(e,t){t=t&&t.identity()||new cs;let n=e;const i=[];for(;n&&n._matrix;)i.push(n._matrix),n=n.parent;i.reverse();for(let e=0;e<i.length;e++){const n=i[e].elements;t.multiply(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9])}return t}function ds(e,t,n){return n*(t-e)+e}function ps(e,t){for(;e<0;)e+=t;return e%t}const gs=ls.Float32Array||Array,ms=Math.floor;function _s(e){return ms(1e6*e)/1e6}class ys{_events={};_bound=!1;constructor(){}addEventListener(e,t){return(this._events[e]||(this._events[e]=[])).push(t),this._bound=!0,this}on(){return this.addEventListener.apply(this,arguments)}bind(){return this.addEventListener.apply(this,arguments)}removeEventListener(e,t){if(!this._events)return this;if(!e&&!t)return this._events={},this._bound=!1,this;const n=e?[e]:Object.keys(this._events);for(let i=0,r=n.length;i<r;i++){e=n[i];let r=this._events[e];if(r){let n=[];if(t)for(let e=0,i=r.length;e<i;e++){let i=r[e];i=i.handler?i.handler:i,t!==i&&n.push(i)}this._events[e]=n}}return this}off(){return this.removeEventListener.apply(this,arguments)}unbind(){return this.removeEventListener.apply(this,arguments)}dispatchEvent(e){if(!this._events)return this;const t=Array.prototype.slice.call(arguments,1),n=this._events[e];if(n)for(let e=0;e<n.length;e++)n[e].call(this,...t);return this}trigger(){return this.dispatchEvent.apply(this,arguments)}listen(e,t,n){const i=this;function r(){n.apply(i,arguments)}return e&&(r.obj=e,r.name=t,r.handler=n,e.on(t,r)),i}ignore(e,t,n){return e.off(t,n),this}static Types={play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"};static Methods=["addEventListener","on","removeEventListener","off","unbind","dispatchEvent","trigger","listen","ignore"]}const vs=Math.cos,bs=Math.sin,xs=Math.tan,ws=[];class ks extends ys{elements=new gs(9);manual=!1;constructor(e,t,n,i,r,s){super();let o=e;Array.isArray(o)||(o=Array.prototype.slice.call(arguments)),this.identity(),o.length>0&&this.set(o)}static Identity=[1,0,0,0,1,0,0,0,1];static Multiply(e,t,n){if(t.length<=3){const n=e;let i,r,s;const o=t[0]||0,a=t[1]||0,l=t[2]||0;return i=n[0]*o+n[1]*a+n[2]*l,r=n[3]*o+n[4]*a+n[5]*l,s=n[6]*o+n[7]*a+n[8]*l,{x:i,y:r,z:s}}const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],f=t[0],d=t[1],p=t[2],g=t[3],m=t[4],_=t[5],y=t[6],v=t[7],b=t[8];return(n=n||new gs(9))[0]=i*f+r*g+s*y,n[1]=i*d+r*m+s*v,n[2]=i*p+r*_+s*b,n[3]=o*f+a*g+l*y,n[4]=o*d+a*m+l*v,n[5]=o*p+a*_+l*b,n[6]=c*f+h*g+u*y,n[7]=c*d+h*m+u*v,n[8]=c*p+h*_+u*b,n}set(e,t,n,i,r,s,o,a,l){if(void 0===t){const c=e;e=c[0],t=c[1],n=c[2],i=c[3],r=c[4],s=c[5],o=c[6],a=c[7],l=c[8]}return this.elements[0]=e,this.elements[1]=t,this.elements[2]=n,this.elements[3]=i,this.elements[4]=r,this.elements[5]=s,this.elements[6]=o,this.elements[7]=a,this.elements[8]=l,this.trigger(ys.Types.change)}copy(e){return this.elements[0]=e.elements[0],this.elements[1]=e.elements[1],this.elements[2]=e.elements[2],this.elements[3]=e.elements[3],this.elements[4]=e.elements[4],this.elements[5]=e.elements[5],this.elements[6]=e.elements[6],this.elements[7]=e.elements[7],this.elements[8]=e.elements[8],this.manual=e.manual,this.trigger(ys.Types.change)}identity(){return this.elements[0]=ks.Identity[0],this.elements[1]=ks.Identity[1],this.elements[2]=ks.Identity[2],this.elements[3]=ks.Identity[3],this.elements[4]=ks.Identity[4],this.elements[5]=ks.Identity[5],this.elements[6]=ks.Identity[6],this.elements[7]=ks.Identity[7],this.elements[8]=ks.Identity[8],this.trigger(ys.Types.change)}multiply(e,t,n,i,r,s,o,a,l){if(void 0===t)return this.elements[0]*=e,this.elements[1]*=e,this.elements[2]*=e,this.elements[3]*=e,this.elements[4]*=e,this.elements[5]*=e,this.elements[6]*=e,this.elements[7]*=e,this.elements[8]*=e,this.trigger(ys.Types.change);if(void 0===i)return e=e||0,t=t||0,n=n||0,{x:(r=this.elements)[0]*e+r[1]*t+r[2]*n,y:r[3]*e+r[4]*t+r[5]*n,z:r[6]*e+r[7]*t+r[8]*n};const c=this.elements,h=[e,t,n,i,r,s,o,a,l],u=c[0],f=c[1],d=c[2],p=c[3],g=c[4],m=c[5],_=c[6],y=c[7],v=c[8],b=h[0],x=h[1],w=h[2],k=h[3],S=h[4],E=h[5],M=h[6],R=h[7],T=h[8];return this.elements[0]=u*b+f*k+d*M,this.elements[1]=u*x+f*S+d*R,this.elements[2]=u*w+f*E+d*T,this.elements[3]=p*b+g*k+m*M,this.elements[4]=p*x+g*S+m*R,this.elements[5]=p*w+g*E+m*T,this.elements[6]=_*b+y*k+v*M,this.elements[7]=_*x+y*S+v*R,this.elements[8]=_*w+y*E+v*T,this.trigger(ys.Types.change)}inverse(e){const t=this.elements;e=e||new ks;const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],u=h*o-a*c,f=-h*s+a*l,d=c*s-o*l;let p=n*u+i*f+r*d;return p?(p=1/p,e.elements[0]=u*p,e.elements[1]=(-h*i+r*c)*p,e.elements[2]=(a*i-r*o)*p,e.elements[3]=f*p,e.elements[4]=(h*n-r*l)*p,e.elements[5]=(-a*n+r*s)*p,e.elements[6]=d*p,e.elements[7]=(-c*n+i*l)*p,e.elements[8]=(o*n-i*s)*p,e):null}scale(e,t){return arguments.length<=1&&(t=e),this.multiply(e,0,0,0,t,0,0,0,1)}rotate(e){const t=vs(e),n=bs(e);return this.multiply(t,-n,0,n,t,0,0,0,1)}translate(e,t){return this.multiply(1,0,e,0,1,t,0,0,1)}skewX(e){const t=xs(e);return this.multiply(1,t,0,0,1,0,0,0,1)}skewY(e){const t=xs(e);return this.multiply(1,0,0,t,1,0,0,0,1)}toString(e){return ws.length=0,this.toTransformArray(e,ws),ws.map(_s).join(" ")}toTransformArray(e,t){const n=this.elements,i=!!t,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5];if(e){const e=n[6],h=n[7],u=n[8];return i?(t[0]=r,t[1]=a,t[2]=e,t[3]=s,t[4]=l,t[5]=h,t[6]=o,t[7]=c,void(t[8]=u)):[r,a,e,s,l,h,o,c,u]}return i?(t[0]=r,t[1]=a,t[2]=s,t[3]=l,t[4]=o,void(t[5]=c)):[r,a,s,l,o,c]}toArray(e,t){const n=this.elements,i=!!t,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5];if(e){const e=n[6],h=n[7],u=n[8];return i?(t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c,t[6]=e,t[7]=h,void(t[8]=u)):[r,s,o,a,l,c,e,h,u]}return i?(t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=l,void(t[5]=c)):[r,s,o,a,l,c]}toObject(){return{elements:this.toArray(!0),manual:!!this.manual}}clone(){return(new ks).copy(this)}}!function(e){cs=e}(ks);class Ss{constructor(e){this.object=e}limits(e,t){const n=void 0!==e,i=void 0!==t;return i||n?(this.min=n?e:this.min,this.max=i?t:this.max,this):{min:this.min,max:this.max}}apply(e,t,n){return this.object.translation.set(e,t),this.object.scale=n,this}}class Es{constructor(e,t){this.limits={scale:Es.Limit.clone(),x:Es.Limit.clone(),y:Es.Limit.clone()},this.viewport=t||document.body,this.viewportOffset={top:0,left:0,matrix:new ks},this.surfaceMatrix=new ks,this.surfaces=[],this.reset(),this.updateSurface(),this.add(new Ss(e))}static Surface=Ss;static Clamp(e,t,n){return Math.min(Math.max(e,t),n)}static Limit={min:-1/0,max:1/0,clone:function(){const e={};for(let t in this)e[t]=this[t];return e}};static TranslateMatrix(e,t,n){return e.elements[2]+=t,e.elements[5]+=n,e}static PositionToScale(e){return Math.exp(e)}static ScaleToPosition(e){return Math.log(e)}add(e){this.surfaces.push(e);const t=e.limits();return this.addLimits(t.min,t.max),this}addLimits(e,t){return void 0!==e&&(this.limits.scale.min?this.limits.scale.min=Math.max(e,this.limits.scale.min):this.limits.scale.min=e),void 0===t||(this.limits.scale.max?this.limits.scale.max=Math.min(t,this.limits.scale.max):this.limits.scale.max=t),this}clientToSurface(e,t){this.updateOffset();const n=this.surfaceMatrix.inverse(),i=this.viewportOffset.matrix.inverse().multiply(e,t,1);return n.multiply.apply(n,[i.x,i.y,i.z])}surfaceToClient(e){this.updateOffset();const t=this.viewportOffset.matrix.clone(),n=this.surfaceMatrix.multiply.apply(this.surfaceMatrix,[e.x,e.y,e.z]);return t.multiply.apply(t,[n.x,n.y,n.z])}zoomBy(e,t,n){const i=Es.PositionToScale(this.zoom+e);return this.zoomSet(i,t,n),this}zoomSet(e,t,n){const i=this.fitToLimits(e);if(this.zoom=Es.ScaleToPosition(i),i===this.scale)return this;const r=this.clientToSurface(t,n),s=i/this.scale;this.surfaceMatrix.scale(s),this.scale=i;const o=this.surfaceToClient(r),a=t-o.x,l=n-o.y;return this.translateSurface(a,l),this}translateSurface(e,t){return Es.TranslateMatrix(this.surfaceMatrix,e,t),this.updateSurface(),this}updateOffset(){const e=this.viewport.getBoundingClientRect();return this.viewportOffset.left=e.left-document.body.scrollLeft,this.viewportOffset.top=e.top-document.body.scrollTop,this.viewportOffset.matrix.identity().translate(this.viewportOffset.left,this.viewportOffset.top),this}updateSurface(){const e=this.surfaceMatrix.elements;for(let t=0;t<this.surfaces.length;t++)this.surfaces[t].apply(e[2],e[5],e[0]);return this}reset(){return this.zoom=0,this.scale=1,this.surfaceMatrix.identity(),this}fitToLimits(e){return Es.Clamp(e,this.limits.scale.min,this.limits.scale.max)}}class Ms{constructor(){}get DomElement(){return this.domElement}attach(e,t){this.resizeObserver=new ResizeObserver((()=>this.resizeHandler())),this.domElement=e,this.cb=t,this.resizeHandler(),this.resizeObserver.observe(e)}resizeHandler(){if(!this.cb||!this.domElement||"none"==this.domElement.style.display)return;const e=this.domElement.getBoundingClientRect();this.cb(e)}detach(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.resizeObserver=void 0,this.domElement=void 0,this.cb=void 0}}class Rs{static create(e,t){const n=document.createElement(e);if(t.style){const e=t.style;e.position&&(n.style.position=e.position),e.zIndex&&(n.style.zIndex=e.zIndex),e.top&&(n.style.top=e.top),e.display&&(n.style.display=e.display)}if(t.events){const e=t.events;e.click&&n.addEventListener("click",e.click)}if(t.attrs){const e=t.attrs;e.textContent&&(n.textContent=e.textContent),e.title&&(n.title=e.title)}return n}static resize(e,t){e.style.left=t.left+"px",e.style.top=t.top+"px",e.style.width=t.width+"px",e.style.height=t.height+"px"}static findParentBody(e){let t=e,n=t;for(;(n=t)&&!(n instanceof HTMLBodyElement)&&(t=n.parentElement););return n}}class Ts{constructor(e,t=e.selectionManager,n=e.eventHelper){this.selectionManager=t,this.eventHelper=n,this.resizeTracker=new Ms,this.resizeSubscribers=[],this.selfElement=Rs.create("div",{style:{position:"absolute",zIndex:"1"}}),this.selectionStage=new ns.Group,this.mainStage=new ns.Group,this.stepStage=new ns.Group,this.connectionStage=new ns.Group,this.two=new ns({width:10,height:10}),this.zui=new Es(this.mainStage),this.mainStage.add(this.connectionStage),this.mainStage.add(this.stepStage),this.two.add(this.mainStage),this.two.add(this.selectionStage),this.two.appendTo(this.selfElement)}attach(e){this.resizeTracker.attach(e,this.resizeTo.bind(this)),Rs.findParentBody(e).appendChild(this.selfElement),this.two.play()}detach(){var e;this.resizeTracker.detach(),null===(e=this.selfElement.parentElement)||void 0===e||e.removeChild(this.selfElement),this.two.pause()}clientToSurface(e){return this.zui.clientToSurface(e.x,e.y)}clientToSurfaceD(e){return e/this.zui.scale}clientToSurfaceDiff(e,t){return{dx:e/this.zui.scale,dy:t/this.zui.scale}}addToStage(e,t){this.selectStage(e).add(t)}panBy(e,t){this.zui.translateSurface(e,t),this.selectionManager.redrawSelections(),this.eventHelper.trigger("onPan")}clearStage(e){const t=this.selectStage(e).children;t.length&&t.map((e=>e)).forEach((e=>e.remove()))}zoomBy(e,t){this.zui.zoomBy(e,t.x,t.y),this.selectionManager.redrawSelections(),this.eventHelper.trigger("onZoom")}reset(){this.zui.reset(),this.zui.updateSurface()}getSelectionRect(){return this.selectionStage.getBoundingClientRect()}subscribeToResize(e){this.resizeSubscribers.push(e)}getState(){return this.zui.surfaceMatrix.toObject()}setState(e){this.zui.surfaceMatrix.copy(e),this.zui.updateSurface()}resizeTo(e){Rs.resize(this.selfElement,e),this.two.width=e.width,this.two.height=e.height,this.resizeSubscribers.forEach((t=>t(e)))}selectStage(e){switch(e){case"step":return this.stepStage;case"connection":return this.connectionStage;case"selection":return this.selectionStage}}}const Cs="M",Os="L",Ps="C";class As extends Array{_events=new ys;get _bound(){return this._events._bound}set _bound(e){this._events._bound=e}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.on.apply(this,arguments)}bind(){return this._events.bind.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.off.apply(this,arguments)}unbind(){return this._events.unbind.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.trigger.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}constructor(){super(),arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&this.push.apply(this,arguments[0]):arguments.length>0&&this.push.apply(this,arguments)}pop(){const e=super.pop.apply(this,arguments);return this.trigger(ys.Types.remove,[e]),e}shift(){const e=super.shift.apply(this,arguments);return this.trigger(ys.Types.remove,[e]),e}push(){const e=super.push.apply(this,arguments);return this.trigger(ys.Types.insert,arguments),e}unshift(){const e=super.unshift.apply(this,arguments);return this.trigger(ys.Types.insert,arguments),e}splice(){const e=super.splice.apply(this,arguments);if(this.trigger(ys.Types.remove,e),arguments.length>2){const e=this.slice(arguments[0],arguments[0]+arguments.length-2);this.trigger(ys.Types.insert,e),this.trigger(ys.Types.order)}return e}sort(){return super.sort.apply(this,arguments),this.trigger(ys.Types.order),this}reverse(){return super.reverse.apply(this,arguments),this.trigger(ys.Types.order),this}indexOf(){return super.indexOf.apply(this,arguments)}}const js={x:{enumerable:!0,get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this._bound&&this.dispatchEvent(ys.Types.change))}},y:{enumerable:!0,get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this._bound&&this.dispatchEvent(ys.Types.change))}}};class Fs extends ys{_x=0;_y=0;constructor(e=0,t=0){super();for(let e in js)Object.defineProperty(this,e,js[e]);this.x=e,this.y=t}static zero=new Fs;static left=new Fs(-1,0);static right=new Fs(1,0);static up=new Fs(0,-1);static down=new Fs(0,1);static add(e,t){return new Fs(e.x+t.x,e.y+t.y)}static sub(e,t){return new Fs(e.x-t.x,e.y-t.y)}static subtract(e,t){return Fs.sub(e,t)}static ratioBetween(e,t){return(e.x*t.x+e.y*t.y)/(e.length()*t.length())}static angleBetween(e,t){if(arguments.length>=4){const e=arguments[0]-arguments[2],t=arguments[1]-arguments[3];return Math.atan2(t,e)}const n=e.x-t.x,i=e.y-t.y;return Math.atan2(i,n)}static distanceBetween(e,t){return Math.sqrt(Fs.distanceBetweenSquared(e,t))}static distanceBetweenSquared(e,t){const n=e.x-t.x,i=e.y-t.y;return n*n+i*i}set(e,t){return this.x=e,this.y=t,this}copy(e){return this.x=e.x,this.y=e.y,this}clear(){return this.x=0,this.y=0,this}clone(){return new Fs(this.x,this.y)}add(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x+=e,this.y+=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=t)),this}addSelf(e){return this.add.apply(this,arguments)}sub(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x-=e,this.y-=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=t)),this}subtract(){return this.sub.apply(this,arguments)}subSelf(e){return this.sub.apply(this,arguments)}subtractSelf(e){return this.sub.apply(this,arguments)}multiply(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x*=e,this.y*=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=t)),this}multiplySelf(e){return this.multiply.apply(this,arguments)}multiplyScalar(e){return this.multiply(e)}divide(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x/=e,this.y/=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=t),isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0)),this}divideSelf(e){return this.divide.apply(this,arguments)}divideScalar(e){return this.divide(e)}negate(){return this.multiply(-1)}dot(e){return this.x*e.x+this.y*e.y}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.divideScalar(this.length())}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}setLength(e){return this.normalize().multiplyScalar(e)}equals(e,t){return t=void 0===t?1e-4:t,this.distanceTo(e)<t}lerp(e,t){const n=(e.x-this.x)*t+this.x,i=(e.y-this.y)*t+this.y;return this.set(n,i)}isZero(e){return e=void 0===e?1e-4:e,this.length()<e}toString(){return this.x+", "+this.y}toObject(){return{x:this.x,y:this.y}}rotate(e){const t=this.x,n=this.y,i=Math.cos(e),r=Math.sin(e);return this.x=t*i-n*r,this.y=t*r+n*i,this}}class Ls extends Fs{controls={left:new Fs,right:new Fs};_command=Cs;_relative=!0;_rx=0;_ry=0;_xAxisRotation=0;_largeArcFlag=0;_sweepFlag=1;constructor(e=0,t=0,n=0,i=0,r=0,s=0,o="M"){super(e,t);for(let e in Is)Object.defineProperty(this,e,Is[e]);this.command=o,this.relative=!0;const a=Ls.makeBroadcast(this);this.controls.left.set(n,i).addEventListener(ys.Types.change,a),this.controls.right.set(r,s).addEventListener(ys.Types.change,a)}static makeBroadcast(e){return function(){e._bound&&e.dispatchEvent(ys.Types.change)}}copy(e){return this.x=e.x,this.y=e.y,"string"==typeof e.command&&(this.command=e.command),e.controls&&(e.controls.left&&this.controls.left.copy(e.controls.left),e.controls.right&&this.controls.right.copy(e.controls.right)),"boolean"==typeof e.relative&&(this.relative=e.relative),"number"==typeof e.rx&&(this.rx=e.rx),"number"==typeof e.ry&&(this.ry=e.ry),"number"==typeof e.xAxisRotation&&(this.xAxisRotation=e.xAxisRotation),"number"==typeof e.largeArcFlag&&(this.largeArcFlag=e.largeArcFlag),"number"==typeof e.sweepFlag&&(this.sweepFlag=e.sweepFlag),this}clone(){return(new Ls).copy(this)}toObject(){return{x:this.x,y:this.y,command:this.command,relative:this.relative,controls:{left:this.controls.left.toObject(),right:this.controls.right.toObject()},rx:this.rx,ry:this.ry,xAxisRotation:this.xAxisRotation,largeArcFlag:this.largeArcFlag,sweepFlag:this.sweepFlag}}toString(){return JSON.stringify(this.toObject())}}const Is={command:{enumerable:!0,get:function(){return this._command},set:function(e){this._command!==e&&(this._command=e,this._bound&&this.dispatchEvent(ys.Types.change))}},relative:{enumerable:!0,get:function(){return this._relative},set:function(e){this._relative!==!!e&&(this._relative=!!e,this._bound&&this.dispatchEvent(ys.Types.change))}},rx:{enumerable:!0,get:function(){return this._rx},set:function(e){this._rx!==e&&(this._rx=e,this._bound&&this.dispatchEvent(ys.Types.change))}},ry:{enumerable:!0,get:function(){return this._ry},set:function(e){this._ry!==e&&(this._ry=e,this._bound&&this.dispatchEvent(ys.Types.change))}},xAxisRotation:{enumerable:!0,get:function(){return this._xAxisRotation},set:function(e){this._xAxisRotation!==e&&(this._xAxisRotation=e,this._bound&&this.dispatchEvent(ys.Types.change))}},largeArcFlag:{enumerable:!0,get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag!==e&&(this._largeArcFlag=e,this._bound&&this.dispatchEvent(ys.Types.change))}},sweepFlag:{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag!==e&&(this._sweepFlag=e,this._bound&&this.dispatchEvent(ys.Types.change))}}};let zs=0;const Ns="two-",Ds=function(){return zs++},Bs={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]};function Vs(e,t,n,i,r){const s=1-e;return s*s*s*t+3*s*s*e*n+3*s*e*e*i+e*e*e*r}function Hs(e,t,n,i,r,s,o,a){const l=[],c=[[],[]];let h,u,f,d,p,g,m,_;for(let c=0;c<2;++c)if(0==c?(u=6*e-12*n+6*r,h=-3*e+9*n-9*r+3*o,f=3*n-3*e):(u=6*t-12*i+6*s,h=-3*t+9*i-9*s+3*a,f=3*i-3*t),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;d=-f/u,0<d&&d<1&&l.push(d)}else m=u*u-4*f*h,_=Math.sqrt(m),m<0||(p=(-u+_)/(2*h),0<p&&p<1&&l.push(p),g=(-u-_)/(2*h),0<g&&g<1&&l.push(g));let y,v=l.length,b=v;for(;v--;)d=l[v],y=1-d,c[0][v]=y*y*y*e+3*y*y*d*n+3*y*d*d*r+d*d*d*o,c[1][v]=y*y*y*t+3*y*y*d*i+3*y*d*d*s+d*d*d*a;return c[0][b]=e,c[1][b]=t,c[0][b+1]=o,c[1][b+1]=a,c[0].length=c[1].length=b+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}}function Us(e,t,n){const i=Fs.angleBetween(e,t),r=Fs.angleBetween(n,t);let s=Fs.distanceBetween(e,t),o=Fs.distanceBetween(n,t),a=(i+r)/2;return s<1e-4||o<1e-4?("boolean"!=typeof t.relative||t.relative||(t.controls.left.copy(t),t.controls.right.copy(t)),t):(s*=.33,o*=.33,r<i?a+=us:a-=us,t.controls.left.x=Math.cos(a)*s,t.controls.left.y=Math.sin(a)*s,a-=Math.PI,t.controls.right.x=Math.cos(a)*o,t.controls.right.y=Math.sin(a)*o,"boolean"!=typeof t.relative||t.relative||(t.controls.left.x+=t.x,t.controls.left.y+=t.y,t.controls.right.x+=t.x,t.controls.right.y+=t.y),t)}function Ws(e,t){if(0===t||1===t)return!0;const n=e._length*t;let i=0;for(let t=0;t<e._lengths.length;t++){const r=e._lengths[t];if(i>=n)return n-i>=0;i+=r}return!1}function $s(e,t){const n=e._length;if(t<=0)return 0;if(t>=n)return e._lengths.length-1;for(let n=0,i=0;n<e._lengths.length;n++){if(i+e._lengths[n]>=t)return t-=i,Math.max(n-1,0)+t/e._lengths[n];i+=e._lengths[n]}return-1}function Ys(e,t,n){let i,r,s,o,a,l,c,h;const u=t.controls&&t.controls.right,f=e.controls&&e.controls.left;return i=t.x,a=t.y,r=(u||t).x,l=(u||t).y,s=(f||e).x,c=(f||e).y,o=e.x,h=e.y,u&&t._relative&&(r+=t.x,l+=t.y),f&&e._relative&&(s+=e.x,c+=e.y),function(e,t,n,i,r,s,o,a,l){if(e===n&&t===i&&r===o&&s===a){const n=o-e,i=a-t;return Math.sqrt(n*n+i*i)}const c=9*(n-r)+3*(o-e),h=6*(e+r)-12*n,u=3*(n-e),f=9*(i-s)+3*(a-t),d=6*(t+s)-12*i,p=3*(i-t);return function(e,t,n,i){let r=Bs.abscissas[i-2],s=Bs.weights[i-2],o=0,a=i+1>>1,l=1&i?s[o++]*e(.5):0;for(;o<a;){const t=.5*r[o];l+=s[o++]*(e(.5+t)+e(.5-t))}return.5*l}((function(e){const t=(c*e+h)*e+u,n=(f*e+d)*e+p;return Math.sqrt(t*t+n*n)}),0,0,l||Bs.RecursionLimit)}(i,a,r,l,s,c,o,h,n)}function Xs(e,t,n){let i,r,s,o,a,l,c,h;const u=t.controls&&t.controls.right,f=e.controls&&e.controls.left;return i=t.x,a=t.y,r=(u||t).x,l=(u||t).y,s=(f||e).x,c=(f||e).y,o=e.x,h=e.y,u&&t._relative&&(r+=t.x,l+=t.y),f&&e._relative&&(s+=e.x,c+=e.y),function(e,t,n,i,r,s,o,a,l){const c=(l=l||Bs.RecursionLimit)+1;if(Math.abs(e-o)<.001&&Math.abs(t-a)<.001)return[new Ls(o,a)];const h=[];for(let l=0;l<c;l++){const u=l/c,f=Vs(u,e,n,r,o),d=Vs(u,t,i,s,a);h.push(new Ls(f,d))}return h}(i,a,r,l,s,c,o,h,n)}const qs=Array.prototype.slice,Ks={isNaN:function(e){return"number"==typeof e&&e!==+e},isElement:function(e){return!(!e||1!==e.nodeType)},isObject:function(e){const t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){const t=qs.call(arguments,1);for(let n=0;n<t.length;n++){const i=t[n];for(let t in i)e[t]=i[t]}return e},defaults:function(e){const t=qs.call(arguments,1);for(let n=0;n<t.length;n++){const i=t[n];for(let t in i)void 0===e[t]&&(e[t]=i[t])}return e},each:function(e,t,n){const i=n||this,r=!function(e){if(null==e)return!1;const t=e.length;return"number"==typeof t&&t>=0&&t<4294967296}(e)&&Object.keys(e),s=(r||e).length;for(let n=0;n<s;n++){const s=r?r[n]:n;t.call(i,e[s],s,e)}return e},performance:ls.performance&&ls.performance.now?ls.performance:Date};class Qs extends ys{_flagId=!1;_flagClassName=!1;_renderer={};_id="";_className="";classList=[];constructor(){super();for(let e in Gs)Object.defineProperty(this,e,Gs[e])}flagReset(){this._flagId=this._flagClassName=!1}}const Gs={renderer:{enumerable:!1,get:function(){return this._renderer}},id:{enumerable:!0,get:function(){return this._id},set:function(e){const t=this._id;e!==this._id&&(this._id=e,this._flagId=!0,this.parent&&(delete this.parent.children.ids[t],this.parent.children.ids[this._id]=this))}},className:{enumerable:!0,get:function(){return this._className},set:function(e){this._className!==e&&(this._flagClassName=!0,this.classList=e.split(/\s+?/),this._className=e)}}};class Js extends Qs{_flagMatrix=!0;_flagScale=!1;_matrix=null;_worldMatrix=null;_position=null;_rotation=0;_scale=1;_skewX=0;_skewY=0;constructor(){super();for(let e in Zs)Object.defineProperty(this,e,Zs[e]);this._renderer.flagMatrix=eo.bind(this),this.isShape=!0,this.id=Ns+Ds(),this.matrix=new ks,this.worldMatrix=new ks,this.position=new Fs,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}get renderer(){return this._renderer}set renderer(e){this._renderer=e}get translation(){return Zs.position.get.apply(this,arguments)}set translation(e){Zs.position.set.apply(this,arguments)}addTo(e){return e.add(this),this}remove(){return this.parent?(this.parent.remove(this),this):this}clone(e){const t=new Js;return t.position.copy(this.position),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}_update(e){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.position.x,this.position.y),this._scale instanceof Fs?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),e&&this.parent&&this.parent._update&&this.parent._update(),this}flagReset(){return this._flagMatrix=this._flagScale=!1,super.flagReset.call(this),this}}const Zs={position:{enumerable:!0,get:function(){return this._position},set:function(e){this._position&&this._position.unbind(ys.Types.change,this._renderer.flagMatrix),this._position=e,this._position.bind(ys.Types.change,this._renderer.flagMatrix),eo.call(this)}},rotation:{enumerable:!0,get:function(){return this._rotation},set:function(e){this._rotation=e,this._flagMatrix=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof Fs&&this._scale.unbind(ys.Types.change,this._renderer.flagMatrix),this._scale=e,this._scale instanceof Fs&&this._scale.bind(ys.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}},skewX:{enumerable:!0,get:function(){return this._skewX},set:function(e){this._skewX=e,this._flagMatrix=!0}},skewY:{enumerable:!0,get:function(){return this._skewY},set:function(e){this._skewY=e,this._flagMatrix=!0}},matrix:{enumerable:!0,get:function(){return this._matrix},set:function(e){this._matrix=e,this._flagMatrix=!0}},worldMatrix:{enumerable:!0,get:function(){return fs(this,this._worldMatrix),this._worldMatrix},set:function(e){this._worldMatrix=e}}};function eo(){this._flagMatrix=!0}class to extends Qs{_flagOffset=!0;_flagOpacity=!0;_flagColor=!0;_offset=0;_opacity=1;_color="#fff";constructor(e,t,n){super();for(let e in no)Object.defineProperty(this,e,no[e]);this._renderer.type="stop",this.offset="number"==typeof e?e:to.Index<=0?0:1,this.opacity="number"==typeof n?n:1,this.color="string"==typeof t?t:to.Index<=0?"#fff":"#000",to.Index=(to.Index+1)%2}static Index=0;static Properties=["offset","opacity","color"];clone(e){const t=new to;return Ks.each(to.Properties,(function(e){t[e]=this[e]}),this),e&&e.stops&&e.stops.push(t),t}toObject(){const e={};return Ks.each(to.Properties,(function(t){e[t]=this[t]}),this),e}flagReset(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,super.flagReset.call(this),this}}const no={offset:{enumerable:!0,get:function(){return this._offset},set:function(e){this._offset=e,this._flagOffset=!0,this.parent&&(this.parent._flagStops=!0)}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0,this.parent&&(this.parent._flagStops=!0)}},color:{enumerable:!0,get:function(){return this._color},set:function(e){this._color=e,this._flagColor=!0,this.parent&&(this.parent._flagStops=!0)}}};class io extends Qs{_flagStops=!1;_flagSpread=!1;_flagUnits=!1;_spread="";_units="";constructor(e){super();for(let e in ro)Object.defineProperty(this,e,ro[e]);this._renderer.type="gradient",this.id=Ns+Ds(),this.classList=[],this._renderer.flagStops=so.bind(this),this._renderer.bindStops=oo.bind(this),this._renderer.unbindStops=ao.bind(this),this.spread="pad",this.units="objectBoundingBox",e&&(this.stops=e)}static Stop=to;static Properties=["spread","stops","renderer","units"];clone(e){const t=this.stops.map((function(e){return e.clone()})),n=new io(t);return Ks.each(io.Properties,(function(e){n[e]=this[e]}),this),e&&e.add(n),n}toObject(){const e={stops:this.stops.map((function(e){return e.toObject()}))};return Ks.each(io.Properties,(function(t){e[t]=this[t]}),this),e}_update(){return(this._flagSpread||this._flagStops)&&this.trigger(ys.Types.change),this}flagReset(){return this._flagSpread=this._flagUnits=this._flagStops=!1,super.flagReset.call(this),this}}const ro={spread:{enumerable:!0,get:function(){return this._spread},set:function(e){this._spread=e,this._flagSpread=!0}},units:{enumerable:!0,get:function(){return this._units},set:function(e){this._units=e,this._flagUnits=!0}},stops:{enumerable:!0,get:function(){return this._stops},set:function(e){const t=this._renderer.bindStops,n=this._renderer.unbindStops;this._stops&&this._stops.unbind(ys.Types.insert,t).unbind(ys.Types.remove,n),this._stops=new As((e||[]).slice(0)),this._stops.bind(ys.Types.insert,t).bind(ys.Types.remove,n),t(this._stops)}}};function so(){this._flagStops=!0}function oo(e){let t=e.length;for(;t--;)e[t].bind(ys.Types.change,this._renderer.flagStops),e[t].parent=this;this._renderer.flagStops()}function ao(e){let t=e.length;for(;t--;)e[t].unbind(ys.Types.change,this._renderer.flagStops),delete e[t].parent;this._renderer.flagStops()}class lo extends io{_flagEndPoints=!1;_left=null;_right=null;constructor(e,t,n,i,r){super(r);for(let e in co)Object.defineProperty(this,e,co[e]);this._renderer.type="linear-gradient",this._renderer.flagEndPoints=ho.bind(this),this.left=new Fs,this.right=new Fs,"number"==typeof e&&(this.left.x=e),"number"==typeof t&&(this.left.y=t),"number"==typeof n&&(this.right.x=n),"number"==typeof i&&(this.right.y=i)}static Properties=["left","right"];static Stop=to;clone(e){const t=this.stops.map((function(e){return e.clone()})),n=new lo(this.left._x,this.left._y,this.right._x,this.right._y,t);return Ks.each(io.Properties,(function(e){n[e]=this[e]}),this),e&&e.add(n),n}toObject(){const e=super.toObject.call(this);return e.left=this.left.toObject(),e.right=this.right.toObject(),e}_update(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(ys.Types.change),this}flagReset(){return this._flagEndPoints=!1,super.flagReset.call(this),this}}const co={left:{enumerable:!0,get:function(){return this._left},set:function(e){this._left instanceof Fs&&this._left.unbind(ys.Types.change,this._renderer.flagEndPoints),this._left=e,this._left.bind(ys.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}},right:{enumerable:!0,get:function(){return this._right},set:function(e){this._right instanceof Fs&&this._right.unbind(ys.Types.change,this._renderer.flagEndPoints),this._right=e,this._right.bind(ys.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}}};function ho(){this._flagEndPoints=!0}class uo extends io{_flagRadius=!1;_flagCenter=!1;_flagFocal=!1;_radius=0;_center=null;_focal=null;constructor(e,t,n,i,r,s){super(i);for(let e in fo)Object.defineProperty(this,e,fo[e]);this._renderer.type="radial-gradient",this._renderer.flagCenter=po.bind(this),this._renderer.flagFocal=go.bind(this),this.center=new Fs,this.radius="number"==typeof n?n:1,this.focal=new Fs,"number"==typeof e&&(this.center.x=e),"number"==typeof t&&(this.center.y=t),this.focal.copy(this.center),"number"==typeof r&&(this.focal.x=r),"number"==typeof s&&(this.focal.y=s)}static Stop=to;static Properties=["center","radius","focal"];clone(e){const t=this.stops.map((function(e){return e.clone()})),n=new uo(this.center._x,this.center._y,this._radius,t,this.focal._x,this.focal._y);return Ks.each(io.Properties.concat(uo.Properties),(function(e){n[e]=this[e]}),this),e&&e.add(n),n}toObject(){const e=super.toObject.call(this);return Ks.each(uo.Properties,(function(t){e[t]=this[t]}),this),e.center=this.center.toObject(),e.focal=this.focal.toObject(),e}_update(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(ys.Types.change),this}flagReset(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,super.flagReset.call(this),this}}const fo={radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius=e,this._flagRadius=!0}},center:{enumerable:!0,get:function(){return this._center},set:function(e){this._center&&this._center.unbind(ys.Types.change,this._renderer.flagCenter),this._center=e,this._center.bind(ys.Types.change,this._renderer.flagCenter),this._flagCenter=!0}},focal:{enumerable:!0,get:function(){return this._focal},set:function(e){this._focal&&this._focal.unbind(ys.Types.change,this._renderer.flagFocal),this._focal=e,this._focal.bind(ys.Types.change,this._renderer.flagFocal),this._flagFocal=!0}}};function po(){this._flagCenter=!0}function go(){this._flagFocal=!0}class mo extends Error{name="Two.js";message;constructor(e){super(),this.message=e}}const _o=ls.devicePixelRatio||1;class yo extends As{ids={};constructor(e){super(e=Array.isArray(e)?e:Array.prototype.slice.call(arguments)),this.attach(e),this.on(ys.Types.insert,this.attach),this.on(ys.Types.remove,this.detach)}attach(e){for(let t=0;t<e.length;t++){const n=e[t];n&&n.id&&(this.ids[n.id]=n)}return this}detach(e){for(let t=0;t<e.length;t++)delete this.ids[e[t].id];return this}}const vo=Math.min,bo=Math.max;class xo extends Js{_flagAdditions=!1;_flagSubtractions=!1;_flagOrder=!1;_flagOpacity=!0;_flagBeginning=!1;_flagEnding=!1;_flagLength=!1;_flagMask=!1;_fill="#fff";_stroke="#000";_linewidth=1;_opacity=1;_visible=!0;_cap="round";_join="round";_miter=4;_closed=!0;_curved=!1;_automatic=!0;_beginning=0;_ending=1;_length=0;_mask=null;constructor(e){super();for(let e in wo)Object.defineProperty(this,e,wo[e]);this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(e)?e:Array.prototype.slice.call(arguments)}static Children=yo;static InsertChildren(e){for(let t=0;t<e.length;t++)ko.call(this,e[t],this)}static RemoveChildren(e){for(let t=0;t<e.length;t++)ko.call(this,e[t])}static OrderChildren(e){this._flagOrder=!0}static Properties=["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"];clone(e){const t=new xo,n=this.children.map((function(e){return e.clone()}));return t.add(n),t.opacity=this.opacity,this.mask&&(t.mask=this.mask),t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.className=this.className,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof Fs?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(e.matrix=this.matrix.toObject()),Ks.each(this.children,(function(t,n){e.children[n]=t.toObject()}),this),e}corner(){const e=this.getBoundingClientRect(!0);for(let t=0;t<this.children.length;t++){const n=this.children[t];n.translation.x-=e.left,n.translation.y-=e.top}return this.mask&&(this.mask.translation.x-=e.left,this.mask.translation.y-=e.top),this}center(){const e=this.getBoundingClientRect(!0),t=e.left+e.width/2-this.translation.x,n=e.top+e.height/2-this.translation.y;for(let e=0;e<this.children.length;e++){const i=this.children[e];i.isShape&&(i.translation.x-=t,i.translation.y-=n)}return this.mask&&(this.mask.translation.x-=t,this.mask.translation.y-=n),this}getById(e){let t=null;return function n(i){if(i.id===e)return i;if(i.children)for(let e=0;e<i.children.length;e++)if(t=n(i.children[e]),t)return t;return null}(this)}getByClassName(e){const t=[];return function n(i){if(Array.prototype.indexOf.call(i.classList,e)>=0&&t.push(i),i.children)for(let e=0;e<i.children.length;e++)n(i.children[e]);return t}(this)}getByType(e){const t=[];return function n(i){if(i instanceof e&&t.push(i),i.children)for(let e=0;e<i.children.length;e++)n(i.children[e]);return t}(this)}add(e){e=e instanceof Array?e.slice():Array.prototype.slice.call(arguments);for(let t=0;t<e.length;t++){const n=e[t];if(!n||!n.id)continue;const i=Array.prototype.indexOf.call(this.children,n);i>=0&&this.children.splice(i,1),this.children.push(n)}return this}remove(e){const t=arguments.length,n=this.parent;if(t<=0&&n)return n.remove(this),this;e=e instanceof Array?e.slice():Array.prototype.slice.call(arguments);for(let t=0;t<e.length;t++){const n=e[t];if(!n||!this.children.ids[n.id])continue;const i=this.children.indexOf(n);i>=0&&this.children.splice(i,1)}return this}getBoundingClientRect(e){let t,n,i,r,s,o,a,l,c,h;this._update(!0);let u=1/0,f=-1/0,d=1/0,p=-1/0;const g=/texture|gradient/i;n=e?this._matrix:fs(this);for(let n=0;n<this.children.length;n++){const i=this.children[n];i.visible&&!g.test(i._renderer.type)&&(t=i.getBoundingClientRect(e),a="number"!=typeof t.top||Ks.isNaN(t.top)||!isFinite(t.top),l="number"!=typeof t.left||Ks.isNaN(t.left)||!isFinite(t.left),c="number"!=typeof t.right||Ks.isNaN(t.right)||!isFinite(t.right),h="number"!=typeof t.bottom||Ks.isNaN(t.bottom)||!isFinite(t.bottom),a||l||c||h||(d=vo(t.top,d),u=vo(t.left,u),f=bo(t.right,f),p=bo(t.bottom,p)))}return e&&(i=n.multiply(u,d,1),r=n.multiply(u,p,1),s=n.multiply(f,d,1),o=n.multiply(f,p,1),d=vo(i.y,r.y,s.y,o.y),u=vo(i.x,r.x,s.x,o.x),f=bo(i.x,r.x,s.x,o.x),p=bo(i.y,r.y,s.y,o.y)),{top:d,left:u,right:f,bottom:p,width:f-u,height:p-d}}noFill(){return this.children.forEach((function(e){e.noFill()})),this}noStroke(){return this.children.forEach((function(e){e.noStroke()})),this}subdivide(){const e=arguments;return this.children.forEach((function(t){t.subdivide.apply(t,e)})),this}_update(){let e,t,n;if(this._flagBeginning||this._flagEnding){const i=Math.min(this._beginning,this._ending),r=Math.max(this._beginning,this._ending),s=this.length;let o=0;const a=i*s,l=r*s;for(e=0;e<this.children.length;e++)n=this.children[e],t=n.length,a>o+t?(n.beginning=1,n.ending=1):l<o?(n.beginning=0,n.ending=0):a>o&&a<o+t?(n.beginning=(a-o)/t,n.ending=1):l>o&&l<o+t?(n.beginning=0,n.ending=(l-o)/t):(n.beginning=0,n.ending=1),o+=t}return super._update.apply(this,arguments)}flagReset(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,super.flagReset.call(this),this}}const wo={visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._flagVisible=this._visible!==e||this._flagVisible,this._visible=e}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._flagOpacity=this._opacity!==e||this._flagOpacity,this._opacity=e}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(e){this._flagBeginning=this._beginning!==e||this._flagBeginning,this._beginning=e}},ending:{enumerable:!0,get:function(){return this._ending},set:function(e){this._flagEnding=this._ending!==e||this._flagEnding,this._ending=e}},length:{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(let e=0;e<this.children.length;e++){const t=this.children[e];this._length+=t.length}}return this._length}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){this._fill=e;for(let t=0;t<this.children.length;t++)this.children[t].fill=e}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){this._stroke=e;for(let t=0;t<this.children.length;t++)this.children[t].stroke=e}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e;for(let t=0;t<this.children.length;t++)this.children[t].linewidth=e}},join:{enumerable:!0,get:function(){return this._join},set:function(e){this._join=e;for(let t=0;t<this.children.length;t++)this.children[t].join=e}},miter:{enumerable:!0,get:function(){return this._miter},set:function(e){this._miter=e;for(let t=0;t<this.children.length;t++)this.children[t].miter=e}},cap:{enumerable:!0,get:function(){return this._cap},set:function(e){this._cap=e;for(let t=0;t<this.children.length;t++)this.children[t].cap=e}},closed:{enumerable:!0,get:function(){return this._closed},set:function(e){this._closed=e;for(let t=0;t<this.children.length;t++)this.children[t].closed=e}},curved:{enumerable:!0,get:function(){return this._curved},set:function(e){this._curved=e;for(let t=0;t<this.children.length;t++)this.children[t].curved=e}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(e){this._automatic=e;for(let t=0;t<this.children.length;t++)this.children[t].automatic=e}},children:{enumerable:!0,get:function(){return this._children},set:function(e){const t=xo.InsertChildren.bind(this),n=xo.RemoveChildren.bind(this),i=xo.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&n(this._children)),this._children=new yo(e),this._children.bind(ys.Types.insert,t),this._children.bind(ys.Types.remove,n),this._children.bind(ys.Types.order,i),e.length>0&&t(e)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,Ks.isObject(e)&&!e.clip&&(e.clip=!0)}}};function ko(e,t){const n=e.parent;let i;function r(){t.subtractions.length>0&&(i=Array.prototype.indexOf.call(t.subtractions,e),i>=0&&t.subtractions.splice(i,1)),t.additions.length>0&&(i=Array.prototype.indexOf.call(t.additions,e),i>=0&&t.additions.splice(i,1)),e.parent=t,t.additions.push(e),t._flagAdditions=!0}function s(){i=Array.prototype.indexOf.call(n.additions,e),i>=0&&n.additions.splice(i,1),i=Array.prototype.indexOf.call(n.subtractions,e),i<0&&(n.subtractions.push(e),n._flagSubtractions=!0)}n!==t?(n&&n.children.ids[e.id]&&(i=Array.prototype.indexOf.call(n.children,e),n.children.splice(i,1),s()),t?r():(s(),n._flagAdditions&&0===n.additions.length&&(n._flagAdditions=!1),n._flagSubtractions&&0===n.subtractions.length&&(n._flagSubtractions=!1),delete e.parent)):r()}const So=new ks,Eo=[],Mo=Math.max,Ro=Math.min,To=Math.abs,Co=Math.sin,Oo=Math.cos,Po=Math.acos,Ao=Math.sqrt,jo={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(e,t){return e.tagName=e.nodeName=t||"canvas",e.nodeType=1,e.getAttribute=function(e){return this[e]},e.setAttribute=function(e,t){return this[e]=t,this},e},group:{renderChild:function(e){jo[e._renderer.type].render.call(e,this.ctx,!0,this.clip)},render:function(e){if(!this._visible)return this;this._update();const t=this._matrix.elements,n=this.parent;this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1);const i=this._mask,r=Io(t),s=!r||!!i;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=e,s&&(e.save(),r||e.transform(t[0],t[3],t[1],t[4],t[2],t[5])),i&&jo[i._renderer.type].render.call(i,e,!0),this._opacity>0&&0!==this._scale)for(let t=0;t<this.children.length;t++){const n=this.children[t];jo[n._renderer.type].render.call(n,e)}return s&&e.restore(),this.flagReset()}},path:{render:function(e,t,n){let i,r,s,o,a,l,c,h,u,f,d,p,g,m,_,y,v,b,x,w,k,S,E,M,R,T,C,O,P,A,j,F,L,I,z,N,D,B,V,H,U;if(I=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,P=this._mask,A=this._clip,a=this._opacity*(I||1),l=this._visible,!t&&(!l||A||0===a))return this;this._update(),i=this._matrix.elements,r=this._stroke,s=this._linewidth,o=this._fill,c=this._cap,h=this._join,u=this._miter,f=this._closed,d=this._renderer.vertices,p=d.length,g=p-1,j=Io(i),L=this.dashes,j||(e.save(),e.transform(i[0],i[3],i[1],i[4],i[2],i[5])),P&&jo[P._renderer.type].render.call(P,e,!0),o&&("string"==typeof o?e.fillStyle=o:(jo[o._renderer.type].render.call(o,e,this),e.fillStyle=o._renderer.effect)),r&&("string"==typeof r?e.strokeStyle=r:(jo[r._renderer.type].render.call(r,e,this),e.strokeStyle=r._renderer.effect),s&&(e.lineWidth=s),u&&(e.miterLimit=u),h&&(e.lineJoin=h),!f&&c&&(e.lineCap=c)),"number"==typeof a&&(e.globalAlpha=a),L&&L.length>0&&(e.lineDashOffset=L.offset||0,e.setLineDash(L)),e.beginPath();for(let t=0;t<p;t++)switch(y=d[t],C=y.x,O=y.y,y.command){case"Z":e.closePath();break;case"A":z=y.rx,N=y.ry,D=y.xAxisRotation,B=y.largeArcFlag,V=y.sweepFlag,m=f?ps(t-1,p):Mo(t-1,0),_=d[m],H=_.x,U=_.y,jo.renderSvgArcCommand(e,H,U,z,N,B,V,D,C,O);break;case Ps:m=f?ps(t-1,p):Math.max(t-1,0),_=d[m],E=_.controls&&_.controls.right||Fs.zero,M=y.controls&&y.controls.left||Fs.zero,_._relative?(k=E.x+_.x,S=E.y+_.y):(k=E.x,S=E.y),y._relative?(x=M.x+y.x,w=M.y+y.y):(x=M.x,w=M.y),e.bezierCurveTo(k,S,x,w,C,O),t>=g&&f&&(v=b,R=y.controls&&y.controls.right||Fs.zero,T=v.controls&&v.controls.left||Fs.zero,y._relative?(k=R.x+y.x,S=R.y+y.y):(k=R.x,S=R.y),v._relative?(x=T.x+v.x,w=T.y+v.y):(x=T.x,w=T.y),C=v.x,O=v.y,e.bezierCurveTo(k,S,x,w,C,O));break;case Os:e.lineTo(C,O);break;case Cs:b=y,e.moveTo(C,O)}return f&&e.closePath(),A||n||(jo.isHidden.test(o)||(F=o._renderer&&o._renderer.offset,F&&(e.save(),e.translate(-o._renderer.offset.x,-o._renderer.offset.y),e.scale(o._renderer.scale.x,o._renderer.scale.y)),e.fill(),F&&e.restore()),jo.isHidden.test(r)||(F=r._renderer&&r._renderer.offset,F&&(e.save(),e.translate(-r._renderer.offset.x,-r._renderer.offset.y),e.scale(r._renderer.scale.x,r._renderer.scale.y),e.lineWidth=s/r._renderer.scale.x),e.stroke(),F&&e.restore())),j||e.restore(),A&&!n&&e.clip(),L&&L.length>0&&e.setLineDash(Eo),this.flagReset()}},points:{render:function(e,t,n){let i,r,s,o,a,l,c,h,u,f,d,p,g,m,_,y;if(y=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,a=this._opacity*(y||1),l=this._visible,!(t||l&&0!==a))return this;this._update(),i=this._matrix.elements,r=this._stroke,s=this._linewidth,o=this._fill,h=this._renderer.collection,u=h.length,g=Io(i),_=this.dashes,c=this._size,g||(e.save(),e.transform(i[0],i[3],i[1],i[4],i[2],i[5])),o&&("string"==typeof o?e.fillStyle=o:(jo[o._renderer.type].render.call(o,e,this),e.fillStyle=o._renderer.effect)),r&&("string"==typeof r?e.strokeStyle=r:(jo[r._renderer.type].render.call(r,e,this),e.strokeStyle=r._renderer.effect),s&&(e.lineWidth=s)),"number"==typeof a&&(e.globalAlpha=a),_&&_.length>0&&(e.lineDashOffset=_.offset||0,e.setLineDash(_)),e.beginPath();let v,b=.5*c;this._sizeAttenuation||(fs(this,So),v=So.elements,v=function(e,t,n,i,r,s){let o;return arguments.length<=1?(o=e.a,t=e.b,n=e.c,i=e.d,r=e.e,s=e.f):o=e,{translateX:r,translateY:s,scaleX:Math.sqrt(o*o+t*t),scaleY:Math.sqrt(n*n+i*i),rotation:180*Math.atan2(t,o)/Math.PI}}(v[0],v[3],v[1],v[4],v[2],v[5]),b/=Math.max(v.scaleX,v.scaleY));for(let t=0;t<u;t++)f=h[t],d=f.x,p=f.y,e.moveTo(d+b,p),e.arc(d,p,b,0,hs);return n||(jo.isHidden.test(o)||(m=o._renderer&&o._renderer.offset,m&&(e.save(),e.translate(-o._renderer.offset.x,-o._renderer.offset.y),e.scale(o._renderer.scale.x,o._renderer.scale.y)),e.fill(),m&&e.restore()),jo.isHidden.test(r)||(m=r._renderer&&r._renderer.offset,m&&(e.save(),e.translate(-r._renderer.offset.x,-r._renderer.offset.y),e.scale(r._renderer.scale.x,r._renderer.scale.y),e.lineWidth=s/r._renderer.scale.x),e.stroke(),m&&e.restore())),g||e.restore(),_&&_.length>0&&e.setLineDash(Eo),this.flagReset()}},text:{render:function(e,t,n){const i=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,r=this._opacity*i,s=this._visible,o=this._mask,a=this._clip;if(!t&&(!s||a||0===r))return this;this._update();const l=this._matrix.elements,c=this._stroke,h=this._linewidth,u=this._fill,f=this._decoration,d=Io(l),p=u._renderer&&u._renderer.offset&&c._renderer&&c._renderer.offset,g=this.dashes,m=jo.alignments[this._alignment]||this._alignment,_=this._baseline;let y,v,b,x,w,k,S,E,M,R,T;if(d||(e.save(),e.transform(l[0],l[3],l[1],l[4],l[2],l[5])),o&&jo[o._renderer.type].render.call(o,e,!0),p||(e.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),e.textAlign=m,e.textBaseline=_,u&&("string"==typeof u?e.fillStyle=u:(jo[u._renderer.type].render.call(u,e,this),e.fillStyle=u._renderer.effect)),c&&("string"==typeof c?e.strokeStyle=c:(jo[c._renderer.type].render.call(c,e,this),e.strokeStyle=c._renderer.effect),h&&(e.lineWidth=h)),"number"==typeof r&&(e.globalAlpha=r),g&&g.length>0&&(e.lineDashOffset=g.offset||0,e.setLineDash(g)),a||n||(jo.isHidden.test(u)||(u._renderer&&u._renderer.offset?(k=u._renderer.scale.x,S=u._renderer.scale.y,e.save(),e.translate(-u._renderer.offset.x,-u._renderer.offset.y),e.scale(k,S),y=this._size/u._renderer.scale.y,v=this._leading/u._renderer.scale.y,e.font=[this._style,this._weight,y+"px/",v+"px",this._family].join(" "),b=u._renderer.offset.x/u._renderer.scale.x,x=u._renderer.offset.y/u._renderer.scale.y,e.fillText(this.value,b,x),e.restore()):e.fillText(this.value,0,0)),jo.isHidden.test(c)||(c._renderer&&c._renderer.offset?(k=c._renderer.scale.x,S=c._renderer.scale.y,e.save(),e.translate(-c._renderer.offset.x,-c._renderer.offset.y),e.scale(k,S),y=this._size/c._renderer.scale.y,v=this._leading/c._renderer.scale.y,e.font=[this._style,this._weight,y+"px/",v+"px",this._family].join(" "),b=c._renderer.offset.x/c._renderer.scale.x,x=c._renderer.offset.y/c._renderer.scale.y,w=h/c._renderer.scale.x,e.lineWidth=w,e.strokeText(this.value,b,x),e.restore()):e.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(f)){const t=e.measureText(this.value);let n=1;switch(f){case"underline":M=t.actualBoundingBoxAscent,T=t.actualBoundingBoxAscent;break;case"strikethrough":M=0,T=0,n=.5}switch(_){case"top":M+=this._size*n,T+=this._size*n;break;case"baseline":case"bottom":M-=this._size*n,T-=this._size*n}switch(m){case"left":case"start":E=0,R=t.width;break;case"right":case"end":E=-t.width,R=0;break;default:E=-t.width/2,R=t.width/2}e.lineWidth=Math.max(Math.floor(this._size/15),1),e.strokeStyle=e.fillStyle,e.beginPath(),e.moveTo(E,M),e.lineTo(R,T),e.stroke()}return d||e.restore(),a&&!n&&e.clip(),g&&g.length>0&&e.setLineDash(Eo),this.flagReset()}},"linear-gradient":{render:function(e,t){if(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let n,i=this.left._x,r=this.left._y,s=this.right._x,o=this.right._y;/objectBoundingBox/i.test(this._units)&&(n=t.getBoundingClientRect(!0),i=(i-.5)*n.width,r=(r-.5)*n.height,s=(s-.5)*n.width,o=(o-.5)*n.height),this._renderer.effect=e.createLinearGradient(i,r,s,o);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return this.flagReset()}}},"radial-gradient":{render:function(e,t){if(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let n,i=this.center._x,r=this.center._y,s=this.focal._x,o=this.focal._y,a=this._radius;/objectBoundingBox/i.test(this._units)&&(n=t.getBoundingClientRect(!0),i=i*n.width*.5,r=r*n.height*.5,s=s*n.width*.5,o=o*n.height*.5,a*=.5*Math.min(n.width,n.height)),this._renderer.effect=e.createRadialGradient(i,r,0,s,o,a);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return this.flagReset()}}},texture:{render:function(e){this._update();const t=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=e.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof Fs||(this._renderer.offset=new Fs),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,t&&(this._renderer.offset.x+=t.width/2,this._renderer.offset.y+=t.height/2,this._scale instanceof Fs?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof Fs||(this._renderer.scale=new Fs),this._scale instanceof Fs?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(e,t,n,i,r,s,o,a,l,c){a=a*Math.PI/180,i=To(i),r=To(r);const h=(t-l)/2,u=(n-c)/2,f=Oo(a)*h+Co(a)*u,d=-Co(a)*h+Oo(a)*u,p=f*f,g=d*d;let m=i*i,_=r*r;const y=p/m+g/_;if(y>1){const e=Ao(y);i*=e,r*=e,m=i*i,_=r*r}const v=m*g+_*p;let b=Ao(Mo(0,(m*_-v)/v));s===o&&(b=-b);const x=b*i*d/r,w=-b*r*f/i,k=Oo(a)*x-Co(a)*w+(t+l)/2,S=Co(a)*x+Oo(a)*w+(n+c)/2,E=Lo(1,0,(f-x)/i,(d-w)/r);!function(e,t,n,i,r,s,o,a,l){const c=o-s,h=Bs.Tolerance.epsilon,u=Math.abs(c)<h;let f=ps(c,hs);f<h&&(f=u?0:hs),!0!==a||u||(f===hs?f=-hs:f-=hs);for(let o=0;o<12;o++){const a=s+o/11*f;let c=t+i*Math.cos(a),h=n+r*Math.sin(a);if(0!==l){const e=Math.cos(l),i=Math.sin(l),r=c-t,s=h-n;c=r*e-s*i+t,h=r*i+s*e+n}e.lineTo(c,h)}}(e,k,S,i,r,E,E+Lo((f-x)/i,(d-w)/r,(-f-x)/i,(-d-w)/r)%hs,0===o,a)}};class Fo extends ys{constructor(e){super();const t=!1!==e.smoothing;this.domElement=e.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=e.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=t),this.scene=new xo,this.scene.parent=this}static Utils=jo;setSize(e,t,n){var i;return this.width=e,this.height=t,this.ratio=void 0===n?(i=this.ctx,_o/function(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1}(i)):n,this.domElement.width=e*this.ratio,this.domElement.height=t*this.ratio,this.domElement.style&&Ks.extend(this.domElement.style,{width:e+"px",height:t+"px"}),this.trigger(ys.Types.resize,e,t,n)}render(){const e=1===this.ratio;return e||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),jo.group.render.call(this.scene,this.ctx),e||this.ctx.restore(),this}}function Lo(e,t,n,i){const r=e*n+t*i,s=Ao(e*e+t*t)*Ao(n*n+i*i);let o=Po(Mo(-1,Ro(1,r/s)));return e*i-t*n<0&&(o=-o),o}function Io(e){return 1==e[0]&&0==e[3]&&0==e[1]&&1==e[4]&&0==e[2]&&0==e[5]}const zo={Image:null,isHeadless:!1,shim:function(e,t){return Fo.Utils.shim(e),void 0!==t&&(zo.Image=t),zo.isHeadless=!0,e}};class No{map={};constructor(){}add(e,t){return this.map[e]=t,this}remove(e){return delete this.map[e],this}get(e){return this.map[e]}contains(e){return e in this.map}}let Do;const Bo={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};ls.document&&(Do=document.createElement("a"));class Vo extends Qs{_flagSrc=!1;_flagImage=!1;_flagVideo=!1;_flagLoaded=!1;_flagRepeat=!1;_flagOffset=!1;_flagScale=!1;_src="";_image=null;_loaded=!1;_repeat="no-repeat";_scale=1;_offset=null;constructor(e,t){super(),this._renderer={};for(let e in Ho)Object.defineProperty(this,e,Ho[e]);if(this._renderer.type="texture",this._renderer.flagOffset=Uo.bind(this),this._renderer.flagScale=Wo.bind(this),this.id=Ns+Ds(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new Fs,"function"==typeof t){const e=function(){this.unbind(ys.Types.load,e),"function"==typeof t&&t()}.bind(this);this.bind(ys.Types.load,e)}if("string"==typeof e)this.src=e;else if("object"==typeof e){const t=Object.prototype.toString.call(e);"[object HTMLImageElement]"!==t&&"[object HTMLCanvasElement]"!==t&&"[object HTMLVideoElement]"!==t&&"[object Image]"!==t||(this.image=e)}this._update()}static Properties=["src","loaded","repeat","scale","offset","image"];static RegularExpressions=Bo;static ImageRegistry=new No;static getAbsoluteURL(e){return Do?(Do.href=e,Do.href):e}static loadHeadlessBuffer(e,t){e.image.onload=t,e.image.src=e.src}static getTag(e){return e&&e.nodeName&&e.nodeName.toLowerCase()||"img"}static getImage(e){const t=Vo.getAbsoluteURL(e);if(Vo.ImageRegistry.contains(t))return Vo.ImageRegistry.get(t);let n;return zo.Image?(n=new zo.Image,Fo.Utils.shim(n,"img")):ls.document?n=Bo.video.test(t)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),n.crossOrigin="anonymous",n}static Register={canvas:function(e,t){e._src="#"+e.id,Vo.ImageRegistry.add(e.src,e.image),"function"==typeof t&&t()},img:function(e,t){const n=e.image,i=function(e){!zo.isHeadless&&n.removeEventListener&&"function"==typeof n.removeEventListener&&(n.removeEventListener("load",i,!1),n.removeEventListener("error",r,!1)),"function"==typeof t&&t()},r=function(t){throw zo.isHeadless||"function"!=typeof n.removeEventListener||(n.removeEventListener("load",i,!1),n.removeEventListener("error",r,!1)),new mo("unable to load "+e.src)};"number"==typeof n.width&&n.width>0&&"number"==typeof n.height&&n.height>0?i():zo.isHeadless||"function"!=typeof n.addEventListener||(n.addEventListener("load",i,!1),n.addEventListener("error",r,!1)),e._src=Vo.getAbsoluteURL(e._src),!zo.isHeadless&&n&&n.getAttribute("two-src")||(zo.isHeadless||n.setAttribute("two-src",e.src),Vo.ImageRegistry.add(e.src,n),zo.isHeadless?Vo.loadHeadlessBuffer(e,i):e.image.src=e.src)},video:function(e,t){if(zo.isHeadless)throw new mo("video textures are not implemented in headless environments.");const n=function(r){e.image.removeEventListener("canplaythrough",n,!1),e.image.removeEventListener("error",i,!1),e.image.width=e.image.videoWidth,e.image.height=e.image.videoHeight,"function"==typeof t&&t()},i=function(t){throw e.image.removeEventListener("canplaythrough",n,!1),e.image.removeEventListener("error",i,!1),new mo("unable to load "+e.src)};e._src=Vo.getAbsoluteURL(e._src),e.image.getAttribute("two-src")||(e.image.setAttribute("two-src",e.src),Vo.ImageRegistry.add(e.src,e.image)),e.image.readyState>=4?n():(e.image.addEventListener("canplaythrough",n,!1),e.image.addEventListener("error",i,!1),e.image.src=e.src,e.image.load())}};static load(e,t){let n=e.image,i=Vo.getTag(n);e._flagImage&&(/canvas/i.test(i)?Vo.Register.canvas(e,t):(e._src=!zo.isHeadless&&n.getAttribute("two-src")||n.src,Vo.Register[i](e,t))),e._flagSrc&&(n||(n=Vo.getImage(e.src),e.image=n),i=Vo.getTag(n),Vo.Register[i](e,t))}clone(){const e=new Vo(this.src);return e.repeat=this.repeat,e.offset.copy(this.origin),e.scale=this.scale,e}toObject(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}}_update(){return(this._flagSrc||this._flagImage)&&(this.trigger(ys.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,Vo.load(this,function(){this.loaded=!0,this.trigger(ys.Types.change).trigger(ys.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this}flagReset(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagRepeat=this._flagVideo=this._flagScale=this._flagOffset=!1,super.flagReset.call(this),this}}const Ho={src:{enumerable:!0,get:function(){return this._src},set:function(e){this._src=e,this._flagSrc=!0}},loaded:{enumerable:!0,get:function(){return this._loaded},set:function(e){this._loaded=e,this._flagLoaded=!0}},repeat:{enumerable:!0,get:function(){return this._repeat},set:function(e){this._repeat=e,this._flagRepeat=!0}},image:{enumerable:!0,get:function(){return this._image},set:function(e){let t;t="canvas"===Vo.getTag(e)?"#"+e.id:e.src,Vo.ImageRegistry.contains(t)?this._image=Vo.ImageRegistry.get(e.src):this._image=e,this._flagImage=!0}},offset:{enumerable:!0,get:function(){return this._offset},set:function(e){this._offset&&this._offset.unbind(ys.Types.change,this._renderer.flagOffset),this._offset=e,this._offset.bind(ys.Types.change,this._renderer.flagOffset),this._flagOffset=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof Fs&&this._scale.unbind(ys.Types.change,this._renderer.flagScale),this._scale=e,this._scale instanceof Fs&&this._scale.bind(ys.Types.change,this._renderer.flagScale),this._flagScale=!0}}};function Uo(){this._flagOffset=!0}function Wo(){this._flagScale=!0}const $o=Math.min,Yo=Math.max,Xo=Math.ceil,qo=Math.floor,Ko=new Fs;class Qo extends Js{_flagVertices=!0;_flagLength=!0;_flagFill=!0;_flagStroke=!0;_flagLinewidth=!0;_flagOpacity=!0;_flagVisible=!0;_flagCap=!0;_flagJoin=!0;_flagMiter=!0;_flagMask=!1;_flagClip=!1;_length=0;_fill="#fff";_stroke="#000";_linewidth=1;_opacity=1;_visible=!0;_cap="round";_join="round";_miter=4;_closed=!0;_curved=!1;_automatic=!0;_beginning=0;_ending=1;_mask=null;_clip=!1;_dashes=null;constructor(e,t,n,i){super();for(let e in Go)Object.defineProperty(this,e,Go[e]);this._renderer.type="path",this._renderer.flagVertices=Jo.bind(this),this._renderer.bindVertices=Zo.bind(this),this._renderer.unbindVertices=ea.bind(this),this._renderer.flagFill=ta.bind(this),this._renderer.flagStroke=na.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this.closed=!!t,this.curved=!!n,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=e,this.automatic=!i,this.dashes=[],this.dashes.offset=0}static Properties=["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"];static Utils={getCurveLength:Ys};clone(e){const t=new Qo;for(let e=0;e<this.vertices.length;e++)t.vertices.push(this.vertices[e].clone());for(let e=0;e<Qo.Properties.length;e++){const n=Qo.Properties[e];t[n]=this[n]}return t.className=this.className,t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e={vertices:this.vertices.map((function(e){return e.toObject()}))};return Ks.each(Qo.Properties,(function(t){void 0!==this[t]&&(this[t].toObject?e[t]=this[t].toObject():e[t]=this[t])}),this),e.className=this.className,e.translation=this.translation.toObject(),e.rotation=this.rotation,e.scale=this.scale instanceof Fs?this.scale.toObject():this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&(e.matrix=this.matrix.toObject()),e}noFill(){return this.fill="transparent",this}noStroke(){return this.stroke=void 0,this}corner(){const e=this.getBoundingClientRect(!0),t=e.width/2,n=e.height/2,i=e.left+e.width/2,r=e.top+e.height/2;for(let e=0;e<this.vertices.length;e++){const s=this.vertices[e];s.x-=i,s.y-=r,s.x+=t,s.y+=n}return this.mask&&(this.mask.translation.x-=i,this.mask.translation.x+=t,this.mask.translation.y-=r,this.mask.translation.y+=n),this}center(){const e=this.getBoundingClientRect(!0),t=e.left+e.width/2-this.translation.x,n=e.top+e.height/2-this.translation.y;for(let e=0;e<this.vertices.length;e++){const i=this.vertices[e];i.x-=t,i.y-=n}return this.mask&&(this.mask.translation.x-=t,this.mask.translation.y-=n),this}getBoundingClientRect(e){let t,n,i,r,s,o,a,l,c,h,u,f,d,p,g=1/0,m=-1/0,_=1/0,y=-1/0;if(this._update(!0),t=e?this._matrix:fs(this),n=(this.linewidth||0)/2,i=this._renderer.vertices.length,i<=0)return{width:0,height:0};for(r=0;r<i;r++)if(o=this._renderer.vertices[r],s=this._renderer.vertices[(r+i-1)%i],s.controls&&o.controls){a=s.controls.right.x,l=s.controls.right.y,s.relative&&(a+=s.x,l+=s.y),c=o.controls.left.x,h=o.controls.left.y,o.relative&&(c+=o.x,h+=o.y);const e=Hs(s.x,s.y,a,l,c,h,o.x,o.y);_=$o(e.min.y-n,_),g=$o(e.min.x-n,g),m=Yo(e.max.x+n,m),y=Yo(e.max.y+n,y)}else r<=1&&(_=$o(s.y-n,_),g=$o(s.x-n,g),m=Yo(s.x+n,m),y=Yo(s.y+n,y)),_=$o(o.y-n,_),g=$o(o.x-n,g),m=Yo(o.x+n,m),y=Yo(o.y+n,y);return u=t.multiply(g,_,1),f=t.multiply(g,y,1),d=t.multiply(m,_,1),p=t.multiply(m,y,1),_=$o(u.y,f.y,d.y,p.y),g=$o(u.x,f.x,d.x,p.x),m=Yo(u.x,f.x,d.x,p.x),y=Yo(u.y,f.y,d.y,p.y),{top:_,left:g,right:m,bottom:y,width:m-g,height:y-_}}getPointAt(e,t){let n,i,r,s,o,a,l,c,h,u,f,d,p,g,m,_=this.length*Math.min(Math.max(e,0),1);const y=this.vertices.length,v=y-1;let b=null,x=null;for(let t=0,r=this._lengths.length,s=0;t<r;t++){if(s+this._lengths[t]>=_){this._closed?(n=ps(t,y),i=ps(t-1,y),0===t&&(n=i,i=t)):(n=t,i=Math.min(Math.max(t-1,0),v)),b=this.vertices[n],x=this.vertices[i],_-=s,e=0!==this._lengths[t]?_/this._lengths[t]:0;break}s+=this._lengths[t]}if(null===b||null===x)return null;if(!b)return x;if(!x)return b;m=x.controls&&x.controls.right,g=b.controls&&b.controls.left,o=x.x,u=x.y,a=(m||x).x,f=(m||x).y,l=(g||b).x,d=(g||b).y,c=b.x,p=b.y,m&&x.relative&&(a+=x.x,f+=x.y),g&&b.relative&&(l+=b.x,d+=b.y),s=Vs(e,o,a,l,c),h=Vs(e,u,f,d,p);const w=ds(o,a,e),k=ds(u,f,e),S=ds(a,l,e),E=ds(f,d,e),M=ds(l,c,e),R=ds(d,p,e),T=ds(w,S,e),C=ds(k,E,e),O=ds(S,M,e),P=ds(E,R,e);return Ks.isObject(t)?(t.x=s,t.y=h,t instanceof Ls&&(t.controls.left.x=T,t.controls.left.y=C,t.controls.right.x=O,t.controls.right.y=P,("boolean"!=typeof t.relative||t.relative)&&(t.controls.left.x-=s,t.controls.left.y-=h,t.controls.right.x-=s,t.controls.right.y-=h)),t.t=e,t):(r=new Ls(s,h,T-s,C-h,O-s,P-h,this._curved?Ps:Os),r.t=e,r)}plot(){if(this.curved)return function(e,t){const n=e.length,i=n-1;for(let r=0;r<n;r++){const s=e[r],o=t?ps(r-1,n):Math.max(r-1,0),a=t?ps(r+1,n):Math.min(r+1,i),l=s;Us(e[o],l,e[a]),l.command=0===r?Cs:Ps}}(this._collection,this.closed),this;for(let e=0;e<this._collection.length;e++)this._collection[e].command=0===e?Cs:Os;return this}subdivide(e){this._update();const t=this.vertices.length-1,n=this._closed||"Z"===this.vertices[t]._command;let i,r=this.vertices[t],s=[];return Ks.each(this.vertices,(function(o,a){if(a<=0&&!n)r=o;else{if(o.command===Cs)return s.push(new Ls(r.x,r.y)),a>0&&(s[s.length-1].command=Os),void(r=o);i=Xs(o,r,e),s=s.concat(i),Ks.each(i,(function(e,t){t<=0&&r.command===Cs?e.command=Cs:e.command=Os})),a>=t&&(this._closed&&this._automatic?(r=o,i=Xs(o,r,e),s=s.concat(i),Ks.each(i,(function(e,t){t<=0&&r.command===Cs?e.command=Cs:e.command=Os}))):n&&s.push(new Ls(o.x,o.y)),s[s.length-1].command=n?"Z":Os),r=o}}),this),this._automatic=!1,this._curved=!1,this.vertices=s,this}_updateLength(e,t){t||this._update();const n=this.vertices.length-1;let i=this.vertices[n],r=0;return void 0===this._lengths&&(this._lengths=[]),Ks.each(this.vertices,(function(t,n){if(n<=0||t.command===Cs)return i=t,void(this._lengths[n]=0);this._lengths[n]=Ys(t,i,e),r+=this._lengths[n],i=t}),this),this._length=r,this._flagLength=!1,this}_update(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);const e=this._collection.length,t=this._closed,n=Math.min(this._beginning,this._ending),i=Math.max(this._beginning,this._ending),r=$s(this,n*this._length),s=$s(this,i*this._length),o=Xo(r),a=qo(s);let l,c,h,u,f,d;for(this._renderer.vertices.length=0,d=0;d<e;d++)this._renderer.collection.length<=d&&this._renderer.collection.push(new Ls),d>a&&!c?(f=this._renderer.collection[d].copy(this._collection[d]),this.getPointAt(i,f),f.command=this._renderer.collection[d].command,this._renderer.vertices.push(f),c=f,h=this._collection[d-1],h&&h.controls&&(f.relative?f.controls.right.clear():f.controls.right.copy(f),h.relative?this._renderer.collection[d-1].controls.right.copy(h.controls.right).lerp(Fs.zero,1-f.t):this._renderer.collection[d-1].controls.right.copy(h.controls.right).lerp(h,1-f.t))):d>=o&&d<=a&&(f=this._renderer.collection[d].copy(this._collection[d]),this._renderer.vertices.push(f),d===a&&Ws(this,i)?(c=f,!t&&c.controls&&(c.relative?c.controls.right.clear():c.controls.right.copy(c))):d===o&&Ws(this,n)&&(l=f,l.command=Cs,!t&&l.controls&&(l.relative?l.controls.left.clear():l.controls.left.copy(l))));o>0&&!l&&(d=o-1,f=this._renderer.collection[d].copy(this._collection[d]),this.getPointAt(n,f),f.command=Cs,this._renderer.vertices.unshift(f),u=this._collection[d+1],u&&u.controls&&(f.controls.left.clear(),u.relative?this._renderer.collection[d+1].controls.left.copy(u.controls.left).lerp(Fs.zero,f.t):(Ko.copy(u),this._renderer.collection[d+1].controls.left.copy(u.controls.left).lerp(u,f.t))))}return Js.prototype._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,Js.prototype.flagReset.call(this),this}}const Go={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._visible=e,this._flagVisible=!0}},cap:{enumerable:!0,get:function(){return this._cap},set:function(e){this._cap=e,this._flagCap=!0}},join:{enumerable:!0,get:function(){return this._join},set:function(e){this._join=e,this._flagJoin=!0}},miter:{enumerable:!0,get:function(){return this._miter},set:function(e){this._miter=e,this._flagMiter=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof io||this._fill instanceof lo||this._fill instanceof uo||this._fill instanceof Vo)&&this._fill.unbind(ys.Types.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof io||this._fill instanceof lo||this._fill instanceof uo||this._fill instanceof Vo)&&this._fill.bind(ys.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof io||this._stroke instanceof lo||this._stroke instanceof uo||this._stroke instanceof Vo)&&this._stroke.unbind(ys.Types.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof io||this._stroke instanceof lo||this._stroke instanceof uo||this._stroke instanceof Vo)&&this._stroke.bind(ys.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},closed:{enumerable:!0,get:function(){return this._closed},set:function(e){this._closed=!!e,this._flagVertices=!0}},curved:{enumerable:!0,get:function(){return this._curved},set:function(e){this._curved=!!e,this._flagVertices=!0}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(e){if(e===this._automatic)return;this._automatic=!!e;const t=this._automatic?"ignore":"listen";Ks.each(this.vertices,(function(e){e[t]()}))}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(e){this._beginning=e,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(e){this._ending=e,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(e){const t=this._renderer.bindVertices,n=this._renderer.unbindVertices;this._collection&&this._collection.unbind(ys.Types.insert,t).unbind(ys.Types.remove,n),this._collection=e instanceof As?e:new As(e||[]),this._collection.bind(ys.Types.insert,t).bind(ys.Types.remove,n),t(this._collection)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,Ks.isObject(e)&&!e.clip&&(e.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(e){"number"!=typeof e.offset&&(e.offset=this.dashes&&this._dashes.offset||0),this._dashes=e}}};function Jo(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)}function Zo(e){let t=e.length;for(;t--;)e[t].bind(ys.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function ea(e){let t=e.length;for(;t--;)e[t].unbind(ys.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function ta(){this._flagFill=!0}function na(){this._flagStroke=!0}class ia extends Qo{_flagWidth=!1;_flagHeight=!1;_flagRadius=!1;_width=0;_height=0;_radius=12;constructor(e,t,n,i,r){void 0===r&&"number"==typeof n&&"number"==typeof i&&(r=Math.floor(Math.min(n,i)/12));const s=[];for(let e=0;e<10;e++)s.push(new Ls(0,0,0,0,0,0,0===e?Cs:Ps));super(s);for(let e in ra)Object.defineProperty(this,e,ra[e]);this.closed=!0,this.automatic=!1,this._renderer.flagRadius=sa.bind(this),"number"==typeof n&&(this.width=n),"number"==typeof i&&(this.height=i),"number"==typeof r&&(this.radius=r),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}static Properties=["width","height","radius"];_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagRadius){const e=this._width,t=this._height;let n,i,r;this._radius instanceof Fs?(n=this._radius.x,i=this._radius.y):(n=this._radius,i=this._radius);let s=e/2,o=t/2;r=this.vertices[0],r.x=-(s-n),r.y=-o,r=this.vertices[1],r.x=s-n,r.y=-o,r.controls.left.clear(),r.controls.right.x=n,r.controls.right.y=0,r=this.vertices[2],r.x=s,r.y=-(o-i),r.controls.right.clear(),r.controls.left.clear(),r=this.vertices[3],r.x=s,r.y=o-i,r.controls.left.clear(),r.controls.right.x=0,r.controls.right.y=i,r=this.vertices[4],r.x=s-n,r.y=o,r.controls.right.clear(),r.controls.left.clear(),r=this.vertices[5],r.x=-(s-n),r.y=o,r.controls.left.clear(),r.controls.right.x=-n,r.controls.right.y=0,r=this.vertices[6],r.x=-s,r.y=o-i,r.controls.left.clear(),r.controls.right.clear(),r=this.vertices[7],r.x=-s,r.y=-(o-i),r.controls.left.clear(),r.controls.right.x=0,r.controls.right.y=-i,r=this.vertices[8],r.x=-(s-n),r.y=-o,r.controls.left.clear(),r.controls.right.clear(),r=this.vertices[9],r.copy(this.vertices[8])}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,super.flagReset.call(this),this}clone(e){const t=this.width,n=this.height,i=this.radius,r=new ia(0,0,t,n,i);r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix);for(let e=0;e<Qo.Properties.length;e++){const t=Qo.Properties[e];r[t]=this[t]}return e&&e.add(r),r}toObject(){const e=super.toObject.call(this);for(let t=0;t<ia.Properties.length;t++){const n=ia.Properties[t];e[n]=this[n]}return e.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),e}}const ra={width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0}},radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius instanceof Fs&&this._radius.unbind(ys.Types.change,this._renderer.flagRadius),this._radius=e,this._radius instanceof Fs&&this._radius.bind(ys.Types.change,this._renderer.flagRadius),this._flagRadius=!0}}};function sa(){this._flagRadius=!0}const oa=Math.min,aa=Math.max;class la extends Js{_flagValue=!0;_flagFamily=!0;_flagSize=!0;_flagLeading=!0;_flagAlignment=!0;_flagBaseline=!0;_flagStyle=!0;_flagWeight=!0;_flagDecoration=!0;_flagFill=!0;_flagStroke=!0;_flagLinewidth=!0;_flagOpacity=!0;_flagVisible=!0;_flagMask=!1;_flagClip=!1;_value="";_family="sans-serif";_size=13;_leading=17;_alignment="center";_baseline="middle";_style="normal";_weight=500;_decoration="none";_fill="#000";_stroke="transparent";_linewidth=1;_opacity=1;_visible=!0;_mask=null;_clip=!1;_dashes=null;constructor(e,t,n,i){super();for(let e in ca)Object.defineProperty(this,e,ca[e]);if(this._renderer.type="text",this._renderer.flagFill=ha.bind(this),this._renderer.flagStroke=ua.bind(this),this.value=e,"number"==typeof t&&(this.translation.x=t),"number"==typeof n&&(this.translation.y=n),this.dashes=[],this.dashes.offset=0,!Ks.isObject(i))return this;for(let e=0;e<la.Properties.length;e++){const t=la.Properties[e];t in i&&(this[t]=i[t])}}static Ratio=.6;static Properties=["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","fill","stroke"];clone(e){const t=new la(this.value);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale;for(let e=0;e<la.Properties.length;e++){const n=la.Properties[e];t[n]=this[n]}return this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};this.matrix.manual&&(e.matrix=this.matrix.toObject());for(let t=0;t<la.Properties.length;t++){const n=la.Properties[t];e[n]=this[n]}return e}noFill(){return this.fill="transparent",this}noStroke(){return this.stroke=void 0,this.linewidth=void 0,this}getBoundingClientRect(e){let t,n,i,r,s,o,a,l,c;this._update(!0),t=e?this._matrix:fs(this);const h=this.leading,u=this.value.length*this.size*la.Ratio,f=(this._linewidth||0)/2;switch(this.alignment){case"left":o=-f,a=u+f;break;case"right":o=-(u+f),a=f;break;default:o=-(u/2+f),a=u/2+f}switch(this.baseline){case"top":l=-f,c=h+f;break;case"bottom":l=-(h+f),c=f;break;default:l=-(h/2+f),c=h/2+f}return n=t.multiply(o,l,1),i=t.multiply(o,c,1),r=t.multiply(a,l,1),s=t.multiply(a,c,1),l=oa(n.y,i.y,r.y,s.y),o=oa(n.x,i.x,r.x,s.x),a=aa(n.x,i.x,r.x,s.x),c=aa(n.y,i.y,r.y,s.y),{top:l,left:o,right:a,bottom:c,width:a-o,height:c-l}}flagReset(){return super.flagReset.call(this),this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,this}}const ca={value:{enumerable:!0,get:function(){return this._value},set:function(e){this._value=e,this._flagValue=!0}},family:{enumerable:!0,get:function(){return this._family},set:function(e){this._family=e,this._flagFamily=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(e){this._size=e,this._flagSize=!0}},leading:{enumerable:!0,get:function(){return this._leading},set:function(e){this._leading=e,this._flagLeading=!0}},alignment:{enumerable:!0,get:function(){return this._alignment},set:function(e){this._alignment=e,this._flagAlignment=!0}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e,this._flagLinewidth=!0}},style:{enumerable:!0,get:function(){return this._style},set:function(e){this._style=e,this._flagStyle=!0}},weight:{enumerable:!0,get:function(){return this._weight},set:function(e){this._weight=e,this._flagWeight=!0}},decoration:{enumerable:!0,get:function(){return this._decoration},set:function(e){this._decoration=e,this._flagDecoration=!0}},baseline:{enumerable:!0,get:function(){return this._baseline},set:function(e){this._baseline=e,this._flagBaseline=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._visible=e,this._flagVisible=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof io||this._fill instanceof lo||this._fill instanceof uo||this._fill instanceof Vo)&&this._fill.unbind(ys.Types.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof io||this._fill instanceof lo||this._fill instanceof uo||this._fill instanceof Vo)&&this._fill.bind(ys.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof io||this._stroke instanceof lo||this._stroke instanceof uo||this._stroke instanceof Vo)&&this._stroke.unbind(ys.Types.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof io||this._stroke instanceof lo||this._stroke instanceof uo||this._stroke instanceof Vo)&&this._stroke.bind(ys.Types.change,this._renderer.flagStroke)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,Ks.isObject(e)&&!e.clip&&(e.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(e){"number"!=typeof e.offset&&(e.offset=this.dashes&&this._dashes.offset||0),this._dashes=e}}};function ha(){this._flagFill=!0}function ua(){this._flagStroke=!0}const fa=Math.cos,da=Math.sin;class pa extends Qo{_flagRadius=!1;_radius=0;constructor(e,t,n,i){const r=i?Math.max(i,2):4,s=[];for(let e=0;e<r;e++)s.push(new Ls(0,0,0,0,0,0));super(s,!0,!0,!0);for(let e in ga)Object.defineProperty(this,e,ga[e]);"number"==typeof n&&(this.radius=n),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}static Properties=["radius"];_update(){if(this._flagVertices||this._flagRadius){let e=this.vertices.length;!this._closed&&e>2&&(e-=1);const t=4/3*Math.tan(Math.PI/(2*e)),n=this._radius,i=n*t;for(let t=0;t<this.vertices.length;t++){const r=t/e*hs,s=n*fa(r),o=n*da(r),a=i*fa(r-us),l=i*da(r-us),c=i*fa(r+us),h=i*da(r+us),u=this.vertices[t];u.command=0===t?Cs:Ps,u.set(s,o),u.controls.left.set(a,l),u.controls.right.set(c,h)}}return super._update.call(this),this}flagReset(){return this._flagRadius=!1,super.flagReset.call(this),this}clone(e){const t=new pa(0,0,this.radius,this.vertices.length);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix);for(let e=0;e<Qo.Properties.length;e++){const n=Qo.Properties[e];t[n]=this[n]}return e&&e.add(t),t}toObject(){const e=super.toObject.call(this);for(let t=0;t<pa.Properties.length;t++){const n=pa.Properties[t];e[n]=this[n]}return e}}const ga={radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius=e,this._flagRadius=!0}}},ma=20;class _a{static GetRenderer(e,t,n=0){requestAnimationFrame((()=>{e.renderer.elem?t(e.renderer):n<2?setTimeout((()=>_a.GetRenderer(e,t,++n)),1e3):console.warn("shape renderer not formed, giving up...")}))}static CreateDeleteCircle(e,t){const n=new pa(e.x,e.y,ma),i=new la("X",e.x,e.y),r=new xo([n,i]);return this.GetRenderer(r,(e=>e.elem.addEventListener("mousedown",t))),{onMouseDown:t,root:r}}static RemoveDeleteCircle(e){e.root.remove(),e.root.renderer.elem.removeEventListener("mousedown",e.onMouseDown)}}const ya="flow-object-data";class va{constructor(e,t,n,i){this.ID=e,this.objectManager=t,this.zuiManager=n,this.eventHelper=i,this.root=new xo}static GetFlowObjectData(e){let t=e,n=null;return Array.from(new Array(3)).find((()=>!t||(n=t.getAttribute(ya),!!n||(t=t.parentElement,!1)))),n?JSON.parse(n):void 0}draw(){const e={type:this.type,id:this.ID};this.zuiManager.addToStage(this.stageType,this.root),_a.GetRenderer(this.root,(t=>{t.elem.setAttribute(ya,JSON.stringify(e))}))}deleted(){this.onDeleted(),this.root.remove()}drawSelectionOverlay(){const e=new xo;this.createSelectionOverlay().forEach((t=>e.add(t))),this.zuiManager.addToStage("selection",e)}}function ba(e,t){return e.reduce(((e,n,i)=>{const r=t(n,i);return void 0===r||(e[r]=n),e}),{})}const xa=3;class wa extends va{constructor(e,t,n,i,r,s,o){super(e,r,s,o),this.stepName=t,this.type="step",this.stageType="step",this.rectangle=new ia(n.x,n.y,100,40,3),this.text=new la(t,n.x,n.y),this.root.add(this.rectangle),this.root.add(this.text),this.applyStyle(i.style),this.afterDraw(),this.outputs=this.drawOutputs(i.outputs),this.inputs=this.drawInputs(i.inputs),this.inputConns=i.inputs.reduce(((e,t)=>(e[t.name]=[],e)),{}),this.outputConns=i.outputs.reduce(((e,t)=>(e[t]=[],e)),{}),this.outputsOrdered=i.outputs.map((e=>e)),this.inputsOrdered=i.inputs.map((e=>e.name))}get Options(){return{inputs:Object.keys(this.inputs),outputs:Object.keys(this.outputs)}}mouseDown(e){const t=Object.keys(this.outputs).find((t=>this.outputs[t].position.distanceTo(e)<=5));return t?{handled:!0,selecteds:[this.objectManager.addFlowConnection({step:this,output:t},{type:"point",surfacePoint:e})]}:{handled:!1}}createSelectionOverlay(){const e=this.rectangle.getBoundingClientRect(),t={x:e.left+1,y:e.top+1},n={x:e.right-1,y:e.bottom-1};return[{x:t.x,y:t.y},{x:t.x,y:n.y},{x:n.x,y:t.y},{x:n.x,y:n.y}].map((e=>{const t=new pa(e.x,e.y,xa);return t.fill="blue",t}))}moveBy(e,t){[this.rectangle,this.text].forEach((t=>t.position.add(e))),Object.keys(this.inputs).forEach((t=>this.inputs[t].position.add(e))),Object.keys(this.outputs).forEach((t=>this.outputs[t].position.add(e))),Object.keys(this.inputConns).forEach((e=>this.inputConns[e].forEach((e=>e.reDraw())))),this.reDrawOutConns(!1)}mouseUp(){}onDeleted(){const e=[];Object.keys(this.outputConns).forEach((t=>this.outputConns[t].forEach((t=>e.push(t.ID))))),Object.keys(this.inputConns).forEach((t=>this.inputConns[t].forEach((t=>e.push(t.ID))))),this.objectManager.deleteObjects(e)}reDraw(){throw new Error("FlowStep.reDraw() not implemented.")}reDrawOutConns(e){Object.keys(this.outputConns).forEach((e=>this.outputConns[e].forEach((e=>e.reDraw())))),e&&Object.keys(this.outputConns).forEach((e=>this.colorOutputs(e)))}getPosition(e){switch(e.type){case"input":return this.inputs[e.name].position;case"output":return this.outputs[e.name].position;case"self":return this.rectangle.position}}closestInput(e,t=[]){const n=Object.keys(this.inputs).filter((e=>-1==t.indexOf(e)));if(!n.length)return;const i=this.zuiManager.clientToSurfaceD(15),r=i*i;if(Math.abs(this.inputs[n[0]].position.x-e.x)>i)return;const s=Number.MAX_VALUE,o=n.map((t=>({distSq:this.inputs[t].position.distanceToSquared(e),key:t,input:this.inputs[t]}))).reduce(((e,t)=>t.distSq<s?t:e));return o.distSq<r?{input:o.key,distSq:o.distSq}:void 0}unregisterConnection(e,t,n){const i="input"==e?this.inputConns:this.outputConns;i[t]=i[t].filter((e=>n!=e)),"output"==e&&this.colorOutputs(t)}registerConnection(e,t,n){("input"==e?this.inputConns:this.outputConns)[t].push(n),"output"==e&&this.colorOutputs(t)}getConnectionTo(e,t,n){return this.outputConns[e].find((e=>"step"==e.to.type&&e.to.step==t&&e.to.input==n))}getConnectionsTo(e,t){return this.outputConns[e].filter((e=>"step"==e.to.type&&e.to.step==t))}drawInputs(e){const t=this.rectangle.position.x-50,n=this.rectangle.position.y-20;return this.drawIOs(e,t,n)}drawOutputs(e){const t=this.rectangle.position.x+50,n=this.rectangle.position.y-20;return this.drawIOs(e.map((e=>({name:e}))),t,n)}drawIOs(e,t,n){const i=40/(e.length+1);return e.reduce(((e,r,s)=>{var o;const a=new pa(t,n+(s+1)*i,5);return a.fill=null!==(o=r.color)&&void 0!==o?o:"#FFFFFF",this.root.add(a),e[r.name]=a,e}),{})}afterDraw(){_a.GetRenderer(this.text,(e=>{e.elem.style.userSelect="none"}))}applyStyle(e){e&&(e.fill&&(this.rectangle.fill=e.fill),e.stroke&&(this.rectangle.stroke=e.stroke))}colorOutputs(e){this.outputs[e]&&(this.outputs[e].fill=this.outputConns[e].length<=1?"#FFFFFF":"#2560cc")}setOutputs(e){const[t,n]=function(e,t){if(e.length+t.length<10&&e[0]instanceof String){const n=ba(e,(e=>e)),i=ba(t,(e=>e));return[e.filter((e=>void 0===i[e])),t.filter((e=>void 0===n[e]))]}return[e.filter((e=>-1===t.indexOf(e))),t.filter((t=>-1===e.indexOf(t)))]}(this.outputsOrdered,e);Object.keys(this.outputs).forEach((e=>this.outputs[e].remove())),this.outputsOrdered=e,this.outputs=this.drawOutputs(this.outputsOrdered),t.forEach((e=>{this.objectManager.deleteObjects(this.outputConns[e].map((e=>e.ID))),delete this.outputConns[e]})),this.reDrawOutConns(!0),n.forEach((e=>this.outputConns[e]=[]))}}class ka{constructor(){this.idCounter=0}next(){return(this.idCounter++).toString()}current(){return this.idCounter}load(e){this.idCounter=e}}class Sa extends Qo{constructor(e,t,n,i){super([new Ls(e,t),new Ls(n,i)]);for(let e in Ea)Object.defineProperty(this,e,Ea[e]);this.vertices[0].command=Cs,this.vertices[1].command=Os,this.automatic=!1}}const Ea={left:{enumerable:!0,get:function(){return this.vertices[0]},set:function(e){if(Ks.isObject(e))this.vertices.splice(0,1,e);else{const e=new mo("Two.Line.x argument is not an object.");console.warn(e.name,e.message)}}},right:{enumerable:!0,get:function(){return this.vertices[0]},set:function(e){if(Ks.isObject(e))this.vertices.splice(1,1,e);else{const e=new mo("Two.Line.y argument is not an object.");console.warn(e.name,e.message)}}}},Ma=3;class Ra extends va{constructor(e,t,n,i,r,s){super(e,i,r,s),this.from=t,this._to=n,this.type="connection",this.stageType="connection",this.events={mouseenter:e=>this.mouseEnter(e),mouseleave:e=>this.mouseLeave(e)},this.registerFromStep(),this.to=n,this.prevTo=n,this.reDraw()}get to(){return this._to}set to(e){this.unregisterToStep(),this._to=e,this.registerToStep()}mouseDown(e){return{handled:!1}}createSelectionOverlay(){const e=this.line.getBoundingClientRect(),[t,n]=this.line.vertices,[i,r]=t.x<n.x?[e.left,e.right]:[e.right,e.left],[s,o]=t.y<n.y?[e.top,e.bottom]:[e.bottom,e.top],a=Ma;return[{x:i,y:s},{x:(i+r)/2,y:(s+o)/2},{x:r,y:o}].map((e=>new pa(e.x,e.y,a)))}moveBy(e,t){const n=this.objectManager.getObjectsByType("step").filter((e=>e!=this.from.step)).map((e=>{const n=this.from.step.getConnectionsTo(this.from.output,e).filter((e=>e!=this)).map((e=>"step"==e.to.type?e.to.input:""));return{step:e,closest:e.closestInput(t,n)}})).reduce(((e,t)=>t.closest?e.closest?t.closest.distSq<e.closest.distSq?t:e:t:e),{});this.to=n.closest?{type:"step",step:n.step,input:n.closest.input}:{type:"point",surfacePoint:t},this.reDraw()}mouseUp(){const{to:e,from:t}=this,n=()=>this.objectManager.deleteObjects([this.ID]);if("step"!=e.type)return void n();const i=t.step.getConnectionTo(t.output,e.step,e.input);i&&i!=this?n():"step"==this.prevTo.type&&e.step==this.prevTo.step&&e.input==this.prevTo.input||(this.prevTo=e,this.eventHelper.trigger("onConnect",{ID:this.ID,from:{step:t.step.ID,output:t.output},to:{step:e.step.ID,input:e.input}}))}onDeleted(){return this.unregisterFromStep(),this.unregisterToStep(),[]}reDraw(){var e;const t=null==this.line;null===(e=this.line)||void 0===e||e.remove();const[n,i]=this.createFromTo();this.line=new Sa(n.x,n.y,i.x,i.y),this.root.add(this.line),t&&_a.GetRenderer(this.root,(e=>{e.elem.addEventListener("mouseenter",this.events.mouseenter),e.elem.addEventListener("mouseleave",this.events.mouseleave)}))}createFromTo(){return[this.from.step.getPosition({type:"output",name:this.from.output}),"point"==this.to.type?this.to.surfacePoint:this.to.step.getPosition({type:"input",name:this.to.input})]}registerToStep(){"step"==this._to.type&&this._to.step.registerConnection("input",this._to.input,this)}unregisterToStep(){"step"==this._to.type&&this._to.step.unregisterConnection("input",this._to.input,this)}registerFromStep(){this.from.step.registerConnection("output",this.from.output,this)}unregisterFromStep(){this.from.step.unregisterConnection("output",this.from.output,this)}mouseEnter(e){this.line.linewidth=3}mouseLeave(e){this.line.linewidth=1}}class Ta{static add(e,t,n={}){return n.modify?(e.x=e.x+t.x,e.y=e.y+t.y,e):{x:e.x+t.x,y:e.y+t.y}}}class Ca{constructor(){this.offset=this.getInitial()}reset(){this.offset=this.getInitial()}increment(){this.offset=Ta.add(this.offset,{x:10,y:10})}applyOffset(e){Ta.add(e,this.offset,{modify:!0})}getInitial(){return{x:0,y:0}}}class Oa{constructor(e,t,n){this.zuiManager=e,this.selectionManager=t,this.eventHelper=n,this.idCreator=new ka,this.pasteOffset=new Ca,this.objects={}}addFlowStep(e,t,n){return this._addFlowStep(this.idCreator.next(),e,t,n)}_addFlowStep(e,t,n,i){const r=new wa(e,t,n,i,this,this.zuiManager,this.eventHelper);return r.draw(),this.addObject(r),r}addFlowConnection(e,t){return this._addFlowConnection(this.idCreator.next(),e,t)}_addFlowConnection(e,t,n){const i=new Ra(e,t,n,this,this.zuiManager,this.eventHelper);return i.draw(),this.addObject(i),"step"==n.type&&this.eventHelper.trigger("onConnect",{ID:i.ID,from:{step:t.step.ID,output:t.output},to:{step:n.step.ID,input:n.input}}),i}addObject(e){this.objects[e.ID]=e}getObject(e){return this.objects[e]}getObjectsByType(e){return Object.keys(this.objects).reduce(((t,n)=>{const i=this.objects[n];return(null==i?void 0:i.type)==e&&t.push(i),t}),[])}deleteObjects(e){const t=e.map((e=>this.objects[e])).filter((e=>null!=e));if(!t.length)return;const n=t.map((e=>(e.deleted(),this.selectionManager.clearSelected(e),delete this.objects[e.ID],{ID:e.ID,type:e.type})));this.eventHelper.trigger("onDelete",n)}copyObjects(e){return this.pasteOffset.reset(),e.map((e=>this.getObject(e))).reduce(((e,t)=>{if("connection"==t.type){const n=this.exportConnection(t);n&&e.connections.push(n)}else e.steps.push(this.exportStep(t));return e}),{connections:[],steps:[]})}exportObjects(){return{steps:this.getObjectsByType("step").map(this.exportStep),connections:this.getObjectsByType("connection").map(this.exportConnection).filter((e=>null!=e)),maxID:this.idCreator.current()}}exportStep(e){const{x:t,y:n}=e.getPosition({type:"self"});return{ID:e.ID,name:e.stepName,surfacePoint:{x:t,y:n},options:e.Options}}exportConnection(e){if("step"==e.to.type)return{ID:e.ID,from:{step:e.from.step.ID,output:e.from.output},to:{step:e.to.step.ID,input:e.to.input}}}pasteObjects(e){this.pasteOffset.increment();const t={},n=e=>{const n=e.ID;t[n]=e.ID=this.idCreator.next()};e.steps.forEach((e=>{n(e),this.pasteOffset.applyOffset(e.surfacePoint)})),e.connections.forEach(n);const i=this._import(e);return this.selectionManager.setSelection(i.newSteps),t}importObjects(e){this.deleteObjects(Object.keys(this.objects)),this._import(e),this.idCreator.load(e.maxID)}_import(e){return{newSteps:e.steps.map((e=>this._addFlowStep(e.ID,e.name,e.surfacePoint,e.options))),newConnections:e.connections.map((e=>{const t={step:this.getObject(e.from.step),output:e.from.output},n={type:"step",step:this.getObject(e.to.step),input:e.to.input};this._addFlowConnection(e.ID,t,n)}))}}setStepOutputs(e,t){this.getObject(e).setOutputs(t)}}class Pa{constructor(e,t=e.objectManager,n=e.zuiManager,i=e.selectionManager,r=e.eventHelper,s=(()=>e.stateManager)){this.objectManager=t,this.zuiManager=n,this.selectionManager=i,this.eventHelper=r,this.stateManager=s,this.events={mousedown:e=>this.mouseDown(e),mousemove:e=>this.mouseMove(e),mouseup:e=>this.mouseUp(e),wheel:e=>this.wheel(e),contextmenu:e=>this.contextMenu(e)},this.preventContext=!1,this.itemsMoved=!1}attach(e){this.element=e,qe(this.events).forEach((t=>{"wheel"===t?e.addEventListener(t,this.events[t],{passive:!0}):e.addEventListener(t,this.events[t])}))}detach(){const e=this.element;e&&(qe(this.events).forEach((t=>{e.removeEventListener(t,this.events[t])})),this.element=void 0)}mouseDown(e){const t=2==e.button,n=e.target,i=va.GetFlowObjectData(n);if(this.mouse=t?void 0:{x:e.offsetX,y:e.offsetY},!i)return void(e.shiftKey||t||this.selectionManager.clearSelection());const r=this.objectManager.getObject(i.id),s=this.selectionManager.isSelected(r);if(t)s&&this.stateManager().editable&&(this.selectionManager.createSelectionDelete((()=>{this.objectManager.deleteObjects(this.selectionManager.map((e=>e.ID)))})),this.preventContext=!0);else{if(!this.mouse)throw new Error("mouse should have been present. unless rightClick");if(this.stateManager().editable){const e=this.zuiManager.clientToSurface(this.mouse),t=r.mouseDown(e);if(t.handled)return void this.selectionManager.setSelection(t.selecteds)}e.shiftKey?s?this.selectionManager.clearSelected(r):this.selectionManager.addSelected(r):s||this.selectionManager.setSelection([r])}}mouseMove(e){if(!this.mouse)return;const t={x:e.offsetX,y:e.offsetY},n=e.offsetX-this.mouse.x,i=e.offsetY-this.mouse.y;if(this.selectionManager.hasSelected){if(this.stateManager().editable){const e=this.zuiManager.clientToSurfaceDiff(n,i),r=this.zuiManager.clientToSurface(t);let s=this.selectionManager.getSelecteds();s.find((e=>"step"==e.type))&&(s=s.filter((e=>"step"==e.type))),s.forEach((t=>t.moveBy(new Fs(e.dx,e.dy),r))),this.itemsMoved=!0}}else this.zuiManager.panBy(n,i);this.selectionManager.redrawSelections(),this.mouse=t}mouseUp(e){const t=()=>{this.itemsMoved=!1,this.mouse=void 0};if(!this.stateManager().editable)return void t();const n=this.selectionManager.map((e=>(e.mouseUp(),"connection"==e.type?void 0:e.ID))).filter((e=>null!=e));this.itemsMoved&&n.length&&this.eventHelper.trigger("onMoveSteps",n),t()}wheel(e){var t=-e.deltaY/1e3;const n={x:e.offsetX,y:e.offsetY};this.zuiManager.zoomBy(t,n)}contextMenu(e){this.preventContext&&e.preventDefault(),this.preventContext=!1}}class Aa{constructor(e){this.eventHelper=e,this.selecteds=[]}clearSelection(){this.setSelection([])}addSelected(e){this.setSelection(this.selecteds.concat(e))}clearSelected(e){this.setSelection(this.selecteds.filter((t=>t!=e)))}setSelection(e){this.selecteds=e,this.redrawSelections(),this.triggerSelectionChange()}isSelected(e){return this.selecteds.indexOf(e)>-1}get hasSelected(){return this.selecteds.length>0}map(e){return this.selecteds.map(e)}iterate(e){this.selecteds.forEach(e)}getSelecteds(){return this.selecteds.map((e=>e))}redrawSelections(){requestAnimationFrame((()=>{this.removeSelectionDelete(),this.zuiManager.clearStage("selection"),this.selecteds.forEach((e=>e.drawSelectionOverlay()))}))}createSelectionDelete(e){if(!this.hasSelected||this.deleteHandle)return;const t=this.zuiManager.getSelectionRect(),n=(t.left+t.right)/2,i=t.bottom+10;this.deleteHandle=_a.CreateDeleteCircle({x:n,y:i},e),this.zuiManager.addToStage("selection",this.deleteHandle.root)}removeSelectionDelete(){this.deleteHandle&&(_a.RemoveDeleteCircle(this.deleteHandle),this.deleteHandle=void 0)}triggerSelectionChange(){this.eventHelper.trigger("onSelect",this.selecteds.map((e=>({type:e.type,ID:e.ID}))))}}class ja{constructor(){this.subscriptions={}}subscribe(e,t){let n=this.subscriptions[e];n||(n=this.subscriptions[e]=[]),n.push(t)}trigger(e,...t){var n;null===(n=this.subscriptions[e])||void 0===n||n.forEach((e=>e(...t)))}unsubscribe(e,t){const n=this.subscriptions[e];n&&(this.subscriptions[e]=n.filter((e=>e!=t)))}}class Fa{constructor(e,t=e.zuiManager,n=e.objectManager){this.zuiManager=t,this.objectManager=n,this.bottomOverlayDiv=Rs.create("div",{style:{position:"relative",zIndex:"1",top:"-25px",display:"inline-block"}}),this.centerBtn=Rs.create("button",{events:{click:e=>this.centerBtnClick(e)},attrs:{textContent:"o",title:"center to steps"}}),this.bottomOverlayDiv.appendChild(this.centerBtn),e.zuiManager.selfElement.appendChild(this.bottomOverlayDiv),e.zuiManager.subscribeToResize((e=>this.zuiResize(e)))}centerBtnClick(e){const t=this.objectManager.getObjectsByType("step");if(!t.length)return;this.zuiManager.reset();const n=t.map((e=>e.getPosition({type:"self"}))),i=n.reduce(((e,t)=>(e.x+=t.x,e.y+=t.y,e)),{x:0,y:0});i.x=i.x/n.length,i.y=i.y/n.length;const r=this.zuiManager.selfElement.getBoundingClientRect();this.zuiManager.panBy(-i.x,-i.y),this.zuiManager.panBy(r.width/2,r.height/2)}zuiResize(e){this.bottomOverlayDiv.style.left=e.width-30+"px"}}class La{constructor(e,t=e.zuiManager,n=e.selectionManager,i=e.objectManager){this.zuiManager=t,this.selectionManager=n,this.objectManager=i,this._readonly=!1}get editable(){return!this._readonly}getState(){return{surfaceMatrix:this.zuiManager.getState(),selectedIDs:this.selectionManager.getSelecteds().map((e=>e.ID))}}setState(e){if(!e)return this.zuiManager.reset(),void this.selectionManager.clearSelection();this.zuiManager.setState(e.surfaceMatrix),this.selectionManager.setSelection(e.selectedIDs.map((e=>this.objectManager.getObject(e))))}setReadonly(e){this._readonly=e}assertEditable(){if(this._readonly)throw new Error("can not edit while on readonly mode")}}class Ia{constructor(){this.eventHelper=new ja,this.selectionManager=new Aa(this.eventHelper),this.zuiManager=new Ts(this),this.objectManager=new Oa(this.zuiManager,this.selectionManager,this.eventHelper),this.interactionManager=new Pa(this),this.overlayManager=new Fa(this),this.stateManager=new La(this),this.selectionManager.zuiManager=this.zuiManager}}class za{constructor(){this.context=new Ia}get rootElement(){return this.context.zuiManager.selfElement}attach(e){this.context.zuiManager.attach(e),this.context.interactionManager.attach(this.context.zuiManager.selfElement)}detach(){this.context.zuiManager.detach(),this.context.interactionManager.detach()}addFlowStep(e,t,n){this.context.stateManager.assertEditable();const i=this.context.zuiManager.clientToSurface(t);return this.context.objectManager.addFlowStep(e,i,n).ID}deleteFlowSteps(e){this.context.stateManager.assertEditable(),this.context.objectManager.deleteObjects(e)}panBy(e,t){this.context.zuiManager.panBy(e,t)}resetPanAndZoom(){this.context.zuiManager.reset()}subscribe(e,t){this.context.eventHelper.subscribe(e,t)}unsubscribe(e,t){this.context.eventHelper.unsubscribe(e,t)}copyObjects(e){return this.context.objectManager.copyObjects(e)}pasteObjects(e){return this.context.stateManager.assertEditable(),this.context.objectManager.pasteObjects(e)}exportObjects(){return this.context.objectManager.exportObjects()}importObjects(e){this.context.objectManager.importObjects(e)}getState(){return this.context.stateManager.getState()}setState(e){this.context.stateManager.setState(e)}setReadonly(e){this.context.stateManager.setReadonly(e)}setStepOutputs(e,t){this.context.stateManager.assertEditable(),this.context.objectManager.setStepOutputs(e,t)}}const Na=Symbol.for("IDragHelper"),Da=Symbol.for("IResizeTracker");class Ba{setDragData(e,t,n){const i=e.dataTransfer;i.setData("drag-data",JSON.stringify(t)),n&&i.setData(n,"1")}isDragData(e,t){return t=t||"drag-data",-1!=e.dataTransfer.types.indexOf(t)}getDragData(e){var t;const n=null===(t=e.dataTransfer)||void 0===t?void 0:t.getData("drag-data");if(n)try{return JSON.parse(n)}catch(e){return}}}const Va=Symbol(),Ha=Symbol(),Ua=Symbol();const Wa=Object.getPrototypeOf,$a=new WeakMap,Ya=e=>e&&($a.has(e)?$a.get(e):Wa(e)===Object.prototype||Wa(e)===Array.prototype),Xa=e=>"object"==typeof e&&null!==e,qa=new WeakMap,Ka=e=>e[Ua]||e,Qa=(e,t,n)=>{if(!Ya(e))return e;const i=Ka(e),r=(e=>Object.isFrozen(e)||Object.values(Object.getOwnPropertyDescriptors(e)).some((e=>!e.writable)))(i);let s=n&&n.get(i);return s&&s[1].f===r||(s=((e,t)=>{const n={f:t};let i=!1;const r=(t,r)=>{if(!i){let i=n.a.get(e);i||(i=new Set,n.a.set(e,i)),r&&i.has(Va)||i.add(t)}},s={get:(t,i)=>i===Ua?e:(r(i),Qa(t[i],n.a,n.c)),has:(t,s)=>s===Ha?(i=!0,n.a.delete(e),!0):(r(s),s in t),getOwnPropertyDescriptor:(e,t)=>(r(t,!0),Object.getOwnPropertyDescriptor(e,t)),ownKeys:e=>(r(Va),Reflect.ownKeys(e))};return t&&(s.set=s.deleteProperty=()=>!1),[s,n]})(i,r),s[1].p=((e,t)=>new Proxy(e,t))(r?(e=>{let t=qa.get(e);if(!t){if(Array.isArray(e))t=Array.from(e);else{const n=Object.getOwnPropertyDescriptors(e);Object.values(n).forEach((e=>{e.configurable=!0})),t=Object.create(Wa(e),n)}qa.set(e,t)}return t})(i):i,s[0]),n&&n.set(i,s)),s[1].a=t,s[1].c=n,s[1].p},Ga=(e,t)=>{const n=Reflect.ownKeys(e),i=Reflect.ownKeys(t);return n.length!==i.length||n.some(((e,t)=>e!==i[t]))},Ja=(e,t,n,i)=>{if(Object.is(e,t))return!1;if(!Xa(e)||!Xa(t))return!0;const r=n.get(Ka(e));if(!r)return!0;if(i){const n=i.get(e);if(n&&n.n===t)return n.g;i.set(e,{n:t,g:!1})}let s=null;for(const o of r){const r=o===Va?Ga(e,t):Ja(e[o],t[o],n,i);if(!0!==r&&!1!==r||(s=r),s)break}return null===s&&(s=!0),i&&i.set(e,{n:t,g:s}),s},Za=(e,t=!0)=>{$a.set(e,t)},el=Symbol("VERSION"),tl=Symbol("LISTENERS"),nl=Symbol("SNAPSHOT"),il=Symbol("HANDLER"),rl=Symbol("PROMISE_RESULT"),sl=Symbol("PROMISE_ERROR"),ol=new WeakSet,al=e=>"object"==typeof e&&null!==e,ll=e=>al(e)&&!ol.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),cl=new WeakMap;let hl=1;const ul=new WeakMap;function fl(e={}){if(!al(e))throw new Error("object required");const t=cl.get(e);if(t)return t;let n=hl;const i=new Set,r=(e,t=++hl)=>{n!==t&&(n=t,i.forEach((n=>n(e,t))))},s=new Map,o=e=>{let t=s.get(e);return t||(t=(t,n)=>{const i=[...t];i[1]=[e,...i[1]],r(i,n)},s.set(e,t)),t},a=e=>{const t=s.get(e);return s.delete(e),t},l=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e)),c={get:(e,t,r)=>t===el?n:t===tl?i:t===nl?((e,t)=>{const i=ul.get(t);if((null==i?void 0:i[0])===n)return i[1];const r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return Za(r,!0),ul.set(t,[n,r]),Reflect.ownKeys(e).forEach((n=>{const i=Reflect.get(e,n,t);if(ol.has(i))Za(i,!1),r[n]=i;else if(i instanceof Promise)if(rl in i)r[n]=i[rl];else{const e=i[sl]||i;Object.defineProperty(r,n,{get(){if(rl in i)return i[rl];throw e}})}else(null==i?void 0:i[tl])?r[n]=i[nl]:r[n]=i})),Object.freeze(r)})(e,r):t===il?c:Reflect.get(e,t,r),deleteProperty(e,t){const n=Reflect.get(e,t),i=null==n?void 0:n[tl];i&&i.delete(a(t));const s=Reflect.deleteProperty(e,t);return s&&r(["delete",[t],n]),s},is:Object.is,canProxy:ll,set(e,t,n,i){var s;const l=Reflect.has(e,t),c=Reflect.get(e,t,i);if(l&&this.is(c,n))return!0;const h=null==c?void 0:c[tl];let u;return h&&h.delete(a(t)),al(n)&&(n=(e=>Ya(e)&&e[Ua]||null)(n)||n),(null==(s=Object.getOwnPropertyDescriptor(e,t))?void 0:s.set)?u=n:n instanceof Promise?u=n.then((e=>(u[rl]=e,r(["resolve",[t],e]),e))).catch((e=>{u[sl]=e,r(["reject",[t],e])})):(null==n?void 0:n[tl])?(u=n,u[tl].add(o(t))):this.canProxy(n)?(u=fl(n),u[tl].add(o(t))):u=n,Reflect.set(e,t,u,i),r(["set",[t],n,c]),!0}},h=new Proxy(l,c);return cl.set(e,h),Reflect.ownKeys(e).forEach((t=>{const n=Object.getOwnPropertyDescriptor(e,t);n.get||n.set?Object.defineProperty(l,t,n):h[t]=e[t]})),h}function dl(e,t,n){let i;(null==e?void 0:e[tl])||console.warn("Please use proxy object");const r=[],s=e=>{r.push(e),n?t(r.splice(0)):i||(i=Promise.resolve().then((()=>{i=void 0,t(r.splice(0))})))};return e[tl].add(s),()=>{e[tl].delete(s)}}function pl(e){return(null==e?void 0:e[nl])||console.warn("Please use proxy object"),e[nl]}var gl=n(100);const{useSyncExternalStore:ml}=gl;Symbol();class _l{proxify(e){return fl(e)}subscribe(e,t){return dl(e,t)}subscribeKey(e,t,n){return function(e,t,n,i){return dl(e,(i=>{i.some((e=>e[1][0]===t))&&n(e[t])}),void 0)}(e,t,n)}markRaw(e){return function(e){return ol.add(e),e}(e)}useSnapshot(e){return function(e,t){const n=void 0,i=(0,L.useRef)(),r=(0,L.useRef)();let s=!0;const o=ml((0,L.useCallback)((t=>{const i=dl(e,t,n);return t(),i}),[e,n]),(()=>{const t=pl(e);try{if(!s&&i.current&&r.current&&!Ja(i.current,t,r.current,new WeakMap))return i.current}catch(e){}return t}),(()=>pl(e)));s=!1;const a=new WeakMap;(0,L.useEffect)((()=>{i.current=o,r.current=a})),((e,t)=>{const n=(0,L.useRef)();(0,L.useEffect)((()=>{n.current=((e,t)=>{const n=[],i=new WeakSet,r=(e,s)=>{if(i.has(e))return;Xa(e)&&i.add(e);const o=Xa(e)&&t.get(Ka(e));o?o.forEach((t=>{r(e[t],s?[...s,t]:[t])})):s&&n.push(s)};return r(e),n})(e,t)})),(0,L.useDebugValue)(n.current)})(o,a);const l=(0,L.useMemo)((()=>new WeakMap),[]);return Qa(o,a,l)}(e)}}const yl={async register(e){e.registerInstance(Ue,new za),e.register(Ye,_l),e.register(Da,O(Ms)),e.register(Na,O(Ba))},unregister(e){},postInit(e){}};var vl=n(322);function bl(e){return e.getDefaultSteps().map((e=>{var t,n;return{name:e.name,version:e.version,style:{backgroundColor:null===(t=e.style)||void 0===t?void 0:t.fill,borderColor:(null===(n=e.style)||void 0===n?void 0:n.stroke)||"black"}}}))}const xl=e=>JSON.stringify({name:e.name,version:e.version});function wl(e){const t=e.container,n=t.resolve(j),i=t.resolve(Ye),r=t.resolve(Na),s=t.resolve(P),[o,a]=(0,L.useState)(bl(s)),[l,c]=(0,L.useState)(!n.readonly);(0,L.useEffect)((()=>{const e=i.subscribe(n.stepRepo,(()=>a(bl(s)))),t=i.subscribeKey(n,"readonly",(()=>c(!n.readonly)));return()=>{e(),t()}}));const h=e=>{if(n.readonly)return;const t=(i=e.currentTarget,JSON.parse(i.getAttribute("drag-data")));var i;r.setDragData(e.nativeEvent,{dragType:"newStep",name:t.name,version:t.version})};return(0,vl.jsx)("div",{children:o.map((e=>(0,vl.jsx)(kl,{children:(0,vl.jsx)(Sl,{draggable:l,style:e.style,onDragStart:h,"drag-data":xl(e),children:e.name})},e.name)))})}const kl=ze("div",{borderBottom:"1px solid blue",maxWidth:"100px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),Sl=ze("div",{height:"20px",width:"80px",display:"flex",justifyContent:"center",border:"1px solid black"});var El=n(29);function Ml(e){const{container:t}=e,n=(0,L.createRef)(),i=t.resolve(Ue),r=t.resolve(Na),s=t.resolve(He),o=e=>{r.isDragData(e)&&e.preventDefault()},a=e=>{const t=r.getDragData(e);"newStep"===(null==t?void 0:t.dragType)&&s.addStep(t.name,{x:e.offsetX,y:e.offsetY},t.version)};return(0,L.useEffect)((()=>(i.attach(n.current),()=>i.detach()))),(0,L.useEffect)((()=>(i.rootElement.addEventListener("dragover",o),i.rootElement.addEventListener("drop",a),()=>{i.rootElement.removeEventListener("dragover",o),i.rootElement.removeEventListener("drop",a)})),[]),(0,vl.jsx)(Tl,{children:(0,vl.jsx)(Rl,{ref:n})})}const Rl=ze("div",{width:"100%",height:"100%"}),Tl=ze("div",{width:"100%",height:"100%"}),Cl=["enum","boolean","number","string","msg","wholeMsg","notSet"],Ol=new Set(["1","2","3","4","5","6","7","8","9","0","Backspace","ArrowLeft","ArrowRight","ArrowDown","ArrowUp","Delete"]),Pl={border:"3px solid red"},Al={},jl=(e,t)=>({width:e.width,...t}),Fl={enum:e=>e.resolve(st).getComponentFor(Symbol.for("Expression_enum"),(({expression:e,onChange:t,type:n})=>{if("object"!=typeof n)throw new Error("unexpected type for enum");return(0,vl.jsx)("select",{value:e.value,onChange:e=>t(e.target.value,!0),children:n.options.map((e=>{var t;const n=null!==(t=e.text)&&void 0!==t?t:e.value;return(0,vl.jsx)("option",{value:n,children:e.text},n)}))})})),boolean:e=>e.resolve(st).getComponentFor(Symbol.for("Expression_boolean"),(({expression:e,onChange:t,options:n})=>("true"!==e.value&&"false"!==e.value&&setTimeout((()=>t(e.value?"true":"false",!0))),(0,vl.jsxs)("select",{value:e.value,onChange:e=>t(e.target.value,!0),children:[(0,vl.jsx)("option",{value:"false",children:"false"}),(0,vl.jsx)("option",{value:"true",children:"true"})]})))),string:e=>e.resolve(st).getComponentFor(Symbol.for("Expression_string"),(({expression:e,onChange:t,options:n})=>(0,vl.jsx)("input",{type:"text",style:jl(n),value:e.value,onChange:e=>t(e.target.value,!0)}))),number:e=>e.resolve(st).getComponentFor(Symbol.for("Expression_number"),(({expression:e,onChange:t,options:n})=>(isNaN(Number(e.value))&&setTimeout((()=>t("",!0))),(0,vl.jsx)("input",{type:"text",style:jl(n),value:e.value,onKeyDown:e=>{!Ol.has(e.key)&&e.preventDefault()},onChange:e=>t(e.target.value,!0)})))),msg:e=>e.resolve(st).getComponentFor(Symbol.for("Expression_msg"),(({expression:t,onChange:n,options:i})=>{const r=e.resolve(et),s=e=>jl(i,e?Al:Pl),[o,a]=(0,L.useState)(s(r.validate(t.value)));return(0,vl.jsx)("input",{type:"text",style:o,value:t.value,onChange:e=>{const t=e.target.value,i=r.validate(t),o=s(i);a(o),n(t,i)}})})),wholeMsg:e=>e.resolve(st).getComponentFor(Symbol.for("Expression_wholeMsg"),(()=>(0,vl.jsx)(vl.Fragment,{}))),notSet:e=>e.resolve(st).getComponentFor(Symbol.for("Expression_notSet"),(()=>(0,vl.jsx)(vl.Fragment,{})))},Ll={NameDiv:ze("div",{fontWeight:"bold"}),DescDiv:ze("div",{fontSize:"small"})};function Il(e){const t=e.container,n=t.resolve(j),i=t.resolve(Ye),r=t.resolve(Je),s=(e=>e.resolve(st).getComponentFor(Symbol.for("Expression"),(function(t){var n;const i=ba(t.types,(e=>"string"==typeof e?e:e.type)),r=Cl.filter((e=>i[e])).map((e=>i[e])),s=t.expression||("object"==typeof r[0]?{type:r[0].type,value:null!==(n=r[0].options[0].value)&&void 0!==n?n:r[0].options[0].text}:{type:r[0],value:""}),o=(e,n)=>{var i;null===(i=t.onChange)||void 0===i||i.call(t,e,n)},a=Fl[s.type](e);return(0,vl.jsxs)("span",{children:[(0,vl.jsx)("span",{children:(0,vl.jsx)("select",{value:s.type,onChange:e=>{o({type:e.target.value,value:s.value},!1)},children:r.map((e=>"string"==typeof e?(0,vl.jsx)("option",{children:e},e):(0,vl.jsx)("option",{children:e.type},e.type)))})}),(0,vl.jsx)("span",{children:(0,vl.jsx)(a,{expression:s,type:i[s.type],options:t.inputOptions||{},onChange:(e,t)=>o({type:s.type,value:e},t)})})]})})))(t),o=(0,L.useRef)(null),a=(0,L.useRef)(null),l=(0,L.useRef)(null),[c,h]=(0,L.useState)(d());function u(){f(a.current,n.readonly)}function f(e,t){if(e.style.display=t?"block":"none",!t)return;const n=e.parentElement.getBoundingClientRect();e.style.left=n.left+"px",e.style.top=n.top+"px",e.style.width=n.width+"px",e.style.height=n.height+"px",e.style.lineHeight=n.height+"px"}function d(){var e,t;const i=n.selecteds[0],a=n.steps[i];for(;null===(e=o.current)||void 0===e?void 0:e.firstElementChild;)o.current.removeChild(o.current.firstElementChild);if(!(null==a?void 0:a.options.editSection))return(0,vl.jsx)(vl.Fragment,{});const{entity:c,ui:h}=n.initOptions,u=a.options.editSection({propValues:a.propValues||{},callbacks:{setProp:(e,t)=>r.setStepProp([i],e,t),setOutputs:e=>r.setStepOutputs(i,e),entity:c?{get:c.onRequire,getList:c.onListRequire}:void 0,ui:h?{listUIPages:h.onUIPageListRequire}:void 0,loading:e=>function(e){f(l.current,e)}(e)},react:{prop:Ll,ExpressionComp:s}});return u instanceof HTMLElement?(null===(t=o.current)||void 0===t||t.appendChild(u),(0,vl.jsx)(vl.Fragment,{})):(0,vl.jsx)(u,{})}return(0,L.useEffect)((()=>{const e=i.subscribeKey(n,"selecteds",(async()=>h(d()))),t=i.subscribeKey(n,"readonly",u);return()=>{e(),t()}}),[]),(0,L.useEffect)((()=>{u()})),(0,vl.jsxs)("div",{children:[zl(n),(0,vl.jsx)(Dl,{ref:a}),(0,vl.jsx)(Bl,{ref:l,children:"Loading"}),(0,vl.jsx)("hr",{}),c,(0,vl.jsx)("div",{id:"html",ref:o})]})}function zl(e){const t=e.steps;switch(e.selecteds.length){case 0:return(0,vl.jsx)(vl.Fragment,{});case 1:const i=t[e.selecteds[0]];return(0,vl.jsxs)("div",{children:[(0,vl.jsxs)(Nl,{children:[i.options.name,"@",i.options.version]}),"id: ",e.selecteds[0]]});default:const r=e.selecteds.map((e=>t[e].options)).reduce(((e,t)=>{const n=`${t.name}@${t.version}`;return(e[n]||(e[n]={count:0,name:t.name,version:t.version})).count++,e}),{}),s=(e=>e,qe(n=r).map(((e,t)=>n[e]))),o=t[e.selecteds[0]].options.name,a=!e.selecteds.find((e=>t[e].options.name!=o));return(0,vl.jsxs)("div",{children:[(0,vl.jsxs)(Nl,{children:[e.selecteds.length," ",a?o:""," steps"]}),s.map((e=>(0,vl.jsxs)("div",{children:[e.count," ",e.name,"@",e.version]},e.name+"_"+e.version)))]})}var n}const Nl=ze("div",{fontSize:"x-large"}),Dl=ze("div",{position:"absolute",display:"none"}),Bl=ze("div",{position:"absolute",display:"none",backgroundColor:"rgba(20,20,20,0.8)",textAlign:"center",color:"white"});function Vl(e){const t=e.container;return(0,vl.jsxs)(Hl,{className:"rootSection",children:[(0,vl.jsx)(Ul,{className:"leftPanel",children:(0,vl.jsx)(wl,{container:t})}),(0,vl.jsx)(Wl,{className:"content",children:(0,vl.jsx)(Ml,{container:t})}),(0,vl.jsx)($l,{className:"rightPanel",children:(0,vl.jsx)(Il,{container:t})})]})}const Hl=ze("section",{display:"flex",height:"100%",width:"100%"}),Ul=ze("section",{width:"100px",borderRight:"1px solid green"}),Wl=ze("section",{flexGrow:1}),$l=ze("section",{width:"200px",borderLeft:"1px solid red"});class Yl{constructor(e){this.container=e}mount(e){if(this.root)throw new Error("Can not append allready appended flow");let t;e instanceof parent.HTMLIFrameElement||"IFRAME"==e.tagName?(t=document.createElement("div"),e.contentDocument.body.appendChild(t)):t=e,this.root=function(e,t){const n=(0,El.s)(e);return n.render((0,vl.jsx)(Vl,{container:t})),n}(t,this.container)}unmount(){var e;null===(e=this.root)||void 0===e||e.unmount(),this.root=void 0}}const Xl={async register(e){e.registerInstance(ut,new Yl(e))},unregister(e){},postInit(e){}};class ql{constructor(e=function(){return E.createChildContainer()}(),t=(()=>e.resolve(Be)),n=(()=>e.resolve(ut)),i=(()=>e.resolve(P)),r=(()=>e.resolve(Qe)),s=(()=>e.resolve(We))){this.container=e,this.state=t,this.presentation=n,this.stepRepo=i,this.importExport=r,this.history=s,this.inited=!1,this.destroyed=!1,this.mounted=!1}async init(e){if(this.inited)throw new Error("double init called");const t=[Xl,ht,yl];await Promise.all(t.map((t=>t.register(this.container,e)))),this.inited=!0,t.forEach((t=>t.postInit(e)))}async destroy(){await Promise.all([Xl,ht,yl].map((e=>e.unregister(this.container)))),this.destroyed=!0}assert(){if(!this.inited)throw new Error("must call 'await .init()'");if(this.destroyed)throw new Error("this instance was destroyed allready. create new Program()")}mount(e){this.assert(),this.mounted&&this.unmount(),this.presentation().mount(e),this.mounted=!0}unmount(){this.assert(),this.presentation().unmount()}registerStep(e){this.assert(),this.stepRepo().registerStep(e,!0)}exportModel(e){return this.assert(),this.importExport().exportModel(e)}async importModel(e){this.assert(),await this.importExport().importModel(e,{resetPanAndZoom:!0})}copy(){return this.assert(),this.importExport().copy()}async paste(e){this.assert(),await this.importExport().paste(e)}getState(){return this.state().getState()}setState(e){this.state().setState(e)}setReadonly(e){this.state().setReadonly(e)}async undo(){return this.assert(),await this.history().undo()}async redo(){return this.assert(),await this.history().redo()}}})(),i})()));